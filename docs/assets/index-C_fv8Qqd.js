(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function $l(i){const t=Object.create(null);for(const e of i.split(","))t[e]=1;return e=>e in t}const _t={},zr=[],oi=()=>{},e0=()=>!1,Ho=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),Kl=i=>i.startsWith("onUpdate:"),$t=Object.assign,Zl=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},Hg=Object.prototype.hasOwnProperty,ft=(i,t)=>Hg.call(i,t),Q=Array.isArray,Hr=i=>No(i)==="[object Map]",i0=i=>No(i)==="[object Set]",tt=i=>typeof i=="function",jt=i=>typeof i=="string",er=i=>typeof i=="symbol",kt=i=>i!==null&&typeof i=="object",r0=i=>(kt(i)||tt(i))&&tt(i.then)&&tt(i.catch),n0=Object.prototype.toString,No=i=>n0.call(i),Ng=i=>No(i).slice(8,-1),s0=i=>No(i)==="[object Object]",ql=i=>jt(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Pn=$l(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Uo=i=>{const t=Object.create(null);return(e=>t[e]||(t[e]=i(e)))},Ug=/-\w/g,Zi=Uo(i=>i.replace(Ug,t=>t.slice(1).toUpperCase())),Wg=/\B([A-Z])/g,Sr=Uo(i=>i.replace(Wg,"-$1").toLowerCase()),o0=Uo(i=>i.charAt(0).toUpperCase()+i.slice(1)),ga=Uo(i=>i?`on${o0(i)}`:""),Vi=(i,t)=>!Object.is(i,t),pa=(i,...t)=>{for(let e=0;e<i.length;e++)i[e](...t)},a0=(i,t,e,r=!1)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,writable:r,value:e})},Yg=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let qc;const Wo=()=>qc||(qc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jl(i){if(Q(i)){const t={};for(let e=0;e<i.length;e++){const r=i[e],n=jt(r)?$g(r):Jl(r);if(n)for(const s in n)t[s]=n[s]}return t}else if(jt(i)||kt(i))return i}const Xg=/;(?![^(]*\))/g,Vg=/:([^]+)/,Gg=/\/\*[^]*?\*\//g;function $g(i){const t={};return i.replace(Gg,"").split(Xg).forEach(e=>{if(e){const r=e.split(Vg);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Yo(i){let t="";if(jt(i))t=i;else if(Q(i))for(let e=0;e<i.length;e++){const r=Yo(i[e]);r&&(t+=r+" ")}else if(kt(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const Kg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zg=$l(Kg);function l0(i){return!!i||i===""}const c0=i=>!!(i&&i.__v_isRef===!0),Kn=i=>jt(i)?i:i==null?"":Q(i)||kt(i)&&(i.toString===n0||!tt(i.toString))?c0(i)?Kn(i.value):JSON.stringify(i,h0,2):String(i),h0=(i,t)=>c0(t)?h0(i,t.value):Hr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,n],s)=>(e[ma(r,s)+" =>"]=n,e),{})}:i0(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>ma(e))}:er(t)?ma(t):kt(t)&&!Q(t)&&!s0(t)?String(t):t,ma=(i,t="")=>{var e;return er(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};let oe;class qg{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=oe,!t&&oe&&(this.index=(oe.scopes||(oe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=oe;try{return oe=this,t()}finally{oe=e}}}on(){++this._on===1&&(this.prevScope=oe,oe=this)}off(){this._on>0&&--this._on===0&&(oe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(this.effects.length=0,e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Jg(){return oe}let yt;const _a=new WeakSet;class u0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,oe&&oe.active&&oe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_a.has(this)&&(_a.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||d0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jc(this),g0(this);const t=yt,e=Ne;yt=this,Ne=!0;try{return this.fn()}finally{p0(this),yt=t,Ne=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ec(t);this.deps=this.depsTail=void 0,Jc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_a.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){sl(this)&&this.run()}get dirty(){return sl(this)}}let f0=0,Fn,Ln;function d0(i,t=!1){if(i.flags|=8,t){i.next=Ln,Ln=i;return}i.next=Fn,Fn=i}function Ql(){f0++}function tc(){if(--f0>0)return;if(Ln){let t=Ln;for(Ln=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let i;for(;Fn;){let t=Fn;for(Fn=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){i||(i=r)}t=e}}if(i)throw i}function g0(i){for(let t=i.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function p0(i){let t,e=i.depsTail,r=e;for(;r;){const n=r.prevDep;r.version===-1?(r===e&&(e=n),ec(r),Qg(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}i.deps=t,i.depsTail=e}function sl(i){for(let t=i.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(m0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!i._dirty}function m0(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===Zn)||(i.globalVersion=Zn,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!sl(i))))return;i.flags|=2;const t=i.dep,e=yt,r=Ne;yt=i,Ne=!0;try{g0(i);const n=i.fn(i._value);(t.version===0||Vi(n,i._value))&&(i.flags|=128,i._value=n,t.version++)}catch(n){throw t.version++,n}finally{yt=e,Ne=r,p0(i),i.flags&=-3}}function ec(i,t=!1){const{dep:e,prevSub:r,nextSub:n}=i;if(r&&(r.nextSub=n,i.prevSub=void 0),n&&(n.prevSub=r,i.nextSub=void 0),e.subs===i&&(e.subs=r,!r&&e.computed)){e.computed.flags&=-5;for(let s=e.computed.deps;s;s=s.nextDep)ec(s,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Qg(i){const{prevDep:t,nextDep:e}=i;t&&(t.nextDep=e,i.prevDep=void 0),e&&(e.prevDep=t,i.nextDep=void 0)}let Ne=!0;const _0=[];function Fi(){_0.push(Ne),Ne=!1}function Li(){const i=_0.pop();Ne=i===void 0?!0:i}function Jc(i){const{cleanup:t}=i;if(i.cleanup=void 0,t){const e=yt;yt=void 0;try{t()}finally{yt=e}}}let Zn=0;class tp{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ic{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!yt||!Ne||yt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==yt)e=this.activeLink=new tp(yt,this),yt.deps?(e.prevDep=yt.depsTail,yt.depsTail.nextDep=e,yt.depsTail=e):yt.deps=yt.depsTail=e,v0(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const r=e.nextDep;r.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=r),e.prevDep=yt.depsTail,e.nextDep=void 0,yt.depsTail.nextDep=e,yt.depsTail=e,yt.deps===e&&(yt.deps=r)}return e}trigger(t){this.version++,Zn++,this.notify(t)}notify(t){Ql();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{tc()}}}function v0(i){if(i.dep.sc++,i.sub.flags&4){const t=i.dep.computed;if(t&&!i.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)v0(r)}const e=i.dep.subs;e!==i&&(i.prevSub=e,e&&(e.nextSub=i)),i.dep.subs=i}}const ol=new WeakMap,pr=Symbol(""),al=Symbol(""),qn=Symbol("");function Xt(i,t,e){if(Ne&&yt){let r=ol.get(i);r||ol.set(i,r=new Map);let n=r.get(e);n||(r.set(e,n=new ic),n.map=r,n.key=e),n.track()}}function ki(i,t,e,r,n,s){const o=ol.get(i);if(!o){Zn++;return}const a=l=>{l&&l.trigger()};if(Ql(),t==="clear")o.forEach(a);else{const l=Q(i),c=l&&ql(e);if(l&&e==="length"){const h=Number(r);o.forEach((u,f)=>{(f==="length"||f===qn||!er(f)&&f>=h)&&a(u)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),c&&a(o.get(qn)),t){case"add":l?c&&a(o.get("length")):(a(o.get(pr)),Hr(i)&&a(o.get(al)));break;case"delete":l||(a(o.get(pr)),Hr(i)&&a(o.get(al)));break;case"set":Hr(i)&&a(o.get(pr));break}}tc()}function Mr(i){const t=ut(i);return t===i?t:(Xt(t,"iterate",qn),De(i)?t:t.map(Wt))}function Xo(i){return Xt(i=ut(i),"iterate",qn),i}const ep={__proto__:null,[Symbol.iterator](){return va(this,Symbol.iterator,Wt)},concat(...i){return Mr(this).concat(...i.map(t=>Q(t)?Mr(t):t))},entries(){return va(this,"entries",i=>(i[1]=Wt(i[1]),i))},every(i,t){return xi(this,"every",i,t,void 0,arguments)},filter(i,t){return xi(this,"filter",i,t,e=>e.map(Wt),arguments)},find(i,t){return xi(this,"find",i,t,Wt,arguments)},findIndex(i,t){return xi(this,"findIndex",i,t,void 0,arguments)},findLast(i,t){return xi(this,"findLast",i,t,Wt,arguments)},findLastIndex(i,t){return xi(this,"findLastIndex",i,t,void 0,arguments)},forEach(i,t){return xi(this,"forEach",i,t,void 0,arguments)},includes(...i){return xa(this,"includes",i)},indexOf(...i){return xa(this,"indexOf",i)},join(i){return Mr(this).join(i)},lastIndexOf(...i){return xa(this,"lastIndexOf",i)},map(i,t){return xi(this,"map",i,t,void 0,arguments)},pop(){return _n(this,"pop")},push(...i){return _n(this,"push",i)},reduce(i,...t){return Qc(this,"reduce",i,t)},reduceRight(i,...t){return Qc(this,"reduceRight",i,t)},shift(){return _n(this,"shift")},some(i,t){return xi(this,"some",i,t,void 0,arguments)},splice(...i){return _n(this,"splice",i)},toReversed(){return Mr(this).toReversed()},toSorted(i){return Mr(this).toSorted(i)},toSpliced(...i){return Mr(this).toSpliced(...i)},unshift(...i){return _n(this,"unshift",i)},values(){return va(this,"values",Wt)}};function va(i,t,e){const r=Xo(i),n=r[t]();return r!==i&&!De(i)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.done||(s.value=e(s.value)),s}),n}const ip=Array.prototype;function xi(i,t,e,r,n,s){const o=Xo(i),a=o!==i&&!De(i),l=o[t];if(l!==ip[t]){const u=l.apply(i,s);return a?Wt(u):u}let c=e;o!==i&&(a?c=function(u,f){return e.call(this,Wt(u),f,i)}:e.length>2&&(c=function(u,f){return e.call(this,u,f,i)}));const h=l.call(o,c,r);return a&&n?n(h):h}function Qc(i,t,e,r){const n=Xo(i);let s=e;return n!==i&&(De(i)?e.length>3&&(s=function(o,a,l){return e.call(this,o,a,l,i)}):s=function(o,a,l){return e.call(this,o,Wt(a),l,i)}),n[t](s,...r)}function xa(i,t,e){const r=ut(i);Xt(r,"iterate",qn);const n=r[t](...e);return(n===-1||n===!1)&&oc(e[0])?(e[0]=ut(e[0]),r[t](...e)):n}function _n(i,t,e=[]){Fi(),Ql();const r=ut(i)[t].apply(i,e);return tc(),Li(),r}const rp=$l("__proto__,__v_isRef,__isVue"),x0=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(er));function np(i){er(i)||(i=String(i));const t=ut(this);return Xt(t,"has",i),t.hasOwnProperty(i)}class y0{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,s=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return s;if(e==="__v_raw")return r===(n?s?gp:C0:s?S0:b0).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Q(t);if(!n){let l;if(o&&(l=ep[e]))return l;if(e==="hasOwnProperty")return np}const a=Reflect.get(t,e,Vt(t)?t:r);if((er(e)?x0.has(e):rp(e))||(n||Xt(t,"get",e),s))return a;if(Vt(a)){const l=o&&ql(e)?a:a.value;return n&&kt(l)?cl(l):l}return kt(a)?n?cl(a):nc(a):a}}class w0 extends y0{constructor(t=!1){super(!1,t)}set(t,e,r,n){let s=t[e];if(!this._isShallow){const l=qi(s);if(!De(r)&&!qi(r)&&(s=ut(s),r=ut(r)),!Q(t)&&Vt(s)&&!Vt(r))return l||(s.value=r),!0}const o=Q(t)&&ql(e)?Number(e)<t.length:ft(t,e),a=Reflect.set(t,e,r,Vt(t)?t:n);return t===ut(n)&&(o?Vi(r,s)&&ki(t,"set",e,r):ki(t,"add",e,r)),a}deleteProperty(t,e){const r=ft(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&ki(t,"delete",e,void 0),n}has(t,e){const r=Reflect.has(t,e);return(!er(e)||!x0.has(e))&&Xt(t,"has",e),r}ownKeys(t){return Xt(t,"iterate",Q(t)?"length":pr),Reflect.ownKeys(t)}}class sp extends y0{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const op=new w0,ap=new sp,lp=new w0(!0);const ll=i=>i,Es=i=>Reflect.getPrototypeOf(i);function cp(i,t,e){return function(...r){const n=this.__v_raw,s=ut(n),o=Hr(s),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,c=n[i](...r),h=e?ll:t?go:Wt;return!t&&Xt(s,"iterate",l?al:pr),{next(){const{value:u,done:f}=c.next();return f?{value:u,done:f}:{value:a?[h(u[0]),h(u[1])]:h(u),done:f}},[Symbol.iterator](){return this}}}}function Ds(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function hp(i,t){const e={get(n){const s=this.__v_raw,o=ut(s),a=ut(n);i||(Vi(n,a)&&Xt(o,"get",n),Xt(o,"get",a));const{has:l}=Es(o),c=t?ll:i?go:Wt;if(l.call(o,n))return c(s.get(n));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(n)},get size(){const n=this.__v_raw;return!i&&Xt(ut(n),"iterate",pr),n.size},has(n){const s=this.__v_raw,o=ut(s),a=ut(n);return i||(Vi(n,a)&&Xt(o,"has",n),Xt(o,"has",a)),n===a?s.has(n):s.has(n)||s.has(a)},forEach(n,s){const o=this,a=o.__v_raw,l=ut(a),c=t?ll:i?go:Wt;return!i&&Xt(l,"iterate",pr),a.forEach((h,u)=>n.call(s,c(h),c(u),o))}};return $t(e,i?{add:Ds("add"),set:Ds("set"),delete:Ds("delete"),clear:Ds("clear")}:{add(n){!t&&!De(n)&&!qi(n)&&(n=ut(n));const s=ut(this);return Es(s).has.call(s,n)||(s.add(n),ki(s,"add",n,n)),this},set(n,s){!t&&!De(s)&&!qi(s)&&(s=ut(s));const o=ut(this),{has:a,get:l}=Es(o);let c=a.call(o,n);c||(n=ut(n),c=a.call(o,n));const h=l.call(o,n);return o.set(n,s),c?Vi(s,h)&&ki(o,"set",n,s):ki(o,"add",n,s),this},delete(n){const s=ut(this),{has:o,get:a}=Es(s);let l=o.call(s,n);l||(n=ut(n),l=o.call(s,n)),a&&a.call(s,n);const c=s.delete(n);return l&&ki(s,"delete",n,void 0),c},clear(){const n=ut(this),s=n.size!==0,o=n.clear();return s&&ki(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=cp(n,i,t)}),e}function rc(i,t){const e=hp(i,t);return(r,n,s)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?r:Reflect.get(ft(e,n)&&n in r?e:r,n,s)}const up={get:rc(!1,!1)},fp={get:rc(!1,!0)},dp={get:rc(!0,!1)};const b0=new WeakMap,S0=new WeakMap,C0=new WeakMap,gp=new WeakMap;function pp(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mp(i){return i.__v_skip||!Object.isExtensible(i)?0:pp(Ng(i))}function nc(i){return qi(i)?i:sc(i,!1,op,up,b0)}function _p(i){return sc(i,!1,lp,fp,S0)}function cl(i){return sc(i,!0,ap,dp,C0)}function sc(i,t,e,r,n){if(!kt(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const s=mp(i);if(s===0)return i;const o=n.get(i);if(o)return o;const a=new Proxy(i,s===2?r:e);return n.set(i,a),a}function Nr(i){return qi(i)?Nr(i.__v_raw):!!(i&&i.__v_isReactive)}function qi(i){return!!(i&&i.__v_isReadonly)}function De(i){return!!(i&&i.__v_isShallow)}function oc(i){return i?!!i.__v_raw:!1}function ut(i){const t=i&&i.__v_raw;return t?ut(t):i}function vp(i){return!ft(i,"__v_skip")&&Object.isExtensible(i)&&a0(i,"__v_skip",!0),i}const Wt=i=>kt(i)?nc(i):i,go=i=>kt(i)?cl(i):i;function Vt(i){return i?i.__v_isRef===!0:!1}function Me(i){return xp(i,!1)}function xp(i,t){return Vt(i)?i:new yp(i,t)}class yp{constructor(t,e){this.dep=new ic,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:ut(t),this._value=e?t:Wt(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,r=this.__v_isShallow||De(t)||qi(t);t=r?t:ut(t),Vi(t,e)&&(this._rawValue=t,this._value=r?t:Wt(t),this.dep.trigger())}}function Pt(i){return Vt(i)?i.value:i}const wp={get:(i,t,e)=>t==="__v_raw"?i:Pt(Reflect.get(i,t,e)),set:(i,t,e,r)=>{const n=i[t];return Vt(n)&&!Vt(e)?(n.value=e,!0):Reflect.set(i,t,e,r)}};function T0(i){return Nr(i)?i:new Proxy(i,wp)}class bp{constructor(t,e,r){this.fn=t,this.setter=e,this._value=void 0,this.dep=new ic(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&yt!==this)return d0(this,!0),!0}get value(){const t=this.dep.track();return m0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Sp(i,t,e=!1){let r,n;return tt(i)?r=i:(r=i.get,n=i.set),new bp(r,n,e)}const Ms={},po=new WeakMap;let or;function Cp(i,t=!1,e=or){if(e){let r=po.get(e);r||po.set(e,r=[]),r.push(i)}}function Tp(i,t,e=_t){const{immediate:r,deep:n,once:s,scheduler:o,augmentJob:a,call:l}=e,c=w=>n?w:De(w)||n===!1||n===0?Oi(w,1):Oi(w);let h,u,f,d,g=!1,p=!1;if(Vt(i)?(u=()=>i.value,g=De(i)):Nr(i)?(u=()=>c(i),g=!0):Q(i)?(p=!0,g=i.some(w=>Nr(w)||De(w)),u=()=>i.map(w=>{if(Vt(w))return w.value;if(Nr(w))return c(w);if(tt(w))return l?l(w,2):w()})):tt(i)?t?u=l?()=>l(i,2):i:u=()=>{if(f){Fi();try{f()}finally{Li()}}const w=or;or=h;try{return l?l(i,3,[d]):i(d)}finally{or=w}}:u=oi,t&&n){const w=u,M=n===!0?1/0:n;u=()=>Oi(w(),M)}const x=Jg(),_=()=>{h.stop(),x&&x.active&&Zl(x.effects,h)};if(s&&t){const w=t;t=(...M)=>{w(...M),_()}}let S=p?new Array(i.length).fill(Ms):Ms;const T=w=>{if(!(!(h.flags&1)||!h.dirty&&!w))if(t){const M=h.run();if(n||g||(p?M.some((I,A)=>Vi(I,S[A])):Vi(M,S))){f&&f();const I=or;or=h;try{const A=[M,S===Ms?void 0:p&&S[0]===Ms?[]:S,d];S=M,l?l(t,3,A):t(...A)}finally{or=I}}}else h.run()};return a&&a(T),h=new u0(u),h.scheduler=o?()=>o(T,!1):T,d=w=>Cp(w,!1,h),f=h.onStop=()=>{const w=po.get(h);if(w){if(l)l(w,4);else for(const M of w)M();po.delete(h)}},t?r?T(!0):S=h.run():o?o(T.bind(null,!0),!0):h.run(),_.pause=h.pause.bind(h),_.resume=h.resume.bind(h),_.stop=_,_}function Oi(i,t=1/0,e){if(t<=0||!kt(i)||i.__v_skip||(e=e||new Map,(e.get(i)||0)>=t))return i;if(e.set(i,t),t--,Vt(i))Oi(i.value,t,e);else if(Q(i))for(let r=0;r<i.length;r++)Oi(i[r],t,e);else if(i0(i)||Hr(i))i.forEach(r=>{Oi(r,t,e)});else if(s0(i)){for(const r in i)Oi(i[r],t,e);for(const r of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,r)&&Oi(i[r],t,e)}return i}function _s(i,t,e,r){try{return r?i(...r):i()}catch(n){Vo(n,t,e)}}function gi(i,t,e,r){if(tt(i)){const n=_s(i,t,e,r);return n&&r0(n)&&n.catch(s=>{Vo(s,t,e)}),n}if(Q(i)){const n=[];for(let s=0;s<i.length;s++)n.push(gi(i[s],t,e,r));return n}}function Vo(i,t,e,r=!0){const n=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||_t;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](i,l,c)===!1)return}a=a.parent}if(s){Fi(),_s(s,null,10,[i,l,c]),Li();return}}kp(i,e,n,r,o)}function kp(i,t,e,r=!0,n=!1){if(n)throw i;console.error(i)}const qt=[];let Je=-1;const Ur=[];let Ni=null,jr=0;const k0=Promise.resolve();let mo=null;function Op(i){const t=mo||k0;return i?t.then(this?i.bind(this):i):t}function Ep(i){let t=Je+1,e=qt.length;for(;t<e;){const r=t+e>>>1,n=qt[r],s=Jn(n);s<i||s===i&&n.flags&2?t=r+1:e=r}return t}function ac(i){if(!(i.flags&1)){const t=Jn(i),e=qt[qt.length-1];!e||!(i.flags&2)&&t>=Jn(e)?qt.push(i):qt.splice(Ep(t),0,i),i.flags|=1,O0()}}function O0(){mo||(mo=k0.then(D0))}function Dp(i){Q(i)?Ur.push(...i):Ni&&i.id===-1?Ni.splice(jr+1,0,i):i.flags&1||(Ur.push(i),i.flags|=1),O0()}function th(i,t,e=Je+1){for(;e<qt.length;e++){const r=qt[e];if(r&&r.flags&2){if(i&&r.id!==i.uid)continue;qt.splice(e,1),e--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function E0(i){if(Ur.length){const t=[...new Set(Ur)].sort((e,r)=>Jn(e)-Jn(r));if(Ur.length=0,Ni){Ni.push(...t);return}for(Ni=t,jr=0;jr<Ni.length;jr++){const e=Ni[jr];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Ni=null,jr=0}}const Jn=i=>i.id==null?i.flags&2?-1:1/0:i.id;function D0(i){try{for(Je=0;Je<qt.length;Je++){const t=qt[Je];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),_s(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Je<qt.length;Je++){const t=qt[Je];t&&(t.flags&=-2)}Je=-1,qt.length=0,E0(),mo=null,(qt.length||Ur.length)&&D0()}}let Ee=null,M0=null;function _o(i){const t=Ee;return Ee=i,M0=i&&i.type.__scopeId||null,t}function Mp(i,t=Ee,e){if(!t||i._n)return i;const r=(...n)=>{r._d&&hh(-1);const s=_o(t);let o;try{o=i(...n)}finally{_o(s),r._d&&hh(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ya(i,t){if(Ee===null)return i;const e=Zo(Ee),r=i.dirs||(i.dirs=[]);for(let n=0;n<t.length;n++){let[s,o,a,l=_t]=t[n];s&&(tt(s)&&(s={mounted:s,updated:s}),s.deep&&Oi(o),r.push({dir:s,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return i}function nr(i,t,e,r){const n=i.dirs,s=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Fi(),gi(l,e,8,[i.el,a,i,t]),Li())}}const Ap=Symbol("_vte"),Pp=i=>i.__isTeleport,Fp=Symbol("_leaveCb");function lc(i,t){i.shapeFlag&6&&i.component?(i.transition=t,lc(i.component.subTree,t)):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}function sn(i,t){return tt(i)?$t({name:i.name},t,{setup:i}):i}function A0(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}const vo=new WeakMap;function jn(i,t,e,r,n=!1){if(Q(i)){i.forEach((g,p)=>jn(g,t&&(Q(t)?t[p]:t),e,r,n));return}if(Rn(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&jn(i,t,e,r.component.subTree);return}const s=r.shapeFlag&4?Zo(r.component):r.el,o=n?null:s,{i:a,r:l}=i,c=t&&t.r,h=a.refs===_t?a.refs={}:a.refs,u=a.setupState,f=ut(u),d=u===_t?e0:g=>ft(f,g);if(c!=null&&c!==l){if(eh(t),jt(c))h[c]=null,d(c)&&(u[c]=null);else if(Vt(c)){c.value=null;const g=t;g.k&&(h[g.k]=null)}}if(tt(l))_s(l,a,12,[o,h]);else{const g=jt(l),p=Vt(l);if(g||p){const x=()=>{if(i.f){const _=g?d(l)?u[l]:h[l]:l.value;if(n)Q(_)&&Zl(_,s);else if(Q(_))_.includes(s)||_.push(s);else if(g)h[l]=[s],d(l)&&(u[l]=h[l]);else{const S=[s];l.value=S,i.k&&(h[i.k]=S)}}else g?(h[l]=o,d(l)&&(u[l]=o)):p&&(l.value=o,i.k&&(h[i.k]=o))};if(o){const _=()=>{x(),vo.delete(i)};_.id=-1,vo.set(i,_),me(_,e)}else eh(i),x()}}}function eh(i){const t=vo.get(i);t&&(t.flags|=8,vo.delete(i))}Wo().requestIdleCallback;Wo().cancelIdleCallback;const Rn=i=>!!i.type.__asyncLoader,P0=i=>i.type.__isKeepAlive;function Lp(i,t){F0(i,"a",t)}function jp(i,t){F0(i,"da",t)}function F0(i,t,e=Qt){const r=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(Go(t,r,e),e){let n=e.parent;for(;n&&n.parent;)P0(n.parent.vnode)&&Rp(r,t,e,n),n=n.parent}}function Rp(i,t,e,r){const n=Go(t,i,r,!0);j0(()=>{Zl(r[t],n)},e)}function Go(i,t,e=Qt,r=!1){if(e){const n=e[i]||(e[i]=[]),s=t.__weh||(t.__weh=(...o)=>{Fi();const a=vs(e),l=gi(t,e,i,o);return a(),Li(),l});return r?n.unshift(s):n.push(s),s}}const Ri=i=>(t,e=Qt)=>{(!ts||i==="sp")&&Go(i,(...r)=>t(...r),e)},Ip=Ri("bm"),L0=Ri("m"),Bp=Ri("bu"),zp=Ri("u"),Hp=Ri("bum"),j0=Ri("um"),Np=Ri("sp"),Up=Ri("rtg"),Wp=Ri("rtc");function Yp(i,t=Qt){Go("ec",i,t)}const Xp=Symbol.for("v-ndc");function R0(i,t,e,r){let n;const s=e,o=Q(i);if(o||jt(i)){const a=o&&Nr(i);let l=!1,c=!1;a&&(l=!De(i),c=qi(i),i=Xo(i)),n=new Array(i.length);for(let h=0,u=i.length;h<u;h++)n[h]=t(l?c?go(Wt(i[h])):Wt(i[h]):i[h],h,void 0,s)}else if(typeof i=="number"){n=new Array(i);for(let a=0;a<i;a++)n[a]=t(a+1,a,void 0,s)}else if(kt(i))if(i[Symbol.iterator])n=Array.from(i,(a,l)=>t(a,l,void 0,s));else{const a=Object.keys(i);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];n[l]=t(i[h],h,l,s)}}else n=[];return n}const hl=i=>i?nf(i)?Zo(i):hl(i.parent):null,In=$t(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>hl(i.parent),$root:i=>hl(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>B0(i),$forceUpdate:i=>i.f||(i.f=()=>{ac(i.update)}),$nextTick:i=>i.n||(i.n=Op.bind(i.proxy)),$watch:i=>f2.bind(i)}),wa=(i,t)=>i!==_t&&!i.__isScriptSetup&&ft(i,t),Vp={get({_:i},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:r,data:n,props:s,accessCache:o,type:a,appContext:l}=i;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return n[t];case 4:return e[t];case 3:return s[t]}else{if(wa(r,t))return o[t]=1,r[t];if(n!==_t&&ft(n,t))return o[t]=2,n[t];if((c=i.propsOptions[0])&&ft(c,t))return o[t]=3,s[t];if(e!==_t&&ft(e,t))return o[t]=4,e[t];ul&&(o[t]=0)}}const h=In[t];let u,f;if(h)return t==="$attrs"&&Xt(i.attrs,"get",""),h(i);if((u=a.__cssModules)&&(u=u[t]))return u;if(e!==_t&&ft(e,t))return o[t]=4,e[t];if(f=l.config.globalProperties,ft(f,t))return f[t]},set({_:i},t,e){const{data:r,setupState:n,ctx:s}=i;return wa(n,t)?(n[t]=e,!0):r!==_t&&ft(r,t)?(r[t]=e,!0):ft(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(s[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:r,appContext:n,propsOptions:s,type:o}},a){let l,c;return!!(e[a]||i!==_t&&a[0]!=="$"&&ft(i,a)||wa(t,a)||(l=s[0])&&ft(l,a)||ft(r,a)||ft(In,a)||ft(n.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:ft(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function ih(i){return Q(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let ul=!0;function Gp(i){const t=B0(i),e=i.proxy,r=i.ctx;ul=!1,t.beforeCreate&&rh(t.beforeCreate,i,"bc");const{data:n,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:f,beforeUpdate:d,updated:g,activated:p,deactivated:x,beforeDestroy:_,beforeUnmount:S,destroyed:T,unmounted:w,render:M,renderTracked:I,renderTriggered:A,errorCaptured:j,serverPrefetch:H,expose:N,inheritAttrs:V,components:et,directives:nt,filters:J}=t;if(c&&$p(c,r,null),o)for(const k in o){const O=o[k];tt(O)&&(r[k]=O.bind(e))}if(n){const k=n.call(e,e);kt(k)&&(i.data=nc(k))}if(ul=!0,s)for(const k in s){const O=s[k],$=tt(O)?O.bind(e,e):tt(O.get)?O.get.bind(e,e):oi,W=!tt(O)&&tt(O.set)?O.set.bind(e):oi,it=j2({get:$,set:W});Object.defineProperty(r,k,{enumerable:!0,configurable:!0,get:()=>it.value,set:ot=>it.value=ot})}if(a)for(const k in a)I0(a[k],r,e,k);if(l){const k=tt(l)?l.call(e):l;Reflect.ownKeys(k).forEach(O=>{H0(O,k[O])})}h&&rh(h,i,"c");function D(k,O){Q(O)?O.forEach($=>k($.bind(e))):O&&k(O.bind(e))}if(D(Ip,u),D(L0,f),D(Bp,d),D(zp,g),D(Lp,p),D(jp,x),D(Yp,j),D(Wp,I),D(Up,A),D(Hp,S),D(j0,w),D(Np,H),Q(N))if(N.length){const k=i.exposed||(i.exposed={});N.forEach(O=>{Object.defineProperty(k,O,{get:()=>e[O],set:$=>e[O]=$,enumerable:!0})})}else i.exposed||(i.exposed={});M&&i.render===oi&&(i.render=M),V!=null&&(i.inheritAttrs=V),et&&(i.components=et),nt&&(i.directives=nt),H&&A0(i)}function $p(i,t,e=oi){Q(i)&&(i=fl(i));for(const r in i){const n=i[r];let s;kt(n)?"default"in n?s=Ai(n.from||r,n.default,!0):s=Ai(n.from||r):s=Ai(n),Vt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function rh(i,t,e){gi(Q(i)?i.map(r=>r.bind(t.proxy)):i.bind(t.proxy),t,e)}function I0(i,t,e,r){let n=r.includes(".")?q0(e,r):()=>e[r];if(jt(i)){const s=t[i];tt(s)&&Sa(n,s)}else if(tt(i))Sa(n,i.bind(e));else if(kt(i))if(Q(i))i.forEach(s=>I0(s,t,e,r));else{const s=tt(i.handler)?i.handler.bind(e):t[i.handler];tt(s)&&Sa(n,s,i)}}function B0(i){const t=i.type,{mixins:e,extends:r}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=i.appContext,a=s.get(t);let l;return a?l=a:!n.length&&!e&&!r?l=t:(l={},n.length&&n.forEach(c=>xo(l,c,o,!0)),xo(l,t,o)),kt(t)&&s.set(t,l),l}function xo(i,t,e,r=!1){const{mixins:n,extends:s}=t;s&&xo(i,s,e,!0),n&&n.forEach(o=>xo(i,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const a=Kp[o]||e&&e[o];i[o]=a?a(i[o],t[o]):t[o]}return i}const Kp={data:nh,props:sh,emits:sh,methods:Cn,computed:Cn,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:Cn,directives:Cn,watch:qp,provide:nh,inject:Zp};function nh(i,t){return t?i?function(){return $t(tt(i)?i.call(this,this):i,tt(t)?t.call(this,this):t)}:t:i}function Zp(i,t){return Cn(fl(i),fl(t))}function fl(i){if(Q(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function Kt(i,t){return i?[...new Set([].concat(i,t))]:t}function Cn(i,t){return i?$t(Object.create(null),i,t):t}function sh(i,t){return i?Q(i)&&Q(t)?[...new Set([...i,...t])]:$t(Object.create(null),ih(i),ih(t??{})):t}function qp(i,t){if(!i)return t;if(!t)return i;const e=$t(Object.create(null),i);for(const r in t)e[r]=Kt(i[r],t[r]);return e}function z0(){return{app:null,config:{isNativeTag:e0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jp=0;function Qp(i,t){return function(r,n=null){tt(r)||(r=$t({},r)),n!=null&&!kt(n)&&(n=null);const s=z0(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:Jp++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:R2,get config(){return s.config},set config(h){},use(h,...u){return o.has(h)||(h&&tt(h.install)?(o.add(h),h.install(c,...u)):tt(h)&&(o.add(h),h(c,...u))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,u){return u?(s.components[h]=u,c):s.components[h]},directive(h,u){return u?(s.directives[h]=u,c):s.directives[h]},mount(h,u,f){if(!l){const d=c._ceVNode||Te(r,n);return d.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),i(d,h,f),l=!0,c._container=h,h.__vue_app__=c,Zo(d.component)}},onUnmount(h){a.push(h)},unmount(){l&&(gi(a,c._instance,16),i(null,c._container),delete c._container.__vue_app__)},provide(h,u){return s.provides[h]=u,c},runWithContext(h){const u=Wr;Wr=c;try{return h()}finally{Wr=u}}};return c}}let Wr=null;function H0(i,t){if(Qt){let e=Qt.provides;const r=Qt.parent&&Qt.parent.provides;r===e&&(e=Qt.provides=Object.create(r)),e[i]=t}}function Ai(i,t,e=!1){const r=D2();if(r||Wr){let n=Wr?Wr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&i in n)return n[i];if(arguments.length>1)return e&&tt(t)?t.call(r&&r.proxy):t}}const N0={},U0=()=>Object.create(N0),W0=i=>Object.getPrototypeOf(i)===N0;function t2(i,t,e,r=!1){const n={},s=U0();i.propsDefaults=Object.create(null),Y0(i,t,n,s);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=r?n:_p(n):i.type.props?i.props=n:i.props=s,i.attrs=s}function e2(i,t,e,r){const{props:n,attrs:s,vnode:{patchFlag:o}}=i,a=ut(n),[l]=i.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=i.vnode.dynamicProps;for(let u=0;u<h.length;u++){let f=h[u];if($o(i.emitsOptions,f))continue;const d=t[f];if(l)if(ft(s,f))d!==s[f]&&(s[f]=d,c=!0);else{const g=Zi(f);n[g]=dl(l,a,g,d,i,!1)}else d!==s[f]&&(s[f]=d,c=!0)}}}else{Y0(i,t,n,s)&&(c=!0);let h;for(const u in a)(!t||!ft(t,u)&&((h=Sr(u))===u||!ft(t,h)))&&(l?e&&(e[u]!==void 0||e[h]!==void 0)&&(n[u]=dl(l,a,u,void 0,i,!0)):delete n[u]);if(s!==a)for(const u in s)(!t||!ft(t,u))&&(delete s[u],c=!0)}c&&ki(i.attrs,"set","")}function Y0(i,t,e,r){const[n,s]=i.propsOptions;let o=!1,a;if(t)for(let l in t){if(Pn(l))continue;const c=t[l];let h;n&&ft(n,h=Zi(l))?!s||!s.includes(h)?e[h]=c:(a||(a={}))[h]=c:$o(i.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=ut(e),c=a||_t;for(let h=0;h<s.length;h++){const u=s[h];e[u]=dl(n,l,u,c[u],i,!ft(c,u))}}return o}function dl(i,t,e,r,n,s){const o=i[e];if(o!=null){const a=ft(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&tt(l)){const{propsDefaults:c}=n;if(e in c)r=c[e];else{const h=vs(n);r=c[e]=l.call(null,t),h()}}else r=l;n.ce&&n.ce._setProp(e,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Sr(e))&&(r=!0))}return r}const i2=new WeakMap;function X0(i,t,e=!1){const r=e?i2:t.propsCache,n=r.get(i);if(n)return n;const s=i.props,o={},a=[];let l=!1;if(!tt(i)){const h=u=>{l=!0;const[f,d]=X0(u,t,!0);$t(o,f),d&&a.push(...d)};!e&&t.mixins.length&&t.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}if(!s&&!l)return kt(i)&&r.set(i,zr),zr;if(Q(s))for(let h=0;h<s.length;h++){const u=Zi(s[h]);oh(u)&&(o[u]=_t)}else if(s)for(const h in s){const u=Zi(h);if(oh(u)){const f=s[h],d=o[u]=Q(f)||tt(f)?{type:f}:$t({},f),g=d.type;let p=!1,x=!0;if(Q(g))for(let _=0;_<g.length;++_){const S=g[_],T=tt(S)&&S.name;if(T==="Boolean"){p=!0;break}else T==="String"&&(x=!1)}else p=tt(g)&&g.name==="Boolean";d[0]=p,d[1]=x,(p||ft(d,"default"))&&a.push(u)}}const c=[o,a];return kt(i)&&r.set(i,c),c}function oh(i){return i[0]!=="$"&&!Pn(i)}const cc=i=>i==="_"||i==="_ctx"||i==="$stable",hc=i=>Q(i)?i.map(ti):[ti(i)],r2=(i,t,e)=>{if(t._n)return t;const r=Mp((...n)=>hc(t(...n)),e);return r._c=!1,r},V0=(i,t,e)=>{const r=i._ctx;for(const n in i){if(cc(n))continue;const s=i[n];if(tt(s))t[n]=r2(n,s,r);else if(s!=null){const o=hc(s);t[n]=()=>o}}},G0=(i,t)=>{const e=hc(t);i.slots.default=()=>e},$0=(i,t,e)=>{for(const r in t)(e||!cc(r))&&(i[r]=t[r])},n2=(i,t,e)=>{const r=i.slots=U0();if(i.vnode.shapeFlag&32){const n=t._;n?($0(r,t,e),e&&a0(r,"_",n,!0)):V0(t,r)}else t&&G0(i,t)},s2=(i,t,e)=>{const{vnode:r,slots:n}=i;let s=!0,o=_t;if(r.shapeFlag&32){const a=t._;a?e&&a===1?s=!1:$0(n,t,e):(s=!t.$stable,V0(t,n)),o=t}else t&&(G0(i,t),o={default:1});if(s)for(const a in n)!cc(a)&&o[a]==null&&delete n[a]},me=y2;function o2(i){return a2(i)}function a2(i,t){const e=Wo();e.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:f,setScopeId:d=oi,insertStaticContent:g}=i,p=(m,b,E,R=null,P=null,F=null,U=void 0,z=null,B=!!b.dynamicChildren)=>{if(m===b)return;m&&!vn(m,b)&&(R=zt(m),ot(m,P,F,!0),m=null),b.patchFlag===-2&&(B=!1,b.dynamicChildren=null);const{type:L,ref:Z,shapeFlag:Y}=b;switch(L){case Ko:x(m,b,E,R);break;case Gr:_(m,b,E,R);break;case Ca:m==null&&S(b,E,R,U);break;case je:et(m,b,E,R,P,F,U,z,B);break;default:Y&1?M(m,b,E,R,P,F,U,z,B):Y&6?nt(m,b,E,R,P,F,U,z,B):(Y&64||Y&128)&&L.process(m,b,E,R,P,F,U,z,B,re)}Z!=null&&P?jn(Z,m&&m.ref,F,b||m,!b):Z==null&&m&&m.ref!=null&&jn(m.ref,null,F,m,!0)},x=(m,b,E,R)=>{if(m==null)r(b.el=a(b.children),E,R);else{const P=b.el=m.el;b.children!==m.children&&c(P,b.children)}},_=(m,b,E,R)=>{m==null?r(b.el=l(b.children||""),E,R):b.el=m.el},S=(m,b,E,R)=>{[m.el,m.anchor]=g(m.children,b,E,R,m.el,m.anchor)},T=({el:m,anchor:b},E,R)=>{let P;for(;m&&m!==b;)P=f(m),r(m,E,R),m=P;r(b,E,R)},w=({el:m,anchor:b})=>{let E;for(;m&&m!==b;)E=f(m),n(m),m=E;n(b)},M=(m,b,E,R,P,F,U,z,B)=>{if(b.type==="svg"?U="svg":b.type==="math"&&(U="mathml"),m==null)I(b,E,R,P,F,U,z,B);else{const L=m.el&&m.el._isVueCE?m.el:null;try{L&&L._beginPatch(),H(m,b,P,F,U,z,B)}finally{L&&L._endPatch()}}},I=(m,b,E,R,P,F,U,z)=>{let B,L;const{props:Z,shapeFlag:Y,transition:K,dirs:q}=m;if(B=m.el=o(m.type,F,Z&&Z.is,Z),Y&8?h(B,m.children):Y&16&&j(m.children,B,null,R,P,ba(m,F),U,z),q&&nr(m,null,R,"created"),A(B,m,m.scopeId,U,R),Z){for(const xt in Z)xt!=="value"&&!Pn(xt)&&s(B,xt,null,Z[xt],F,R);"value"in Z&&s(B,"value",null,Z.value,F),(L=Z.onVnodeBeforeMount)&&Ke(L,R,m)}q&&nr(m,null,R,"beforeMount");const at=l2(P,K);at&&K.beforeEnter(B),r(B,b,E),((L=Z&&Z.onVnodeMounted)||at||q)&&me(()=>{L&&Ke(L,R,m),at&&K.enter(B),q&&nr(m,null,R,"mounted")},P)},A=(m,b,E,R,P)=>{if(E&&d(m,E),R)for(let F=0;F<R.length;F++)d(m,R[F]);if(P){let F=P.subTree;if(b===F||Q0(F.type)&&(F.ssContent===b||F.ssFallback===b)){const U=P.vnode;A(m,U,U.scopeId,U.slotScopeIds,P.parent)}}},j=(m,b,E,R,P,F,U,z,B=0)=>{for(let L=B;L<m.length;L++){const Z=m[L]=z?Ui(m[L]):ti(m[L]);p(null,Z,b,E,R,P,F,U,z)}},H=(m,b,E,R,P,F,U)=>{const z=b.el=m.el;let{patchFlag:B,dynamicChildren:L,dirs:Z}=b;B|=m.patchFlag&16;const Y=m.props||_t,K=b.props||_t;let q;if(E&&sr(E,!1),(q=K.onVnodeBeforeUpdate)&&Ke(q,E,b,m),Z&&nr(b,m,E,"beforeUpdate"),E&&sr(E,!0),(Y.innerHTML&&K.innerHTML==null||Y.textContent&&K.textContent==null)&&h(z,""),L?N(m.dynamicChildren,L,z,E,R,ba(b,P),F):U||O(m,b,z,null,E,R,ba(b,P),F,!1),B>0){if(B&16)V(z,Y,K,E,P);else if(B&2&&Y.class!==K.class&&s(z,"class",null,K.class,P),B&4&&s(z,"style",Y.style,K.style,P),B&8){const at=b.dynamicProps;for(let xt=0;xt<at.length;xt++){const pt=at[xt],ne=Y[pt],se=K[pt];(se!==ne||pt==="value")&&s(z,pt,ne,se,P,E)}}B&1&&m.children!==b.children&&h(z,b.children)}else!U&&L==null&&V(z,Y,K,E,P);((q=K.onVnodeUpdated)||Z)&&me(()=>{q&&Ke(q,E,b,m),Z&&nr(b,m,E,"updated")},R)},N=(m,b,E,R,P,F,U)=>{for(let z=0;z<b.length;z++){const B=m[z],L=b[z],Z=B.el&&(B.type===je||!vn(B,L)||B.shapeFlag&198)?u(B.el):E;p(B,L,Z,null,R,P,F,U,!0)}},V=(m,b,E,R,P)=>{if(b!==E){if(b!==_t)for(const F in b)!Pn(F)&&!(F in E)&&s(m,F,b[F],null,P,R);for(const F in E){if(Pn(F))continue;const U=E[F],z=b[F];U!==z&&F!=="value"&&s(m,F,z,U,P,R)}"value"in E&&s(m,"value",b.value,E.value,P)}},et=(m,b,E,R,P,F,U,z,B)=>{const L=b.el=m?m.el:a(""),Z=b.anchor=m?m.anchor:a("");let{patchFlag:Y,dynamicChildren:K,slotScopeIds:q}=b;q&&(z=z?z.concat(q):q),m==null?(r(L,E,R),r(Z,E,R),j(b.children||[],E,Z,P,F,U,z,B)):Y>0&&Y&64&&K&&m.dynamicChildren?(N(m.dynamicChildren,K,E,P,F,U,z),(b.key!=null||P&&b===P.subTree)&&K0(m,b,!0)):O(m,b,E,Z,P,F,U,z,B)},nt=(m,b,E,R,P,F,U,z,B)=>{b.slotScopeIds=z,m==null?b.shapeFlag&512?P.ctx.activate(b,E,R,U,B):J(b,E,R,P,F,U,B):gt(m,b,B)},J=(m,b,E,R,P,F,U)=>{const z=m.component=E2(m,R,P);if(P0(m)&&(z.ctx.renderer=re),M2(z,!1,U),z.asyncDep){if(P&&P.registerDep(z,D,U),!m.el){const B=z.subTree=Te(Gr);_(null,B,b,E),m.placeholder=B.el}}else D(z,m,b,E,P,F,U)},gt=(m,b,E)=>{const R=b.component=m.component;if(v2(m,b,E))if(R.asyncDep&&!R.asyncResolved){k(R,b,E);return}else R.next=b,R.update();else b.el=m.el,R.vnode=b},D=(m,b,E,R,P,F,U)=>{const z=()=>{if(m.isMounted){let{next:Y,bu:K,u:q,parent:at,vnode:xt}=m;{const Ge=Z0(m);if(Ge){Y&&(Y.el=xt.el,k(m,Y,U)),Ge.asyncDep.then(()=>{m.isUnmounted||z()});return}}let pt=Y,ne;sr(m,!1),Y?(Y.el=xt.el,k(m,Y,U)):Y=xt,K&&pa(K),(ne=Y.props&&Y.props.onVnodeBeforeUpdate)&&Ke(ne,at,Y,xt),sr(m,!0);const se=lh(m),Ve=m.subTree;m.subTree=se,p(Ve,se,u(Ve.el),zt(Ve),m,P,F),Y.el=se.el,pt===null&&x2(m,se.el),q&&me(q,P),(ne=Y.props&&Y.props.onVnodeUpdated)&&me(()=>Ke(ne,at,Y,xt),P)}else{let Y;const{el:K,props:q}=b,{bm:at,m:xt,parent:pt,root:ne,type:se}=m,Ve=Rn(b);sr(m,!1),at&&pa(at),!Ve&&(Y=q&&q.onVnodeBeforeMount)&&Ke(Y,pt,b),sr(m,!0);{ne.ce&&ne.ce._def.shadowRoot!==!1&&ne.ce._injectChildStyle(se);const Ge=m.subTree=lh(m);p(null,Ge,E,R,m,P,F),b.el=Ge.el}if(xt&&me(xt,P),!Ve&&(Y=q&&q.onVnodeMounted)){const Ge=b;me(()=>Ke(Y,pt,Ge),P)}(b.shapeFlag&256||pt&&Rn(pt.vnode)&&pt.vnode.shapeFlag&256)&&m.a&&me(m.a,P),m.isMounted=!0,b=E=R=null}};m.scope.on();const B=m.effect=new u0(z);m.scope.off();const L=m.update=B.run.bind(B),Z=m.job=B.runIfDirty.bind(B);Z.i=m,Z.id=m.uid,B.scheduler=()=>ac(Z),sr(m,!0),L()},k=(m,b,E)=>{b.component=m;const R=m.vnode.props;m.vnode=b,m.next=null,e2(m,b.props,R,E),s2(m,b.children,E),Fi(),th(m),Li()},O=(m,b,E,R,P,F,U,z,B=!1)=>{const L=m&&m.children,Z=m?m.shapeFlag:0,Y=b.children,{patchFlag:K,shapeFlag:q}=b;if(K>0){if(K&128){W(L,Y,E,R,P,F,U,z,B);return}else if(K&256){$(L,Y,E,R,P,F,U,z,B);return}}q&8?(Z&16&&Rt(L,P,F),Y!==L&&h(E,Y)):Z&16?q&16?W(L,Y,E,R,P,F,U,z,B):Rt(L,P,F,!0):(Z&8&&h(E,""),q&16&&j(Y,E,R,P,F,U,z,B))},$=(m,b,E,R,P,F,U,z,B)=>{m=m||zr,b=b||zr;const L=m.length,Z=b.length,Y=Math.min(L,Z);let K;for(K=0;K<Y;K++){const q=b[K]=B?Ui(b[K]):ti(b[K]);p(m[K],q,E,null,P,F,U,z,B)}L>Z?Rt(m,P,F,!0,!1,Y):j(b,E,R,P,F,U,z,B,Y)},W=(m,b,E,R,P,F,U,z,B)=>{let L=0;const Z=b.length;let Y=m.length-1,K=Z-1;for(;L<=Y&&L<=K;){const q=m[L],at=b[L]=B?Ui(b[L]):ti(b[L]);if(vn(q,at))p(q,at,E,null,P,F,U,z,B);else break;L++}for(;L<=Y&&L<=K;){const q=m[Y],at=b[K]=B?Ui(b[K]):ti(b[K]);if(vn(q,at))p(q,at,E,null,P,F,U,z,B);else break;Y--,K--}if(L>Y){if(L<=K){const q=K+1,at=q<Z?b[q].el:R;for(;L<=K;)p(null,b[L]=B?Ui(b[L]):ti(b[L]),E,at,P,F,U,z,B),L++}}else if(L>K)for(;L<=Y;)ot(m[L],P,F,!0),L++;else{const q=L,at=L,xt=new Map;for(L=at;L<=K;L++){const ge=b[L]=B?Ui(b[L]):ti(b[L]);ge.key!=null&&xt.set(ge.key,L)}let pt,ne=0;const se=K-at+1;let Ve=!1,Ge=0;const mn=new Array(se);for(L=0;L<se;L++)mn[L]=0;for(L=q;L<=Y;L++){const ge=m[L];if(ne>=se){ot(ge,P,F,!0);continue}let $e;if(ge.key!=null)$e=xt.get(ge.key);else for(pt=at;pt<=K;pt++)if(mn[pt-at]===0&&vn(ge,b[pt])){$e=pt;break}$e===void 0?ot(ge,P,F,!0):(mn[$e-at]=L+1,$e>=Ge?Ge=$e:Ve=!0,p(ge,b[$e],E,null,P,F,U,z,B),ne++)}const $c=Ve?c2(mn):zr;for(pt=$c.length-1,L=se-1;L>=0;L--){const ge=at+L,$e=b[ge],Kc=b[ge+1],Zc=ge+1<Z?Kc.el||Kc.placeholder:R;mn[L]===0?p(null,$e,E,Zc,P,F,U,z,B):Ve&&(pt<0||L!==$c[pt]?it($e,E,Zc,2):pt--)}}},it=(m,b,E,R,P=null)=>{const{el:F,type:U,transition:z,children:B,shapeFlag:L}=m;if(L&6){it(m.component.subTree,b,E,R);return}if(L&128){m.suspense.move(b,E,R);return}if(L&64){U.move(m,b,E,re);return}if(U===je){r(F,b,E);for(let Y=0;Y<B.length;Y++)it(B[Y],b,E,R);r(m.anchor,b,E);return}if(U===Ca){T(m,b,E);return}if(R!==2&&L&1&&z)if(R===0)z.beforeEnter(F),r(F,b,E),me(()=>z.enter(F),P);else{const{leave:Y,delayLeave:K,afterLeave:q}=z,at=()=>{m.ctx.isUnmounted?n(F):r(F,b,E)},xt=()=>{F._isLeaving&&F[Fp](!0),Y(F,()=>{at(),q&&q()})};K?K(F,at,xt):xt()}else r(F,b,E)},ot=(m,b,E,R=!1,P=!1)=>{const{type:F,props:U,ref:z,children:B,dynamicChildren:L,shapeFlag:Z,patchFlag:Y,dirs:K,cacheIndex:q}=m;if(Y===-2&&(P=!1),z!=null&&(Fi(),jn(z,null,E,m,!0),Li()),q!=null&&(b.renderCache[q]=void 0),Z&256){b.ctx.deactivate(m);return}const at=Z&1&&K,xt=!Rn(m);let pt;if(xt&&(pt=U&&U.onVnodeBeforeUnmount)&&Ke(pt,b,m),Z&6)de(m.component,E,R);else{if(Z&128){m.suspense.unmount(E,R);return}at&&nr(m,null,b,"beforeUnmount"),Z&64?m.type.remove(m,b,E,re,R):L&&!L.hasOnce&&(F!==je||Y>0&&Y&64)?Rt(L,b,E,!1,!0):(F===je&&Y&384||!P&&Z&16)&&Rt(B,b,E),R&&Dt(m)}(xt&&(pt=U&&U.onVnodeUnmounted)||at)&&me(()=>{pt&&Ke(pt,b,m),at&&nr(m,null,b,"unmounted")},E)},Dt=m=>{const{type:b,el:E,anchor:R,transition:P}=m;if(b===je){St(E,R);return}if(b===Ca){w(m);return}const F=()=>{n(E),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(m.shapeFlag&1&&P&&!P.persisted){const{leave:U,delayLeave:z}=P,B=()=>U(E,F);z?z(m.el,F,B):B()}else F()},St=(m,b)=>{let E;for(;m!==b;)E=f(m),n(m),m=E;n(b)},de=(m,b,E)=>{const{bum:R,scope:P,job:F,subTree:U,um:z,m:B,a:L}=m;ah(B),ah(L),R&&pa(R),P.stop(),F&&(F.flags|=8,ot(U,m,b,E)),z&&me(z,b),me(()=>{m.isUnmounted=!0},b)},Rt=(m,b,E,R=!1,P=!1,F=0)=>{for(let U=F;U<m.length;U++)ot(m[U],b,E,R,P)},zt=m=>{if(m.shapeFlag&6)return zt(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const b=f(m.anchor||m.el),E=b&&b[Ap];return E?f(E):b};let pn=!1;const Dr=(m,b,E)=>{m==null?b._vnode&&ot(b._vnode,null,null,!0):p(b._vnode||null,m,b,null,null,null,E),b._vnode=m,pn||(pn=!0,th(),E0(),pn=!1)},re={p,um:ot,m:it,r:Dt,mt:J,mc:j,pc:O,pbc:N,n:zt,o:i};return{render:Dr,hydrate:void 0,createApp:Qp(Dr)}}function ba({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function sr({effect:i,job:t},e){e?(i.flags|=32,t.flags|=4):(i.flags&=-33,t.flags&=-5)}function l2(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function K0(i,t,e=!1){const r=i.children,n=t.children;if(Q(r)&&Q(n))for(let s=0;s<r.length;s++){const o=r[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=Ui(n[s]),a.el=o.el),!e&&a.patchFlag!==-2&&K0(o,a)),a.type===Ko&&a.patchFlag!==-1&&(a.el=o.el),a.type===Gr&&!a.el&&(a.el=o.el)}}function c2(i){const t=i.slice(),e=[0];let r,n,s,o,a;const l=i.length;for(r=0;r<l;r++){const c=i[r];if(c!==0){if(n=e[e.length-1],i[n]<c){t[r]=n,e.push(r);continue}for(s=0,o=e.length-1;s<o;)a=s+o>>1,i[e[a]]<c?s=a+1:o=a;c<i[e[s]]&&(s>0&&(t[r]=e[s-1]),e[s]=r)}}for(s=e.length,o=e[s-1];s-- >0;)e[s]=o,o=t[o];return e}function Z0(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Z0(t)}function ah(i){if(i)for(let t=0;t<i.length;t++)i[t].flags|=8}const h2=Symbol.for("v-scx"),u2=()=>Ai(h2);function uc(i,t){return fc(i,null,t)}function Sa(i,t,e){return fc(i,t,e)}function fc(i,t,e=_t){const{immediate:r,deep:n,flush:s,once:o}=e,a=$t({},e),l=t&&r||!t&&s!=="post";let c;if(ts){if(s==="sync"){const d=u2();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=oi,d.resume=oi,d.pause=oi,d}}const h=Qt;a.call=(d,g,p)=>gi(d,h,g,p);let u=!1;s==="post"?a.scheduler=d=>{me(d,h&&h.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(d,g)=>{g?d():ac(d)}),a.augmentJob=d=>{t&&(d.flags|=4),u&&(d.flags|=2,h&&(d.id=h.uid,d.i=h))};const f=Tp(i,t,a);return ts&&(c?c.push(f):l&&f()),f}function f2(i,t,e){const r=this.proxy,n=jt(i)?i.includes(".")?q0(r,i):()=>r[i]:i.bind(r,r);let s;tt(t)?s=t:(s=t.handler,e=t);const o=vs(this),a=fc(n,s.bind(r),e);return o(),a}function q0(i,t){const e=t.split(".");return()=>{let r=i;for(let n=0;n<e.length&&r;n++)r=r[e[n]];return r}}const d2=(i,t)=>t==="modelValue"||t==="model-value"?i.modelModifiers:i[`${t}Modifiers`]||i[`${Zi(t)}Modifiers`]||i[`${Sr(t)}Modifiers`];function g2(i,t,...e){if(i.isUnmounted)return;const r=i.vnode.props||_t;let n=e;const s=t.startsWith("update:"),o=s&&d2(r,t.slice(7));o&&(o.trim&&(n=e.map(h=>jt(h)?h.trim():h)),o.number&&(n=e.map(Yg)));let a,l=r[a=ga(t)]||r[a=ga(Zi(t))];!l&&s&&(l=r[a=ga(Sr(t))]),l&&gi(l,i,6,n);const c=r[a+"Once"];if(c){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,gi(c,i,6,n)}}const p2=new WeakMap;function J0(i,t,e=!1){const r=e?p2:t.emitsCache,n=r.get(i);if(n!==void 0)return n;const s=i.emits;let o={},a=!1;if(!tt(i)){const l=c=>{const h=J0(c,t,!0);h&&(a=!0,$t(o,h))};!e&&t.mixins.length&&t.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!s&&!a?(kt(i)&&r.set(i,null),null):(Q(s)?s.forEach(l=>o[l]=null):$t(o,s),kt(i)&&r.set(i,o),o)}function $o(i,t){return!i||!Ho(t)?!1:(t=t.slice(2).replace(/Once$/,""),ft(i,t[0].toLowerCase()+t.slice(1))||ft(i,Sr(t))||ft(i,t))}function lh(i){const{type:t,vnode:e,proxy:r,withProxy:n,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:u,data:f,setupState:d,ctx:g,inheritAttrs:p}=i,x=_o(i);let _,S;try{if(e.shapeFlag&4){const w=n||r,M=w;_=ti(c.call(M,w,h,u,d,f,g)),S=a}else{const w=t;_=ti(w.length>1?w(u,{attrs:a,slots:o,emit:l}):w(u,null)),S=t.props?a:m2(a)}}catch(w){Bn.length=0,Vo(w,i,1),_=Te(Gr)}let T=_;if(S&&p!==!1){const w=Object.keys(S),{shapeFlag:M}=T;w.length&&M&7&&(s&&w.some(Kl)&&(S=_2(S,s)),T=$r(T,S,!1,!0))}return e.dirs&&(T=$r(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&lc(T,e.transition),_=T,_o(x),_}const m2=i=>{let t;for(const e in i)(e==="class"||e==="style"||Ho(e))&&((t||(t={}))[e]=i[e]);return t},_2=(i,t)=>{const e={};for(const r in i)(!Kl(r)||!(r.slice(9)in t))&&(e[r]=i[r]);return e};function v2(i,t,e){const{props:r,children:n,component:s}=i,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return r?ch(r,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let u=0;u<h.length;u++){const f=h[u];if(o[f]!==r[f]&&!$o(c,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ch(r,o,c):!0:!!o;return!1}function ch(i,t,e){const r=Object.keys(t);if(r.length!==Object.keys(i).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(t[s]!==i[s]&&!$o(e,s))return!0}return!1}function x2({vnode:i,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===i&&(r.el=i.el),r===i)(i=t.vnode).el=e,t=t.parent;else break}}const Q0=i=>i.__isSuspense;function y2(i,t){t&&t.pendingBranch?Q(i)?t.effects.push(...i):t.effects.push(i):Dp(i)}const je=Symbol.for("v-fgt"),Ko=Symbol.for("v-txt"),Gr=Symbol.for("v-cmt"),Ca=Symbol.for("v-stc"),Bn=[];let ve=null;function ai(i=!1){Bn.push(ve=i?null:[])}function w2(){Bn.pop(),ve=Bn[Bn.length-1]||null}let Qn=1;function hh(i,t=!1){Qn+=i,i<0&&ve&&t&&(ve.hasOnce=!0)}function b2(i){return i.dynamicChildren=Qn>0?ve||zr:null,w2(),Qn>0&&ve&&ve.push(i),i}function li(i,t,e,r,n,s){return b2(G(i,t,e,r,n,s,!0))}function tf(i){return i?i.__v_isVNode===!0:!1}function vn(i,t){return i.type===t.type&&i.key===t.key}const ef=({key:i})=>i??null,lo=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?jt(i)||Vt(i)||tt(i)?{i:Ee,r:i,k:t,f:!!e}:i:null);function G(i,t=null,e=null,r=0,n=null,s=i===je?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&ef(t),ref:t&&lo(t),scopeId:M0,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ee};return a?(dc(l,e),s&128&&i.normalize(l)):e&&(l.shapeFlag|=jt(e)?8:16),Qn>0&&!o&&ve&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ve.push(l),l}const Te=S2;function S2(i,t=null,e=null,r=0,n=null,s=!1){if((!i||i===Xp)&&(i=Gr),tf(i)){const a=$r(i,t,!0);return e&&dc(a,e),Qn>0&&!s&&ve&&(a.shapeFlag&6?ve[ve.indexOf(i)]=a:ve.push(a)),a.patchFlag=-2,a}if(L2(i)&&(i=i.__vccOpts),t){t=C2(t);let{class:a,style:l}=t;a&&!jt(a)&&(t.class=Yo(a)),kt(l)&&(oc(l)&&!Q(l)&&(l=$t({},l)),t.style=Jl(l))}const o=jt(i)?1:Q0(i)?128:Pp(i)?64:kt(i)?4:tt(i)?2:0;return G(i,t,e,r,n,o,s,!0)}function C2(i){return i?oc(i)||W0(i)?$t({},i):i:null}function $r(i,t,e=!1,r=!1){const{props:n,ref:s,patchFlag:o,children:a,transition:l}=i,c=t?T2(n||{},t):n,h={__v_isVNode:!0,__v_skip:!0,type:i.type,props:c,key:c&&ef(c),ref:t&&t.ref?e&&s?Q(s)?s.concat(lo(t)):[s,lo(t)]:lo(t):s,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:a,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==je?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:l,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&$r(i.ssContent),ssFallback:i.ssFallback&&$r(i.ssFallback),placeholder:i.placeholder,el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return l&&r&&lc(h,l.clone(h)),h}function rf(i=" ",t=0){return Te(Ko,null,i,t)}function ti(i){return i==null||typeof i=="boolean"?Te(Gr):Q(i)?Te(je,null,i.slice()):tf(i)?Ui(i):Te(Ko,null,String(i))}function Ui(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:$r(i)}function dc(i,t){let e=0;const{shapeFlag:r}=i;if(t==null)t=null;else if(Q(t))e=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),dc(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!W0(t)?t._ctx=Ee:n===3&&Ee&&(Ee.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else tt(t)?(t={default:t,_ctx:Ee},e=32):(t=String(t),r&64?(e=16,t=[rf(t)]):e=8);i.children=t,i.shapeFlag|=e}function T2(...i){const t={};for(let e=0;e<i.length;e++){const r=i[e];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=Yo([t.class,r.class]));else if(n==="style")t.style=Jl([t.style,r.style]);else if(Ho(n)){const s=t[n],o=r[n];o&&s!==o&&!(Q(s)&&s.includes(o))&&(t[n]=s?[].concat(s,o):o)}else n!==""&&(t[n]=r[n])}return t}function Ke(i,t,e,r=null){gi(i,t,7,[e,r])}const k2=z0();let O2=0;function E2(i,t,e){const r=i.type,n=(t?t.appContext:i.appContext)||k2,s={uid:O2++,vnode:i,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:X0(r,n),emitsOptions:J0(r,n),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:r.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=g2.bind(null,s),i.ce&&i.ce(s),s}let Qt=null;const D2=()=>Qt||Ee;let yo,gl;{const i=Wo(),t=(e,r)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(r),s=>{n.length>1?n.forEach(o=>o(s)):n[0](s)}};yo=t("__VUE_INSTANCE_SETTERS__",e=>Qt=e),gl=t("__VUE_SSR_SETTERS__",e=>ts=e)}const vs=i=>{const t=Qt;return yo(i),i.scope.on(),()=>{i.scope.off(),yo(t)}},uh=()=>{Qt&&Qt.scope.off(),yo(null)};function nf(i){return i.vnode.shapeFlag&4}let ts=!1;function M2(i,t=!1,e=!1){t&&gl(t);const{props:r,children:n}=i.vnode,s=nf(i);t2(i,r,s,t),n2(i,n,e||t);const o=s?A2(i,t):void 0;return t&&gl(!1),o}function A2(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,Vp);const{setup:r}=e;if(r){Fi();const n=i.setupContext=r.length>1?F2(i):null,s=vs(i),o=_s(r,i,0,[i.props,n]),a=r0(o);if(Li(),s(),(a||i.sp)&&!Rn(i)&&A0(i),a){if(o.then(uh,uh),t)return o.then(l=>{fh(i,l)}).catch(l=>{Vo(l,i,0)});i.asyncDep=o}else fh(i,o)}else sf(i)}function fh(i,t,e){tt(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:kt(t)&&(i.setupState=T0(t)),sf(i)}function sf(i,t,e){const r=i.type;i.render||(i.render=r.render||oi);{const n=vs(i);Fi();try{Gp(i)}finally{Li(),n()}}}const P2={get(i,t){return Xt(i,"get",""),i[t]}};function F2(i){const t=e=>{i.exposed=e||{}};return{attrs:new Proxy(i.attrs,P2),slots:i.slots,emit:i.emit,expose:t}}function Zo(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(T0(vp(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in In)return In[e](i)},has(t,e){return e in t||e in In}})):i.proxy}function L2(i){return tt(i)&&"__vccOpts"in i}const j2=(i,t)=>Sp(i,t,ts),R2="3.5.24";let pl;const dh=typeof window<"u"&&window.trustedTypes;if(dh)try{pl=dh.createPolicy("vue",{createHTML:i=>i})}catch{}const of=pl?i=>pl.createHTML(i):i=>i,I2="http://www.w3.org/2000/svg",B2="http://www.w3.org/1998/Math/MathML",bi=typeof document<"u"?document:null,gh=bi&&bi.createElement("template"),z2={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,r)=>{const n=t==="svg"?bi.createElementNS(I2,i):t==="mathml"?bi.createElementNS(B2,i):e?bi.createElement(i,{is:e}):bi.createElement(i);return i==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:i=>bi.createTextNode(i),createComment:i=>bi.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>bi.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,r,n,s){const o=e?e.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===s||!(n=n.nextSibling)););else{gh.innerHTML=of(r==="svg"?`<svg>${i}</svg>`:r==="mathml"?`<math>${i}</math>`:i);const a=gh.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},H2=Symbol("_vtc");function N2(i,t,e){const r=i[H2];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const wo=Symbol("_vod"),af=Symbol("_vsh"),Ta={name:"show",beforeMount(i,{value:t},{transition:e}){i[wo]=i.style.display==="none"?"":i.style.display,e&&t?e.beforeEnter(i):xn(i,t)},mounted(i,{value:t},{transition:e}){e&&t&&e.enter(i)},updated(i,{value:t,oldValue:e},{transition:r}){!t!=!e&&(r?t?(r.beforeEnter(i),xn(i,!0),r.enter(i)):r.leave(i,()=>{xn(i,!1)}):xn(i,t))},beforeUnmount(i,{value:t}){xn(i,t)}};function xn(i,t){i.style.display=t?i[wo]:"none",i[af]=!t}const U2=Symbol(""),W2=/(?:^|;)\s*display\s*:/;function Y2(i,t,e){const r=i.style,n=jt(e);let s=!1;if(e&&!n){if(t)if(jt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&co(r,a,"")}else for(const o in t)e[o]==null&&co(r,o,"");for(const o in e)o==="display"&&(s=!0),co(r,o,e[o])}else if(n){if(t!==e){const o=r[U2];o&&(e+=";"+o),r.cssText=e,s=W2.test(e)}}else t&&i.removeAttribute("style");wo in i&&(i[wo]=s?r.display:"",i[af]&&(r.display="none"))}const ph=/\s*!important$/;function co(i,t,e){if(Q(e))e.forEach(r=>co(i,t,r));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const r=X2(i,t);ph.test(e)?i.setProperty(Sr(r),e.replace(ph,""),"important"):i[r]=e}}const mh=["Webkit","Moz","ms"],ka={};function X2(i,t){const e=ka[t];if(e)return e;let r=Zi(t);if(r!=="filter"&&r in i)return ka[t]=r;r=o0(r);for(let n=0;n<mh.length;n++){const s=mh[n]+r;if(s in i)return ka[t]=s}return t}const _h="http://www.w3.org/1999/xlink";function vh(i,t,e,r,n,s=Zg(t)){r&&t.startsWith("xlink:")?e==null?i.removeAttributeNS(_h,t.slice(6,t.length)):i.setAttributeNS(_h,t,e):e==null||s&&!l0(e)?i.removeAttribute(t):i.setAttribute(t,s?"":er(e)?String(e):e)}function xh(i,t,e,r,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(i[t]=t==="innerHTML"?of(e):e);return}const s=i.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?i.getAttribute("value")||"":i.value,l=e==null?i.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in i))&&(i.value=l),e==null&&i.removeAttribute(t),i._value=e;return}let o=!1;if(e===""||e==null){const a=typeof i[t];a==="boolean"?e=l0(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{i[t]=e}catch{}o&&i.removeAttribute(n||t)}function V2(i,t,e,r){i.addEventListener(t,e,r)}function G2(i,t,e,r){i.removeEventListener(t,e,r)}const yh=Symbol("_vei");function $2(i,t,e,r,n=null){const s=i[yh]||(i[yh]={}),o=s[t];if(r&&o)o.value=r;else{const[a,l]=K2(t);if(r){const c=s[t]=J2(r,n);V2(i,a,c,l)}else o&&(G2(i,a,o,l),s[t]=void 0)}}const wh=/(?:Once|Passive|Capture)$/;function K2(i){let t;if(wh.test(i)){t={};let r;for(;r=i.match(wh);)i=i.slice(0,i.length-r[0].length),t[r[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Sr(i.slice(2)),t]}let Oa=0;const Z2=Promise.resolve(),q2=()=>Oa||(Z2.then(()=>Oa=0),Oa=Date.now());function J2(i,t){const e=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=e.attached)return;gi(Q2(r,e.value),t,5,[r])};return e.value=i,e.attached=q2(),e}function Q2(i,t){if(Q(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const bh=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,tm=(i,t,e,r,n,s)=>{const o=n==="svg";t==="class"?N2(i,r,o):t==="style"?Y2(i,e,r):Ho(t)?Kl(t)||$2(i,t,e,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):em(i,t,r,o))?(xh(i,t,r),!i.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&vh(i,t,r,o,s,t!=="value")):i._isVueCE&&(/[A-Z]/.test(t)||!jt(r))?xh(i,Zi(t),r,s,t):(t==="true-value"?i._trueValue=r:t==="false-value"&&(i._falseValue=r),vh(i,t,r,o))};function em(i,t,e,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in i&&bh(t)&&tt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&i.tagName==="IFRAME"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return bh(t)&&jt(e)?!1:t in i}const im=$t({patchProp:tm},z2);let Sh;function rm(){return Sh||(Sh=o2(im))}const nm=((...i)=>{const t=rm().createApp(...i),{mount:e}=t;return t.mount=r=>{const n=om(r);if(!n)return;const s=t._component;!tt(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,sm(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t});function sm(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function om(i){return jt(i)?document.querySelector(i):i}const am="/interactive-whiteboard/assets/image1-BIkJUYZd.jpeg",lm="/interactive-whiteboard/assets/image2-D776x9j2.jpeg",cm="/interactive-whiteboard/assets/image3-ByJESR36.jpeg",hm="/interactive-whiteboard/assets/image4-BtY7Mmzr.jpeg",um="/interactive-whiteboard/assets/image5-5-obd1RQ.jpeg",fm="/interactive-whiteboard/assets/image6-0bGEQ3gP.jpeg";function v(i,t,e){return(t=(function(r){var n=(function(s,o){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var l=a.call(s,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)})(r,"string");return typeof n=="symbol"?n:n+""})(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Ch(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable}))),e.push.apply(e,r)}return e}function y(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ch(Object(e),!0).forEach((function(r){v(i,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Ch(Object(e)).forEach((function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))}))}return i}function bt(i,t){if(i==null)return{};var e,r,n=(function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l})(i,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(i,e)&&(n[e]=i[e])}return n}function vi(i,t){return t||(t=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(t)}}))}class Th{constructor(){v(this,"browserShadowBlurConstant",1),v(this,"DPI",96),v(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),v(this,"perfLimitSizeTotal",2097152),v(this,"maxCacheSideLimit",4096),v(this,"minCacheSideLimit",256),v(this,"disableStyleCopyPaste",!1),v(this,"enableGLFiltering",!0),v(this,"textureSize",4096),v(this,"forceGLPutImageData",!1),v(this,"cachesBoundsOfCurve",!1),v(this,"fontPaths",{}),v(this,"NUM_FRACTION_DIGITS",4)}}const lt=new class extends Th{constructor(i){super(),this.configure(i)}configure(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,i)}addFonts(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=y(y({},this.fontPaths),i)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach((i=>{delete this.fontPaths[i]}))}clearFonts(){this.fontPaths={}}restoreDefaults(i){const t=new Th,e=i?.reduce(((r,n)=>(r[n]=t[n],r)),{})||t;this.configure(e)}},Ji=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return console[i]("fabric",...e)};class si extends Error{constructor(t,e){super("fabric: ".concat(t),e)}}class lf extends si{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class dm{}class gm extends dm{testPrecision(t,e){const r="precision ".concat(e,` float;
void main(){}`),n=t.createShader(t.FRAGMENT_SHADER);return!!n&&(t.shaderSource(n,r),t.compileShader(n),!!t.getShaderParameter(n,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((r=>this.testPrecision(e,r))),e.getExtension("WEBGL_lose_context").loseContext(),Ji("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const pm={};let kh;const pi=()=>kh||(kh={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new gm,dispose(){},copyPasteData:pm}),on=()=>pi().document,xs=()=>pi().window,cf=()=>{var i;return Math.max((i=lt.devicePixelRatio)!==null&&i!==void 0?i:xs().devicePixelRatio,1)},zn=new class{constructor(){v(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(i){let{fontFamily:t,fontStyle:e,fontWeight:r}=i;t=t.toLowerCase();const n=this.charWidthsCache;n.has(t)||n.set(t,new Map);const s=n.get(t),o="".concat(e.toLowerCase(),"_").concat((r+"").toLowerCase());return s.has(o)||s.set(o,new Map),s.get(o)}clearFontCache(i){i?this.charWidthsCache.delete((i||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(i){const{perfLimitSizeTotal:t}=lt,e=Math.sqrt(t*i);return[Math.floor(e),Math.floor(t/e)]}},ml="6.9.0";function mr(){}const Qi=Math.PI/2,ji=2*Math.PI,gc=Math.PI/180,ee=Object.freeze([1,0,0,1,0,0]),pc=16,zi=.4477152502,rt="center",dt="left",he="top",_l="bottom",Ft="right",ue="none",mc=/\r?\n/,hf="moving",qo="scaling",uf="rotating",_c="rotate",ff="skewing",es="resizing",df="modifyPoly",mm="modifyPath",bo="changed",Jo="scale",ie="scaleX",we="scaleY",an="skewX",ln="skewY",It="fill",fe="stroke",So="modified",Ar="json",Ea="svg",X=new class{constructor(){this[Ar]=new Map,this[Ea]=new Map}has(i){return this[Ar].has(i)}getClass(i){const t=this[Ar].get(i);if(!t)throw new si("No class registered for ".concat(i));return t}setClass(i,t){t?this[Ar].set(t,i):(this[Ar].set(i.type,i),this[Ar].set(i.type.toLowerCase(),i))}getSVGClass(i){return this[Ea].get(i)}setSVGClass(i,t){this[Ea].set(t??i.type.toLowerCase(),i)}},Co=new class extends Array{remove(i){const t=this.indexOf(i);t>-1&&this.splice(t,1)}cancelAll(){const i=this.splice(0);return i.forEach((t=>t.abort())),i}cancelByCanvas(i){if(!i)return[];const t=this.filter((e=>{var r;return e.target===i||typeof e.target=="object"&&((r=e.target)===null||r===void 0?void 0:r.canvas)===i}));return t.forEach((e=>e.abort())),t}cancelByTarget(i){if(!i)return[];const t=this.filter((e=>e.target===i));return t.forEach((e=>e.abort())),t}};class _m{constructor(){v(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach((r=>{let[n,s]=r;this.on(n,s)})),()=>this.off(t);if(e){const r=t;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(e),()=>this.off(r,e)}return()=>!1}once(t,e){if(typeof t=="object"){const r=[];return Object.entries(t).forEach((n=>{let[s,o]=n;r.push(this.once(s,o))})),()=>r.forEach((n=>n()))}if(e){const r=this.on(t,(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];e.call(this,...s),r()}));return r}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const r=this.__eventListeners[t],n=r.indexOf(e);n>-1&&r.splice(n,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof t=="object"?Object.entries(t).forEach((r=>{let[n,s]=r;this._removeEventListener(n,s)})):this._removeEventListener(t,e)}fire(t,e){var r;if(!this.__eventListeners)return;const n=(r=this.__eventListeners[t])===null||r===void 0?void 0:r.concat();if(n)for(let s=0;s<n.length;s++)n[s].call(this,e||{})}}const ar=(i,t)=>{const e=i.indexOf(t);return e!==-1&&i.splice(e,1),i},Ye=i=>{if(i===0)return 1;switch(Math.abs(i)/Qi){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},Xe=i=>{if(i===0)return 0;const t=i/Qi,e=Math.sign(i);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(i)};class C{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new C(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new C(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new C(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new C(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new C(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new C(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new C(this.x/t.x,this.y/t.y)}scalarDivide(t){return new C(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new C(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}midPointFrom(t){return this.lerp(t)}min(t){return new C(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new C(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,r=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=r}clone(){return new C(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vc;const r=Xe(t),n=Ye(t),s=this.subtract(e);return new C(s.x*n-s.y*r,s.x*r+s.y*n).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new C(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const vc=new C(0,0),ho=i=>!!i&&Array.isArray(i._objects);function gf(i){class t extends i{constructor(){super(...arguments),v(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];const o=this._objects.push(...n);return n.forEach((a=>this._onObjectAdded(a))),o}insertAt(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return this._objects.splice(r,0,...s),s.forEach((a=>this._onObjectAdded(a))),this._objects.length}remove(){const r=this._objects,n=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach((l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),n.push(l),this._onObjectRemoved(l))})),n}forEachObject(r){this.getObjects().forEach(((n,s,o)=>r(n,s,o)))}getObjects(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return n.length===0?[...this._objects]:this._objects.filter((o=>o.isType(...n)))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,n){return!!this._objects.includes(r)||!!n&&this._objects.some((s=>s instanceof t&&s.contains(r,!0)))}complexity(){return this._objects.reduce(((r,n)=>r+=n.complexity?n.complexity():0),0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(ar(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(ar(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,n){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const o=this.findNewLowerIndex(r,s,n);return ar(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,n){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(r,s,n);return ar(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,n){return r!==this._objects[n]&&(ar(this._objects,r),this._objects.splice(n,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,n,s){let o;if(s){o=n;for(let a=n-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=n-1;return o}findNewUpperIndex(r,n,s){let o;if(s){o=n;for(let a=n+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=n+1;return o}collectObjects(r){let{left:n,top:s,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],h=new C(n,s),u=h.add(new C(o,a));for(let f=this._objects.length-1;f>=0;f--){const d=this._objects[f];d.selectable&&d.visible&&(l&&d.intersectsWithRect(h,u)||d.isContainedWithinRect(h,u)||l&&d.containsPoint(h)||l&&d.containsPoint(u))&&c.push(d)}return c}}return t}class pf extends _m{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Hn(i){return xs().requestAnimationFrame(i)}function mf(i){return xs().cancelAnimationFrame(i)}let vm=0;const tr=()=>vm++,mi=()=>{const i=on().createElement("canvas");if(!i||i.getContext===void 0)throw new si("Failed to create `canvas` element");return i},_f=()=>on().createElement("img"),be=i=>{const t=mi();return t.width=i.width,t.height=i.height,t},xc=(i,t,e)=>i.toDataURL("image/".concat(t),e),yc=(i,t,e)=>new Promise(((r,n)=>{i.toBlob(r,"image/".concat(t),e)})),Mt=i=>i*gc,_i=i=>i/gc,vf=i=>i.every(((t,e)=>t===ee[e])),Yt=(i,t,e)=>new C(i).transform(t,e),xe=i=>{const t=1/(i[0]*i[3]-i[1]*i[2]),e=[t*i[3],-t*i[1],-t*i[2],t*i[0],0,0],{x:r,y:n}=new C(i[4],i[5]).transform(e,!0);return e[4]=-r,e[5]=-n,e},At=(i,t,e)=>[i[0]*t[0]+i[2]*t[1],i[1]*t[0]+i[3]*t[1],i[0]*t[2]+i[2]*t[3],i[1]*t[2]+i[3]*t[3],e?0:i[0]*t[4]+i[2]*t[5]+i[4],e?0:i[1]*t[4]+i[3]*t[5]+i[5]],Qo=(i,t)=>i.reduceRight(((e,r)=>r&&e?At(r,e,t):r||e),void 0)||ee.concat(),xf=i=>{let[t,e]=i;return Math.atan2(e,t)},Kr=i=>{const t=xf(i),e=Math.pow(i[0],2)+Math.pow(i[1],2),r=Math.sqrt(e),n=(i[0]*i[3]-i[2]*i[1])/r,s=Math.atan2(i[0]*i[2]+i[1]*i[3],e);return{angle:_i(t),scaleX:r,scaleY:n,skewX:_i(s),skewY:0,translateX:i[4]||0,translateY:i[5]||0}},cn=function(i){return[1,0,0,1,i,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Cr(){let{angle:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Mt(i),n=Ye(r),s=Xe(r);return[n,s,-s,n,t?t-(n*t-s*e):0,e?e-(s*t+n*e):0]}const ta=function(i){return[i,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,0,0]},yf=i=>Math.tan(Mt(i)),wc=i=>[1,0,yf(i),1,0,0],bc=i=>[1,yf(i),0,1,0,0],ys=i=>{let{scaleX:t=1,scaleY:e=1,flipX:r=!1,flipY:n=!1,skewX:s=0,skewY:o=0}=i,a=ta(r?-t:t,n?-e:e);return s&&(a=At(a,wc(s),!0)),o&&(a=At(a,bc(o),!0)),a},wf=i=>{const{translateX:t=0,translateY:e=0,angle:r=0}=i;let n=cn(t,e);r&&(n=At(n,Cr({angle:r})));const s=ys(i);return vf(s)||(n=At(n,s)),n},Nn=function(i){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((function(r,n){if(t&&t.aborted)return n(new lf("loadImage"));const s=_f();let o;t&&(o=function(l){s.src="",n(l)},t.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&t?.removeEventListener("abort",o),r(s)};i?(s.onload=a,s.onerror=function(){o&&t?.removeEventListener("abort",o),n(new si("Error loading ".concat(s.src)))},e&&(s.crossOrigin=e),s.src=i):a()}))},Zr=function(i){let{signal:t,reviver:e=mr}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((r,n)=>{const s=[];t&&t.addEventListener("abort",n,{once:!0}),Promise.all(i.map((o=>X.getClass(o.type).fromObject(o,{signal:t}).then((a=>(e(o,a),s.push(a),a)))))).then(r).catch((o=>{s.forEach((a=>{a.dispose&&a.dispose()})),n(o)})).finally((()=>{t&&t.removeEventListener("abort",n)}))}))},ws=function(i){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((e,r)=>{const n=[];t&&t.addEventListener("abort",r,{once:!0});const s=Object.values(i).map((a=>a&&a.type&&X.has(a.type)?Zr([a],{signal:t}).then((l=>{let[c]=l;return n.push(c),c})):a)),o=Object.keys(i);Promise.all(s).then((a=>a.reduce(((l,c,h)=>(l[o[h]]=c,l)),{}))).then(e).catch((a=>{n.forEach((l=>{l.dispose&&l.dispose()})),r(a)})).finally((()=>{t&&t.removeEventListener("abort",r)}))}))},Tr=function(i){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce(((t,e)=>(e in i&&(t[e]=i[e]),t)),{})},Sc=(i,t)=>Object.keys(i).reduce(((e,r)=>(t(i[r],r,i)&&(e[r]=i[r]),e)),{}),vt=(i,t)=>parseFloat(Number(i).toFixed(t)),qr=i=>"matrix("+i.map((t=>vt(t,lt.NUM_FRACTION_DIGITS))).join(" ")+")",ke=i=>!!i&&i.toLive!==void 0,Oh=i=>!!i&&typeof i.toObject=="function",Eh=i=>!!i&&i.offsetX!==void 0&&"source"in i,lr=i=>!!i&&"multiSelectionStacking"in i;function bf(i){const t=i&&Be(i);let e=0,r=0;if(!i||!t)return{left:e,top:r};let n=i;const s=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;n&&(n.parentNode||n.host)&&(n=n.parentNode||n.host,n===t?(e=o.scrollLeft||s.scrollLeft||0,r=o.scrollTop||s.scrollTop||0):(e+=n.scrollLeft||0,r+=n.scrollTop||0),n.nodeType!==1||n.style.position!=="fixed"););return{left:e,top:r}}const Be=i=>i.ownerDocument||null,Sf=i=>{var t;return((t=i.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},Cf=function(i,t,e){let{width:r,height:n}=e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;i.width=r,i.height=n,s>1&&(i.setAttribute("width",(r*s).toString()),i.setAttribute("height",(n*s).toString()),t.scale(s,s))},vl=(i,t)=>{let{width:e,height:r}=t;e&&(i.style.width=typeof e=="number"?"".concat(e,"px"):e),r&&(i.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Dh(i){return i.onselectstart!==void 0&&(i.onselectstart=()=>!1),i.style.userSelect=ue,i}class Tf{constructor(t){v(this,"_originalCanvasStyle",void 0),v(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(r=t)&&r.getContext!==void 0?t:t&&on().getElementById(t)||mi();var r;if(e.hasAttribute("data-fabric"))throw new si("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:r}=t;const{el:n}=this.lower;n.classList.remove("lower-canvas"),n.removeAttribute("data-fabric"),n.setAttribute("width","".concat(e)),n.setAttribute("height","".concat(r)),n.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:r,ctx:n}=this.lower;Cf(r,n,t,e)}setCSSDimensions(t){vl(this.lower.el,t)}calcOffset(){return(function(t){var e;const r=t&&Be(t),n={left:0,top:0};if(!r)return n;const s=((e=Sf(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};n.left+=parseInt(s.borderLeftWidth,10)||0,n.top+=parseInt(s.borderTopWidth,10)||0,n.left+=parseInt(s.paddingLeft,10)||0,n.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;t.getBoundingClientRect!==void 0&&(o=t.getBoundingClientRect());const l=bf(t);return{left:o.left+l.left-(a.clientLeft||0)+n.left,top:o.top+l.top-(a.clientTop||0)+n.top}})(this.lower.el)}dispose(){pi().dispose(this.lower.el),delete this.lower}}const xm={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...ee]},ym=["objects"];class hn extends gf(pf){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return hn.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new Tf(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const s=super.insertAt(t,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(Ji("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?cf():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const n=y({width:this.width,height:this.height},t);this.elements.setDimensions(n,this.getRetinaScaling()),this.hasLostContext=!0,this.width=n.width,this.height=n.height}r||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const r=t,n=[...this.viewportTransform],s=Yt(t,xe(n));n[0]=e,n[3]=e;const o=Yt(s,n);n[4]+=r.x-o.x,n[5]+=r.y-o.y,this.setViewportTransform(n)}setZoom(t){this.zoomToPoint(new C(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new C(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Hn((()=>this.renderAndReset())))}calcViewportBoundaries(){const t=this.width,e=this.height,r=xe(this.viewportTransform),n=Yt({x:0,y:0},r),s=Yt({x:t,y:e},r),o=n.min(s),a=n.max(s);return this.vptCoords={tl:o,tr:new C(a.x,o.y),bl:new C(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(mf(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const r=this.viewportTransform,n=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),n&&(n._set("canvas",this),n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,n)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const r=this.viewportTransform;t.save(),t.transform(...r),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let r=0,n=e.length;r<n;++r)e[r]&&e[r].render(t)}_renderBackgroundOrOverlay(t,e){const r=this["".concat(e,"Color")],n=this["".concat(e,"Image")],s=this.viewportTransform,o=this["".concat(e,"Vpt")];if(!r&&!n)return;const a=ke(r);if(r){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=a?r.toLive(t):r,o&&t.transform(...s),a){t.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&t.transform(...l)}t.fill(),t.restore()}if(n){t.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&t.transform(...s),n.render(t),this.skipOffscreen=l,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new C(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new C(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new C(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new C(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new C(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Yt(this.getCenterPoint(),xe(this.viewportTransform))}_centerObject(t,e){t.setXY(e,rt,rt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const r=this.clipPath,n=r&&!r.excludeFromExport?this._toObject(r,t,e):null;return y(y(y({version:ml},Tr(this,e)),{},{objects:this._objects.filter((s=>!s.excludeFromExport)).map((s=>this._toObject(s,t,e)))},this.__serializeBgOverlay(t,e)),n?{clipPath:n}:null)}_toObject(t,e,r){let n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);const s=t[e](r);return this.includeDefaultValues||(t.includeDefaultValues=!!n),s}__serializeBgOverlay(t,e){const r={},n=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return ke(o)?o.excludeFromExport||(r.background=o.toObject(e)):o&&(r.background=o),ke(a)?a.excludeFromExport||(r.overlay=a.toObject(e)):a&&(r.overlay=a),n&&!n.excludeFromExport&&(r.backgroundImage=this._toObject(n,t,e)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,t,e)),r}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const r=[];return this._setSVGPreamble(r,t),this._setSVGHeader(r,t),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",e),this._setSVGObjects(r,e),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",e),r.push("</svg>"),r.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const r=e.width||"".concat(this.width),n=e.height||"".concat(this.height),s=lt.NUM_FRACTION_DIGITS,o=e.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(vt(-l[4]/l[0],s)," ").concat(vt(-l[5]/l[3],s)," ").concat(vt(this.width/l[0],s)," ").concat(vt(this.height/l[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',n,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",ml,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(tr()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map((t=>{const e=this["".concat(t,"Color")];if(ke(e)){const r=this["".concat(t,"Vpt")],n=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?n[0]:1),height:this.height/(r?n[3]:1)};return e.toSVG(s,{additionalTransform:r?qr(n):""})}})).join("")}createSVGFontFacesMarkup(){const t=[],e={},r=lt.fontPaths;this._objects.forEach((function s(o){t.push(o),ho(o)&&o._objects.forEach(s)})),t.forEach((s=>{if(!(o=s)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=s;!e[l]&&r[l]&&(e[l]=!0,a&&Object.values(a).forEach((c=>{Object.values(c).forEach((h=>{let{fontFamily:u=""}=h;!e[u]&&r[u]&&(e[u]=!0)}))})))}));const n=Object.keys(e).map((s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`))).join("");return n?`	<style type="text/css"><![CDATA[
`.concat(n,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject((r=>{r.excludeFromExport||this._setSVGObject(t,r,e)}))}_setSVGObject(t,e,r){t.push(e.toSVG(r))}_setSVGBgOverlayImage(t,e,r){const n=this[e];n&&!n.excludeFromExport&&n.toSVG&&t.push(n.toSVG(r))}_setSVGBgOverlayColor(t,e){const r=this["".concat(e,"Color")];if(r)if(ke(r)){const n=r.repeat||"",s=this.width,o=this.height,a=this["".concat(e,"Vpt")]?qr(xe(this.viewportTransform)):"";t.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(o/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(n!=="repeat-y"&&n!=="no-repeat"||!Eh(r)?s:r.source.width,'" height="').concat(n!=="repeat-x"&&n!=="no-repeat"||!Eh(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new si("`json` is undefined"));const n=typeof t=="string"?JSON.parse(t):t,{objects:s=[]}=n,o=bt(n,ym),{backgroundImage:a,background:l,overlayImage:c,overlay:h,clipPath:u}=o,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Zr(s,{reviver:e,signal:r}),ws({backgroundImage:a,backgroundColor:l,overlayImage:c,overlayColor:h,clipPath:u},{signal:r})]).then((d=>{let[g,p]=d;return this.clear(),this.add(...g),this.set(o),this.set(p),this.renderOnAddRemove=f,this}))}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=be(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:r=1,multiplier:n=1,enableRetinaScaling:s=!1}=t,o=n*(s?this.getRetinaScaling():1);return xc(this.toCanvasElement(o,t),e,r)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:r=1,multiplier:n=1,enableRetinaScaling:s=!1}=t,o=n*(s?this.getRetinaScaling():1);return yc(this.toCanvasElement(o,t),e,r)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:r,left:n,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(e||this.width)*t,l=(r||this.height)*t,c=this.getZoom(),h=this.width,u=this.height,f=this.skipControlsDrawing,d=c*t,g=this.viewportTransform,p=[d,0,0,d,(g[4]-(n||0))*t,(g[5]-(s||0))*t],x=this.enableRetinaScaling,_=be({width:a,height:l}),S=o?this._objects.filter((T=>o(T))):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=p,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(_.getContext("2d"),S),this.viewportTransform=g,this.width=h,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=x,this.skipControlsDrawing=f,_}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Co.cancelByCanvas(this),this.disposed=!0,new Promise(((t,e)=>{const r=()=>{this.destroy(),t(!0)};r.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=r:r()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((t=>t.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}v(hn,"ownDefaults",xm);const wm=["touchstart","touchmove","touchend"],kf=i=>{const t=bf(i.target),e=(function(r){const n=r.changedTouches;return n&&n[0]?n[0]:r})(i);return new C(e.clientX+t.left,e.clientY+t.top)},To=i=>wm.includes(i.type)||i.pointerType==="touch",Mh=i=>{i.preventDefault(),i.stopPropagation()},ci=i=>{let t=0,e=0,r=0,n=0;for(let s=0,o=i.length;s<o;s++){const{x:a,y:l}=i[s];(a>r||!s)&&(r=a),(a<t||!s)&&(t=a),(l>n||!s)&&(n=l),(l<e||!s)&&(e=l)}return{left:t,top:e,width:r-t,height:n-e}},bm=["translateX","translateY","scaleX","scaleY"],Of=(i,t)=>Jr(i,At(t,i.calcOwnMatrix())),Jr=(i,t)=>{const e=Kr(t),{translateX:r,translateY:n,scaleX:s,scaleY:o}=e,a=bt(e,bm),l=new C(r,n);i.flipX=!1,i.flipY=!1,Object.assign(i,a),i.set({scaleX:s,scaleY:o}),i.setPositionByOrigin(l,rt,rt)},Ef=i=>{i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},Cc=i=>({scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}),ea=(i,t,e)=>{const r=i/2,n=t/2,s=[new C(-r,-n),new C(r,-n),new C(-r,n),new C(r,n)].map((a=>a.transform(e))),o=ci(s);return new C(o.width,o.height)},bs=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ee;return At(xe(arguments.length>1&&arguments[1]!==void 0?arguments[1]:ee),i)},Pi=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ee,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ee;return i.transform(bs(t,e))},Df=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ee,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ee;return i.transform(bs(t,e),!0)},xl=(i,t,e)=>{const r=bs(t,e);return Jr(i,At(r,i.calcOwnMatrix())),r},Tc=(i,t)=>{var e;const{transform:{target:r}}=t;(e=r.canvas)===null||e===void 0||e.fire("object:".concat(i),y(y({},t),{},{target:r})),r.fire(i,t)},Sm={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Lt=i=>typeof i=="string"?Sm[i]:i-.5,ko="not-allowed";function Mf(i){return Lt(i.originX)===Lt(rt)&&Lt(i.originY)===Lt(rt)}function Ah(i){return .5-Lt(i)}const Ue=(i,t)=>i[t],kc=(i,t,e,r)=>({e:i,transform:t,pointer:new C(e,r)});function Af(i,t){const e=i.getTotalAngle()+_i(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function ia(i,t,e,r,n){var s;let{target:o,corner:a}=i;const l=o.controls[a],c=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,h=o.padding/c,u=(function(f,d,g,p){const x=f.getRelativeCenterPoint(),_=g!==void 0&&p!==void 0?f.translateToGivenOrigin(x,rt,rt,g,p):new C(f.left,f.top);return(f.angle?d.rotate(-Mt(f.angle),x):d).subtract(_)})(o,new C(r,n),t,e);return u.x>=h&&(u.x-=h),u.x<=-h&&(u.x+=h),u.y>=h&&(u.y-=h),u.y<=h&&(u.y+=h),u.x-=l.offsetX,u.y-=l.offsetY,u}const Pf=(i,t,e,r)=>{const{target:n,offsetX:s,offsetY:o}=t,a=e-s,l=r-o,c=!Ue(n,"lockMovementX")&&n.left!==a,h=!Ue(n,"lockMovementY")&&n.top!==l;return c&&n.set(dt,a),h&&n.set(he,l),(c||h)&&Tc(hf,kc(i,t,e,r)),c||h},Oo=i=>i.replace(/\s+/g," "),Ph={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Da=(i,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+(t-i)*(2/3-e)*6:i),Fh=(i,t,e,r)=>{i/=255,t/=255,e/=255;const n=Math.max(i,t,e),s=Math.min(i,t,e);let o,a;const l=(n+s)/2;if(n===s)o=a=0;else{const c=n-s;switch(a=l>.5?c/(2-n-s):c/(n+s),n){case i:o=(t-e)/c+(t<e?6:0);break;case t:o=(e-i)/c+2;break;case e:o=(i-t)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},Lh=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(i)/(i.endsWith("%")?100:1)},As=i=>Math.min(Math.round(i),255).toString(16).toUpperCase().padStart(2,"0"),jh=i=>{let[t,e,r,n=1]=i;const s=Math.round(.3*t+.59*e+.11*r);return[s,s,s,n]};class ct{constructor(t){if(v(this,"isUnrecognised",!1),t)if(t instanceof ct)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,r,n,s=1]=t;this.setSource([e,r,n,s])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in Ph&&(t=Ph[t]),t==="transparent"?[255,255,255,0]:ct.sourceFromHex(t)||ct.sourceFromRgb(t)||ct.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,r]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,r]=Fh(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(r,"%)")}toHsla(){const[t,e,r,n]=Fh(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(r,"%,").concat(n,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,r,n]=this.getSource();return"".concat(As(t)).concat(As(e)).concat(As(r)).concat(As(Math.round(255*n)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(jh(this.getSource())),this}toBlackWhite(t){const[e,,,r]=jh(this.getSource()),n=e<(t||127)?0:255;return this.setSource([n,n,n,r]),this}overlayWith(t){t instanceof ct||(t=new ct(t));const e=this.getSource(),r=t.getSource(),[n,s,o]=e.map(((a,l)=>Math.round(.5*a+.5*r[l])));return this.setSource([n,s,o,e[3]]),this}static fromRgb(t){return ct.fromRgba(t)}static fromRgba(t){return new ct(ct.sourceFromRgb(t))}static sourceFromRgb(t){const e=Oo(t).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(e){const[r,n,s]=e.slice(1,4).map((o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a}));return[r,n,s,Lh(e[4])]}}static fromHsl(t){return ct.fromHsla(t)}static fromHsla(t){return new ct(ct.sourceFromHsl(t))}static sourceFromHsl(t){const e=Oo(t).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!e)return;const r=(ct.parseAngletoDegrees(e[1])%360+360)%360/360,n=parseFloat(e[2])/100,s=parseFloat(e[3])/100;let o,a,l;if(n===0)o=a=l=s;else{const c=s<=.5?s*(n+1):s+n-s*n,h=2*s-c;o=Da(h,c,r+1/3),a=Da(h,c,r),l=Da(h,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),Lh(e[4])]}static fromHex(t){return new ct(ct.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let r;r=e.length<=4?e.split("").map((l=>l+l)):e.match(/.{2}/g);const[n,s,o,a=255]=r.map((l=>parseInt(l,16)));return[n,s,o,a/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),r=parseFloat(e);return e.includes("rad")?_i(r):e.includes("turn")?360*r:r}}const _r=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pc;const e=/\D{0,2}$/.exec(i),r=parseFloat(i),n=lt.DPI;switch(e?.[0]){case"mm":return r*n/25.4;case"cm":return r*n/2.54;case"in":return r*n;case"pt":return r*n/72;case"pc":return r*n/72*12;case"em":return r*t;default:return r}},Ff=i=>{const[t,e]=i.trim().split(" "),[r,n]=(s=t)&&s!==ue?[s.slice(1,4),s.slice(5,8)]:s===ue?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:e||"meet",alignX:r,alignY:n}},is=function(i,t){let e,r,n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const s=new ct(t),o=s.getAlpha();e=s.toRgb(),o!==1&&(r=o.toString())}else e="none";return n?"".concat(i,": ").concat(e,"; ").concat(r?"".concat(i,"-opacity: ").concat(r,"; "):""):"".concat(i,'="').concat(e,'" ').concat(r?"".concat(i,'-opacity="').concat(r,'" '):"")};class Lf{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):ue,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",h=this.visible?"":" visibility: hidden;",u=t?"":this.getSvgFilter(),f=is(It,this.fill);return[is(fe,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",f,"fill-rule: ",e,"; ","opacity: ",c,";",u,h].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'.concat(qr(r));return"".concat(n).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=t.indexOf("COMMON_PARTS");return t[s]=n,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:r,withShadow:n,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=e?"":'style="'.concat(this.getSvgStyles(),'" '),a=n?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,u=this.stroke,f=this.fill,d=this.shadow,g=[],p=t.indexOf("COMMON_PARTS");let x;l&&(l.clipPathId="CLIPPATH_".concat(tr()),x='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),h&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),h?"":a+this.getSvgCommons(),` >
`);const _=[o,c,e?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return t[p]=_,ke(f)&&g.push(f.toSVG(this)),ke(u)&&g.push(u.toSVG(this)),d&&g.push(d.toSVG(this)),l&&g.push(x),g.push(t.join("")),g.push(`</g>
`),h&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==It?' paint-order="'.concat(this.paintFirst,'" '):""}}function ra(i){return new RegExp("^("+i.join("|")+")\\b","i")}const vr="textDecorationThickness",jf=["fontSize","fontWeight","fontFamily","fontStyle"],Rf=["underline","overline","linethrough"],If=[...jf,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Bf=[...If,...Rf,"textBackgroundColor","direction",vr],Cm=[...jf,...Rf,fe,"strokeWidth",It,"deltaY","textBackgroundColor",vr],Tm={_reNewline:mc,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:dt,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:dt,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[vr]:66.667},ri="justify",Eo="justify-left",Un="justify-right",Wn="justify-center";var Rh,Ih,Bh;const ze=String.raw(Rh||(Rh=vi(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Ma=String.raw(Ih||(Ih=vi(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),km=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+ze+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+ze+"))?\\s+(.*)"),Om={cx:dt,x:dt,r:"radius",cy:he,y:he,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":vr},Aa="font-size",Pa="clip-path";ra(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);ra(["symbol","image","marker","pattern","view","svg"]);const zh=ra(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(Bh||(Bh=vi(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),ze,Ma,ze,Ma,ze,Ma,ze));const Em=new C(1,0),zf=new C,Oc=(i,t)=>i.rotate(t),Do=(i,t)=>new C(t).subtract(i),Mo=i=>i.distanceFrom(zf),Ao=(i,t)=>Math.atan2(Yr(i,t),Nf(i,t)),Hf=i=>Ao(Em,i),na=i=>i.eq(zf)?i:i.scalarDivide(Mo(i)),Ec=function(i){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return na(new C(-i.y,i.x).scalarMultiply(t?1:-1))},Yr=(i,t)=>i.x*t.y-i.y*t.x,Nf=(i,t)=>i.x*t.x+i.y*t.y,yl=(i,t,e)=>{if(i.eq(t)||i.eq(e))return!0;const r=Yr(t,e),n=Yr(t,i),s=Yr(e,i);return r>=0?n>=0&&s<=0:!(n<=0&&s>=0)},Hh="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Nh=new RegExp("(?:\\s|^)"+Hh+Hh+"("+ze+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class hi{constructor(t){const e=typeof t=="string"?hi.parseShadow(t):t;Object.assign(this,hi.ownDefaults,e),this.id=tr()}static parseShadow(t){const e=t.trim(),[,r=0,n=0,s=0]=(Nh.exec(e)||[]).map((o=>parseFloat(o)||0));return{color:(e.replace(Nh,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:n,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=Oc(new C(this.offsetX,this.offsetY),Mt(-t.angle)),r=new ct(this.color);let n=40,s=40;return t.width&&t.height&&(n=100*vt((Math.abs(e.x)+this.blur)/t.width,lt.NUM_FRACTION_DIGITS)+20,s=100*vt((Math.abs(e.y)+this.blur)/t.height,lt.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(n,'%" width="').concat(100+2*n,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(vt(this.blur?this.blur/2:0,lt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(vt(e.x,lt.NUM_FRACTION_DIGITS),'" dy="').concat(vt(e.y,lt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=hi.ownDefaults;return this.includeDefaultValues?t:Sc(t,((r,n)=>r!==e[n]))}static async fromObject(t){return new this(t)}}v(hi,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),v(hi,"type","shadow"),X.setClass(hi,"shadow");const xr=(i,t,e)=>Math.max(i,Math.min(t,e)),Dm=[he,dt,ie,we,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",an,ln],Ii=[It,fe,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Mm={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:dt,originY:he,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:It,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Fa=(i,t,e,r)=>(i<Math.abs(t)?(i=t,r=e/4):r=t===0&&i===0?e/ji*Math.asin(1):e/ji*Math.asin(t/i),{a:i,c:t,p:e,s:r}),Uh=(i,t,e,r,n)=>i*Math.pow(2,10*(r-=1))*Math.sin((r*n-t)*ji/e),Uf=(i,t,e,r)=>-e*Math.cos(i/r*Qi)+e+t,wl=(i,t,e,r)=>(i/=r)<1/2.75?e*(7.5625*i*i)+t:i<2/2.75?e*(7.5625*(i-=1.5/2.75)*i+.75)+t:i<2.5/2.75?e*(7.5625*(i-=2.25/2.75)*i+.9375)+t:e*(7.5625*(i-=2.625/2.75)*i+.984375)+t,Wh=(i,t,e,r)=>e-wl(r-i,0,e,r)+t;var Am=Object.freeze({__proto__:null,defaultEasing:Uf,easeInBack:function(i,t,e,r){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*(i/=r)*i*((n+1)*i-n)+t},easeInBounce:Wh,easeInCirc:(i,t,e,r)=>-e*(Math.sqrt(1-(i/=r)*i)-1)+t,easeInCubic:(i,t,e,r)=>e*(i/r)**3+t,easeInElastic:(i,t,e,r)=>{const n=e;let s=0;if(i===0)return t;if((i/=r)===1)return t+e;s||(s=.3*r);const{a:o,s:a,p:l}=Fa(n,e,s,1.70158);return-Uh(o,a,l,i,r)+t},easeInExpo:(i,t,e,r)=>i===0?t:e*2**(10*(i/r-1))+t,easeInOutBack:function(i,t,e,r){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(i/=r/2)<1?e/2*(i*i*((1+(n*=1.525))*i-n))+t:e/2*((i-=2)*i*((1+(n*=1.525))*i+n)+2)+t},easeInOutBounce:(i,t,e,r)=>i<r/2?.5*Wh(2*i,0,e,r)+t:.5*wl(2*i-r,0,e,r)+.5*e+t,easeInOutCirc:(i,t,e,r)=>(i/=r/2)<1?-e/2*(Math.sqrt(1-i**2)-1)+t:e/2*(Math.sqrt(1-(i-=2)*i)+1)+t,easeInOutCubic:(i,t,e,r)=>(i/=r/2)<1?e/2*i**3+t:e/2*((i-2)**3+2)+t,easeInOutElastic:(i,t,e,r)=>{const n=e;let s=0;if(i===0)return t;if((i/=r/2)===2)return t+e;s||(s=r*(.3*1.5));const{a:o,s:a,p:l,c}=Fa(n,e,s,1.70158);return i<1?-.5*Uh(o,a,l,i,r)+t:o*Math.pow(2,-10*(i-=1))*Math.sin((i*r-a)*ji/l)*.5+c+t},easeInOutExpo:(i,t,e,r)=>i===0?t:i===r?t+e:(i/=r/2)<1?e/2*2**(10*(i-1))+t:e/2*-(2**(-10*--i)+2)+t,easeInOutQuad:(i,t,e,r)=>(i/=r/2)<1?e/2*i**2+t:-e/2*(--i*(i-2)-1)+t,easeInOutQuart:(i,t,e,r)=>(i/=r/2)<1?e/2*i**4+t:-e/2*((i-=2)*i**3-2)+t,easeInOutQuint:(i,t,e,r)=>(i/=r/2)<1?e/2*i**5+t:e/2*((i-2)**5+2)+t,easeInOutSine:(i,t,e,r)=>-e/2*(Math.cos(Math.PI*i/r)-1)+t,easeInQuad:(i,t,e,r)=>e*(i/=r)*i+t,easeInQuart:(i,t,e,r)=>e*(i/=r)*i**3+t,easeInQuint:(i,t,e,r)=>e*(i/r)**5+t,easeInSine:(i,t,e,r)=>-e*Math.cos(i/r*Qi)+e+t,easeOutBack:function(i,t,e,r){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*((i=i/r-1)*i*((n+1)*i+n)+1)+t},easeOutBounce:wl,easeOutCirc:(i,t,e,r)=>e*Math.sqrt(1-(i=i/r-1)*i)+t,easeOutCubic:(i,t,e,r)=>e*((i/r-1)**3+1)+t,easeOutElastic:(i,t,e,r)=>{const n=e;let s=0;if(i===0)return t;if((i/=r)===1)return t+e;s||(s=.3*r);const{a:o,s:a,p:l,c}=Fa(n,e,s,1.70158);return o*2**(-10*i)*Math.sin((i*r-a)*ji/l)+c+t},easeOutExpo:(i,t,e,r)=>i===r?t+e:e*-(2**(-10*i/r)+1)+t,easeOutQuad:(i,t,e,r)=>-e*(i/=r)*(i-2)+t,easeOutQuart:(i,t,e,r)=>-e*((i=i/r-1)*i**3-1)+t,easeOutQuint:(i,t,e,r)=>e*((i/r-1)**5+1)+t,easeOutSine:(i,t,e,r)=>e*Math.sin(i/r*Qi)+t});const Pm=()=>!1;class Dc{constructor(t){let{startValue:e,byValue:r,duration:n=500,delay:s=0,easing:o=Uf,onStart:a=mr,onChange:l=mr,onComplete:c=mr,abort:h=Pm,target:u}=t;v(this,"_state","pending"),v(this,"durationProgress",0),v(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=n,this.delay=s,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=h,this.target=u,this.startValue=e,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>Hn(t)),this.delay):Hn(t)}tick(t){const e=(t||+new Date)-this.startTime,r=Math.min(e,this.duration);this.durationProgress=r/this.duration;const{value:n,valueProgress:s}=this.calculate(r);this.value=Object.freeze(n),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Hn(this.tick)))}register(){Co.push(this)}unregister(){Co.remove(this)}abort(){this._state="aborted",this.unregister()}}const Fm=["startValue","endValue"];class Lm extends Dc{constructor(t){let{startValue:e=0,endValue:r=100}=t;super(y(y({},bt(t,Fm)),{},{startValue:e,byValue:r-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const jm=["startValue","endValue"];class Rm extends Dc{constructor(t){let{startValue:e=[0],endValue:r=[100]}=t;super(y(y({},bt(t,jm)),{},{startValue:e,byValue:r.map(((n,s)=>n-e[s]))}))}calculate(t){const e=this.startValue.map(((r,n)=>this.easing(t,r,this.byValue[n],this.duration,n)));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const Im=["startValue","endValue","easing","onChange","onComplete","abort"],Bm=(i,t,e,r)=>t+e*(1-Math.cos(i/r*Qi)),La=i=>i&&((t,e,r)=>i(new ct(t).toRgba(),e,r));class zm extends Dc{constructor(t){let{startValue:e,endValue:r,easing:n=Bm,onChange:s,onComplete:o,abort:a}=t,l=bt(t,Im);const c=new ct(e).getSource(),h=new ct(r).getSource();super(y(y({},l),{},{startValue:c,byValue:h.map(((u,f)=>u-c[f])),easing:n,onChange:La(s),onComplete:La(o),abort:La(a)}))}calculate(t){const[e,r,n,s]=this.startValue.map(((a,l)=>this.easing(t,a,this.byValue[l],this.duration,l))),o=[...[e,r,n].map(Math.round),xr(0,s,1)];return{value:o,valueProgress:o.map(((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0)).find((a=>a!==0))||0}}}function Mc(i){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(i)?new Rm(i):new Lm(i);return t.start(),t}function Wf(i){const t=new zm(i);return t.start(),t}class Ot{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some((e=>e.eq(t)))}append(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.points=this.points.concat(e.filter((n=>!this.includes(n)))),this}static isPointContained(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(r))return t.eq(e);if(e.x===r.x)return t.x===e.x&&(n||t.y>=Math.min(e.y,r.y)&&t.y<=Math.max(e.y,r.y));if(e.y===r.y)return t.y===e.y&&(n||t.x>=Math.min(e.x,r.x)&&t.x<=Math.max(e.x,r.x));{const s=Do(e,r),o=Do(e,t).divide(s);return n?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(t,e){const r=new C(t).setX(Math.min(t.x-1,...e.map((s=>s.x))));let n=0;for(let s=0;s<e.length;s++){const o=this.intersectSegmentSegment(e[s],e[(s+1)%e.length],t,r);if(o.includes(t))return!0;n+=+(o.status==="Intersection")}return n%2==1}static intersectLineLine(t,e,r,n){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=e.x-t.x,l=e.y-t.y,c=n.x-r.x,h=n.y-r.y,u=t.x-r.x,f=t.y-r.y,d=c*f-h*u,g=a*f-l*u,p=h*a-c*l;if(p!==0){const x=d/p,_=g/p;return(s||0<=x&&x<=1)&&(o||0<=_&&_<=1)?new Ot("Intersection").append(new C(t.x+x*a,t.y+x*l)):new Ot}if(d===0||g===0){const x=s||o||Ot.isPointContained(t,r,n)||Ot.isPointContained(e,r,n)||Ot.isPointContained(r,t,e)||Ot.isPointContained(n,t,e);return new Ot(x?"Coincident":void 0)}return new Ot("Parallel")}static intersectSegmentLine(t,e,r,n){return Ot.intersectLineLine(t,e,r,n,!1,!0)}static intersectSegmentSegment(t,e,r,n){return Ot.intersectLineLine(t,e,r,n,!1,!1)}static intersectLinePolygon(t,e,r){let n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new Ot,o=r.length;for(let a,l,c,h=0;h<o;h++){if(a=r[h],l=r[(h+1)%o],c=Ot.intersectLineLine(t,e,a,l,n,!1),c.status==="Coincident")return c;s.append(...c.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(t,e,r){return Ot.intersectLinePolygon(t,e,r,!1)}static intersectPolygonPolygon(t,e){const r=new Ot,n=t.length,s=[];for(let o=0;o<n;o++){const a=t[o],l=t[(o+1)%n],c=Ot.intersectSegmentPolygon(a,l,e);c.status==="Coincident"?(s.push(c),r.append(a,l)):r.append(...c.points)}return s.length>0&&s.length===t.length?new Ot("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(t,e,r){const n=e.min(r),s=e.max(r),o=new C(s.x,n.y),a=new C(n.x,s.y);return Ot.intersectPolygonPolygon(t,[n,o,s,a])}}class Hm extends pf{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?Yt(t,this.group.calcTransformMatrix()):t}setXY(t,e,r){this.group&&(t=Yt(t,xe(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,r)}getRelativeXY(){return new C(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:r,bl:n}=this.aCoords||(this.aCoords=this.calcACoords()),s=[t,e,r,n];if(this.group){const o=this.group.calcTransformMatrix();return s.map((a=>Yt(a,o)))}return s}intersectsWithRect(t,e){return Ot.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=Ot.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every((e=>t.containsPoint(e)))}isContainedWithinRect(t,e){const{left:r,top:n,width:s,height:o}=this.getBoundingRect();return r>=t.x&&r+s<=e.x&&n>=t.y&&n+o<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Ot.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some((r=>r.x<=e.x&&r.x>=t.x&&r.y<=e.y&&r.y>=t.y))||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every((r=>(r.x>=e.x||r.x<=t.x)&&(r.y>=e.y||r.y<=t.y)))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return ci(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(ie,t),this._set(we,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?_i(xf(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||ee.concat()}calcACoords(){const t=Cr({angle:this.angle}),{x:e,y:r}=this.getRelativeCenterPoint(),n=cn(e,r),s=At(n,t),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:Yt({x:-a,y:-l},s),tr:Yt({x:a,y:-l},s),bl:Yt({x:-a,y:l},s),br:Yt({x:a,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Lt(this.originX),Lt(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const r=this.transformMatrixKey(t),n=this.matrixCache;return n&&n.key.every(((s,o)=>s===r[o]))?n.value:(this.group&&(e=At(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:r,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const r=this.getRelativeCenterPoint(),n={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=wf(n);return this.ownMatrixCache={key:t,value:s},s}_getNonTransformedDimensions(){return new C(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=y({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),r=e.strokeWidth;let n=r,s=0;this.strokeUniform&&(n=0,s=r);const o=e.width+n,a=e.height+n;let l;return l=e.skewX===0&&e.skewY===0?new C(o*e.scaleX,a*e.scaleY):ea(o,a,ys(e)),l.scalarAdd(s)}translateToGivenOrigin(t,e,r,n,s){let o=t.x,a=t.y;const l=Lt(n)-Lt(e),c=Lt(s)-Lt(r);if(l||c){const h=this._getTransformedDimensions();o+=l*h.x,a+=c*h.y}return new C(o,a)}translateToCenterPoint(t,e,r){if(e===rt&&r===rt)return t;const n=this.translateToGivenOrigin(t,e,r,rt,rt);return this.angle?n.rotate(Mt(this.angle),t):n}translateToOriginPoint(t,e,r){const n=this.translateToGivenOrigin(t,rt,rt,e,r);return this.angle?n.rotate(Mt(this.angle),t):n}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?Yt(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new C(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,r){const n=this.translateToCenterPoint(t,e,r),s=this.translateToOriginPoint(n,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),dt,he)}}const Nm=["type"],Um=["extraParam"];let wi=class uo extends Hm{static getDefaults(){return uo.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){Ji("warn","Setting type has no effect",t)}constructor(t){super(),v(this,"_cacheContext",null),Object.assign(this,uo.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=mi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,r=t.height,n=lt.maxCacheSideLimit,s=lt.minCacheSideLimit;if(e<=n&&r<=n&&e*r<=lt.perfLimitSizeTotal)return e<s&&(t.width=s),r<s&&(t.height=s),t;const o=e/r,[a,l]=zn.limitDimsByArea(o),c=xr(s,a,n),h=xr(s,l,n);return e>c&&(t.zoomX/=e/c,t.width=c,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),r=e.x*t.x/this.scaleX,n=e.y*t.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(n+2),zoomX:t.x,zoomY:t.y,x:r,y:n}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:r,height:n,zoomX:s,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==t.width||n!==t.height,h=this.zoomX!==s||this.zoomY!==o;if(!t||!e)return!1;if(c||h){r!==t.width||n!==t.height?(t.width=r,t.height=n):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const u=a/2,f=l/2;return this.cacheTranslationX=Math.round(t.width/2-u)+u,this.cacheTranslationY=Math.round(t.height/2-f)+f,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(s,o),this.zoomX=s,this.zoomY=o,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,r=this.calcTransformMatrix(!e);t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new C(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=Kr(this.calcTransformMatrix());return new C(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return t.scalarMultiply(e*r)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==ie&&t!==we||(e=this._constrainScale(e)),t===ie&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof hi||(e=new hi(e));const r=this[t]!==e;return this[t]=e,r&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:r,cacheTranslationX:n,cacheTranslationY:s}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:r,cacheTranslationX:n,cacheTranslationY:s,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===fe&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e,r){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(r,0,0),t.restore()}drawObject(t,e,r){const n=this.fill,s=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,r),this.fill=n,this.stroke=s}createClipPathLayer(t,e){const r=be(e),n=r.getContext("2d");if(n.translate(e.cacheTranslationX,e.cacheTranslationY),n.scale(e.zoomX,e.zoomY),t._cacheCanvas=r,e.parentClipPaths.forEach((s=>{s.transform(n)})),e.parentClipPaths.push(t),t.absolutePositioned){const s=xe(this.calcTransformMatrix());n.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return t.transform(n),t.drawObject(n,!0,e),r}_drawClipPath(t,e,r){if(!e)return;e._transformDone=!0;const n=this.createClipPathLayer(e,r);this.drawClipPathOnCache(t,e,n)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,r=this._cacheContext;return!(!e||!r||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&r&&!t&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,e.width,e.height),r.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const r=e.stroke;r&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,ke(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(t,r):(t.strokeStyle=r.toLive(t),this._applyPatternGradientTransform(t,r)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:r}=e;r&&(ke(r)?(t.fillStyle=r.toLive(t),this._applyPatternGradientTransform(t,r)):t.fillStyle=r)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,r=this.canvas,n=this.getCanvasRetinaScaling(),[s,,,o]=r?.viewportTransform||ee,a=s*n,l=o*n,c=e.nonScaling?new C(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*lt.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,t.shadowOffsetX=e.offsetX*a*c.x,t.shadowOffsetY=e.offsetY*l*c.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!ke(e))return{offsetX:0,offsetY:0};const r=e.gradientTransform||e.patternTransform,n=-this.width/2+e.offsetX||0,s=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,n,s):t.transform(1,0,0,1,n,s),r&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:n,offsetY:s}}_renderPaintInOrder(t){this.paintFirst===fe?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var r;const n=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),o=n.x/this.scaleX/s,a=n.y/this.scaleY/s,l=be({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(n.zoomX/this.scaleX/s,n.zoomY/this.scaleY/s),this._applyPatternGradientTransform(c,e),c.fillStyle=e.toLive(t),c.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/n.zoomX,s*this.scaleY/n.zoomY),t.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new C(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(X.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=Cc(this),r=this.group,n=this.shadow,s=Math.abs,o=t.enableRetinaScaling?cf():1,a=(t.multiplier||1)*o,l=t.canvasProvider||(S=>new hn(S,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&Ef(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&xl(this,this.getViewportTransform()),this.setCoords();const c=mi(),h=this.getBoundingRect(),u=this.shadow,f=new C;if(u){const S=u.blur,T=u.nonScaling?new C(1,1):this.getObjectScaling();f.x=2*Math.round(s(u.offsetX)+S)*s(T.x),f.y=2*Math.round(s(u.offsetY)+S)*s(T.y)}const d=h.width+f.x,g=h.height+f.y;c.width=Math.ceil(d),c.height=Math.ceil(g);const p=l(c);t.format==="jpeg"&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new C(p.width/2,p.height/2),rt,rt);const x=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const _=p.toCanvasElement(a||1,t);return this.set("canvas",x),this.shadow=n,r&&(this.group=r),this.set(e),this.setCoords(),p._objects=[],p.destroy(),_}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xc(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return yc(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:r,originY:n}=this;if(e){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=rt,this.originY=rt,this.left=s,this.top=o}if(this.set("angle",t),e){const{x:s,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,n);this.left=s,this.top=o,this.originX=r,this.originY=n}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Co.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&pi().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce(((r,n)=>{let[s,o]=n;return r[s]=this._animate(s,o,e),r}),{})}_animate(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=t.split("."),s=this.constructor.colorProperties.includes(n[n.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,h=y(y({},r),{},{target:this,startValue:a??n.reduce(((u,f)=>u[f]),this),endValue:e,abort:o?.bind(this),onChange:(u,f,d)=>{n.reduce(((g,p,x)=>(x===n.length-1&&(g[p]=u),g[p])),this),l&&l(u,f,d)},onComplete:(u,f,d)=>{this.setCoords(),c&&c(u,f,d)}});return s?Wf(h):Mc(h)}isDescendantOf(t){const{parent:e,group:r}=this;return e===t||r===t||!!e&&e.isDescendantOf(t)||!!r&&r!==e&&r.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),r=t.getAncestors();if(e.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[t,...r.slice(0,r.length-1)],common:[this]};for(let n,s=0;s<e.length;s++){if(n=e[s],n===t)return{fork:[this,...e.slice(0,s)],otherFork:[],common:e.slice(s)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[t,...r.slice(0,o)],common:[this,...e]};if(n===r[o])return{fork:[this,...e.slice(0,s)],otherFork:[t,...r.slice(0,o)],common:e.slice(s)}}}return{fork:[this,...e],otherFork:[t,...r],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const r=e.common[0]||this.canvas;if(!r)return;const n=e.fork.pop(),s=e.otherFork.pop(),o=r._objects.indexOf(n),a=r._objects.indexOf(s);return o>-1&&o>a}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(uo.customProperties,this.constructor.customProperties||[]);let e;const r=lt.NUM_FRACTION_DIGITS,{clipPath:n,fill:s,stroke:o,shadow:a,strokeDashArray:l,left:c,top:h,originX:u,originY:f,width:d,height:g,strokeWidth:p,strokeLineCap:x,strokeDashOffset:_,strokeLineJoin:S,strokeUniform:T,strokeMiterLimit:w,scaleX:M,scaleY:I,angle:A,flipX:j,flipY:H,opacity:N,visible:V,backgroundColor:et,fillRule:nt,paintFirst:J,globalCompositeOperation:gt,skewX:D,skewY:k}=this;n&&!n.excludeFromExport&&(e=n.toObject(t.concat("inverted","absolutePositioned")));const O=W=>vt(W,r),$=y(y({},Tr(this,t)),{},{type:this.constructor.type,version:ml,originX:u,originY:f,left:O(c),top:O(h),width:O(d),height:O(g),fill:Oh(s)?s.toObject():s,stroke:Oh(o)?o.toObject():o,strokeWidth:O(p),strokeDashArray:l&&l.concat(),strokeLineCap:x,strokeDashOffset:_,strokeLineJoin:S,strokeUniform:T,strokeMiterLimit:O(w),scaleX:O(M),scaleY:O(I),angle:O(A),flipX:j,flipY:H,opacity:O(N),shadow:a&&a.toObject(),visible:V,backgroundColor:et,fillRule:nt,paintFirst:J,globalCompositeOperation:gt,skewX:O(D),skewY:O(k)},e?{clipPath:e}:null);return this.includeDefaultValues?$:this._removeDefaultValues($)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),r=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return Sc(t,((n,s)=>{if(s===dt||s===he||s==="type")return!0;const o=r[s];return n!==o&&!(Array.isArray(n)&&Array.isArray(o)&&n.length===0&&o.length===0)}))}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=bt(t,Nm),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:n}=r,s=bt(r,Um);return ws(e,s).then((o=>n?(delete o[n],new this(e[n],o)):new this(o)))}static fromObject(t,e){return this._fromObject(t,e)}};v(wi,"stateProperties",Dm),v(wi,"cacheProperties",Ii),v(wi,"ownDefaults",Mm),v(wi,"type","FabricObject"),v(wi,"colorProperties",[It,fe,"backgroundColor"]),v(wi,"customProperties",[]),X.setClass(wi),X.setClass(wi,"object");const ir=(i,t,e)=>(r,n,s,o)=>{const a=t(r,n,s,o);return a&&Tc(i,y(y({},kc(r,n,s,o)),e)),a};function kr(i){return(t,e,r,n)=>{const{target:s,originX:o,originY:a}=e,l=s.getRelativeCenterPoint(),c=s.translateToOriginPoint(l,o,a),h=i(t,e,r,n);return s.setPositionByOrigin(c,e.originX,e.originY),h}}const bl=ir(es,kr(((i,t,e,r)=>{const n=ia(t,t.originX,t.originY,e,r);if(Lt(t.originX)===Lt(rt)||Lt(t.originX)===Lt(Ft)&&n.x<0||Lt(t.originX)===Lt(dt)&&n.x>0){const{target:s}=t,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=Mf(t)?2:1,l=s.width,c=Math.abs(n.x*a/s.scaleX)-o;return s.set("width",Math.max(c,1)),l!==s.width}return!1})));function Yf(i,t,e,r,n){r=r||{};const s=this.sizeX||r.cornerSize||n.cornerSize,o=this.sizeY||r.cornerSize||n.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:n.transparentCorners,l=a?fe:It,c=!a&&(r.cornerStrokeColor||n.cornerStrokeColor);let h,u=t,f=e;i.save(),i.fillStyle=r.cornerColor||n.cornerColor||"",i.strokeStyle=r.cornerStrokeColor||n.cornerStrokeColor||"",s>o?(h=s,i.scale(1,o/s),f=e*s/o):o>s?(h=o,i.scale(s/o,1),u=t*o/s):h=s,i.beginPath(),i.arc(u,f,h/2,0,ji,!1),i[l](),c&&i.stroke(),i.restore()}function Xf(i,t,e,r,n){r=r||{};const s=this.sizeX||r.cornerSize||n.cornerSize,o=this.sizeY||r.cornerSize||n.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:n.transparentCorners,l=a?fe:It,c=!a&&(r.cornerStrokeColor||n.cornerStrokeColor),h=s/2,u=o/2;i.save(),i.fillStyle=r.cornerColor||n.cornerColor||"",i.strokeStyle=r.cornerStrokeColor||n.cornerStrokeColor||"",i.translate(t,e);const f=n.getTotalAngle();i.rotate(Mt(f)),i["".concat(l,"Rect")](-h,-u,s,o),c&&i.strokeRect(-h,-u,s,o),i.restore()}class mt{constructor(t){v(this,"visible",!0),v(this,"actionName",Jo),v(this,"angle",0),v(this,"x",0),v(this,"y",0),v(this,"offsetX",0),v(this,"offsetY",0),v(this,"sizeX",0),v(this,"sizeY",0),v(this,"touchSizeX",0),v(this,"touchSizeY",0),v(this,"cursorStyle","crosshair"),v(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,r,n){var s;let{tl:o,tr:a,br:l,bl:c}=n;return((s=e.canvas)===null||s===void 0?void 0:s.getActiveObject())===e&&e.isControlVisible(t)&&Ot.isPointInPolygon(r,[o,a,l,c])}getActionHandler(t,e,r){return this.actionHandler}getMouseDownHandler(t,e,r){return this.mouseDownHandler}getMouseUpHandler(t,e,r){return this.mouseUpHandler}cursorStyleHandler(t,e,r){return e.cursorStyle}getActionName(t,e,r){return e.actionName}getVisibility(t,e){var r,n;return(r=(n=t._controlsVisibility)===null||n===void 0?void 0:n[e])!==null&&r!==void 0?r:this.visible}setVisibility(t,e,r){this.visible=t}positionHandler(t,e,r,n){return new C(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,r,n,s,o){const a=Qo([cn(r,n),Cr({angle:t}),ta((s?this.touchSizeX:this.sizeX)||e,(s?this.touchSizeY:this.sizeY)||e)]);return{tl:new C(-.5,-.5).transform(a),tr:new C(.5,-.5).transform(a),br:new C(.5,.5).transform(a),bl:new C(-.5,.5).transform(a)}}render(t,e,r,n,s){((n=n||{}).cornerStyle||s.cornerStyle)==="circle"?Yf.call(this,t,e,r,n,s):Xf.call(this,t,e,r,n,s)}}const Vf=(i,t,e)=>e.lockRotation?ko:t.cursorStyle,Gf=ir(uf,kr(((i,t,e,r)=>{let{target:n,ex:s,ey:o,theta:a,originX:l,originY:c}=t;const h=n.translateToOriginPoint(n.getRelativeCenterPoint(),l,c);if(Ue(n,"lockRotation"))return!1;const u=Math.atan2(o-h.y,s-h.x),f=Math.atan2(r-h.y,e-h.x);let d=_i(f-u+a);if(n.snapAngle&&n.snapAngle>0){const p=n.snapAngle,x=n.snapThreshold||p,_=Math.ceil(d/p)*p,S=Math.floor(d/p)*p;Math.abs(d-S)<x?d=S:Math.abs(d-_)<x&&(d=_)}d<0&&(d=360+d),d%=360;const g=n.angle!==d;return n.angle=d,g})));function $f(i,t){const e=t.canvas,r=i[e.uniScaleKey];return e.uniformScaling&&!r||!e.uniformScaling&&r}function Kf(i,t,e){const r=Ue(i,"lockScalingX"),n=Ue(i,"lockScalingY");if(r&&n||!t&&(r||n)&&e||r&&t==="x"||n&&t==="y")return!0;const{width:s,height:o,strokeWidth:a}=i;return s===0&&a===0&&t!=="y"||o===0&&a===0&&t!=="x"}const Wm=["e","se","s","sw","w","nw","n","ne","e"],Rr=(i,t,e)=>{const r=$f(i,e);if(Kf(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",r))return ko;const n=Af(e,t);return"".concat(Wm[n],"-resize")};function Ac(i,t,e,r){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=t.target,o=n.by,a=$f(i,s);let l,c,h,u,f,d;if(Kf(s,o,a))return!1;if(t.gestureScale)c=t.scaleX*t.gestureScale,h=t.scaleY*t.gestureScale;else{if(l=ia(t,t.originX,t.originY,e,r),f=o!=="y"?Math.sign(l.x||t.signX||1):1,d=o!=="x"?Math.sign(l.y||t.signY||1):1,t.signX||(t.signX=f),t.signY||(t.signY=d),Ue(s,"lockScalingFlip")&&(t.signX!==f||t.signY!==d))return!1;if(u=s._getTransformedDimensions(),a&&!o){const x=Math.abs(l.x)+Math.abs(l.y),{original:_}=t,S=x/(Math.abs(u.x*_.scaleX/s.scaleX)+Math.abs(u.y*_.scaleY/s.scaleY));c=_.scaleX*S,h=_.scaleY*S}else c=Math.abs(l.x*s.scaleX/u.x),h=Math.abs(l.y*s.scaleY/u.y);Mf(t)&&(c*=2,h*=2),t.signX!==f&&o!=="y"&&(t.originX=Ah(t.originX),c*=-1,t.signX=f),t.signY!==d&&o!=="x"&&(t.originY=Ah(t.originY),h*=-1,t.signY=d)}const g=s.scaleX,p=s.scaleY;return o?(o==="x"&&s.set(ie,c),o==="y"&&s.set(we,h)):(!Ue(s,"lockScalingX")&&s.set(ie,c),!Ue(s,"lockScalingY")&&s.set(we,h)),g!==s.scaleX||p!==s.scaleY}const Tn=ir(qo,kr(((i,t,e,r)=>Ac(i,t,e,r)))),Zf=ir(qo,kr(((i,t,e,r)=>Ac(i,t,e,r,{by:"x"})))),qf=ir(qo,kr(((i,t,e,r)=>Ac(i,t,e,r,{by:"y"})))),Ym=["target","ex","ey","skewingSide"],ja={x:{counterAxis:"y",scale:ie,skew:an,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:we,skew:ln,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Xm=["ns","nesw","ew","nwse"],Jf=(i,t,e)=>{if(t.x!==0&&Ue(e,"lockSkewingY")||t.y!==0&&Ue(e,"lockSkewingX"))return ko;const r=Af(e,t)%4;return"".concat(Xm[r],"-resize")};function Qf(i,t,e,r,n){const{target:s}=e,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:h}=ja[i];if(Ue(s,l))return!1;const{origin:u,flip:f}=ja[o],d=Lt(e[u])*(s[f]?-1:1),g=-Math.sign(d)*(s[h]?-1:1),p=.5*-((s[c]===0&&ia(e,rt,rt,r,n)[i]>0||s[c]>0?1:-1)*g)+.5;return ir(ff,kr(((_,S,T,w)=>(function(M,I,A){let{target:j,ex:H,ey:N,skewingSide:V}=I,et=bt(I,Ym);const{skew:nt}=ja[M],J=A.subtract(new C(H,N)).divide(new C(j.scaleX,j.scaleY))[M],gt=j[nt],D=et[nt],k=Math.tan(Mt(D)),O=M==="y"?j._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:j._getTransformedDimensions({scaleX:1,scaleY:1}).y,$=2*J*V/Math.max(O,1)+k,W=_i(Math.atan($));j.set(nt,W);const it=gt!==j[nt];if(it&&M==="y"){const{skewX:ot,scaleX:Dt}=j,St=j._getTransformedDimensions({skewY:gt}),de=j._getTransformedDimensions(),Rt=ot!==0?St.x/de.x:1;Rt!==1&&j.set(ie,Rt*Dt)}return it})(i,S,new C(T,w)))))(t,y(y({},e),{},{[a]:p,skewingSide:g}),r,n)}const td=(i,t,e,r)=>Qf("x",i,t,e,r),ed=(i,t,e,r)=>Qf("y",i,t,e,r);function sa(i,t){return i[t.canvas.altActionKey]}const kn=(i,t,e)=>{const r=sa(i,e);return t.x===0?r?an:we:t.y===0?r?ln:ie:""},cr=(i,t,e)=>sa(i,e)?Jf(0,t,e):Rr(i,t,e),Sl=(i,t,e,r)=>sa(i,t.target)?ed(i,t,e,r):Zf(i,t,e,r),Cl=(i,t,e,r)=>sa(i,t.target)?td(i,t,e,r):qf(i,t,e,r),Pc=()=>({ml:new mt({x:-.5,y:0,cursorStyleHandler:cr,actionHandler:Sl,getActionName:kn}),mr:new mt({x:.5,y:0,cursorStyleHandler:cr,actionHandler:Sl,getActionName:kn}),mb:new mt({x:0,y:.5,cursorStyleHandler:cr,actionHandler:Cl,getActionName:kn}),mt:new mt({x:0,y:-.5,cursorStyleHandler:cr,actionHandler:Cl,getActionName:kn}),tl:new mt({x:-.5,y:-.5,cursorStyleHandler:Rr,actionHandler:Tn}),tr:new mt({x:.5,y:-.5,cursorStyleHandler:Rr,actionHandler:Tn}),bl:new mt({x:-.5,y:.5,cursorStyleHandler:Rr,actionHandler:Tn}),br:new mt({x:.5,y:.5,cursorStyleHandler:Rr,actionHandler:Tn}),mtr:new mt({x:0,y:-.5,actionHandler:Gf,cursorStyleHandler:Vf,offsetY:-40,withConnection:!0,actionName:_c})}),id=()=>({mr:new mt({x:.5,y:0,actionHandler:bl,cursorStyleHandler:cr,actionName:es}),ml:new mt({x:-.5,y:0,actionHandler:bl,cursorStyleHandler:cr,actionName:es})}),rd=()=>y(y({},Pc()),id());class ui extends wi{static getDefaults(){return y(y({},super.getDefaults()),ui.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),ui.ownDefaults),this.setOptions(t)}static createControls(){return{controls:Pc()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,r=e.target,n=e.action;if(this===r&&n&&n.startsWith(Jo))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let n=r.length-1;n>=0;n--){const[s,o]=r[n],a=this.controls[s];if(a.shouldActivate(s,this,t,e?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),r=cn(e.x,e.y),n=Cr({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=At(r,n),o=At(t,s),a=At(o,[1/t[0],0,0,1/t[3],0,0]),l=this.group?Kr(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),h={};return this.forEachControl(((u,f)=>{const d=u.positionHandler(c,a,this,u);h[f]=Object.assign(d,this._calcCornerCoords(u,d))})),h}_calcCornerCoords(t,e){const r=this.getTotalAngle();return{corner:t.calcCornerCoords(r,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(r,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),n=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/n[0],1/n[3]),t.rotate(Mt(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-r.x/2,-r.y/2,r.x,r.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=y({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);t.save(),t.strokeStyle=n.borderColor,this._setLineDash(t,n.borderDashArray),this.strokeBorders(t,e),n.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:n}=this,s=y({hasBorders:r,hasControls:n},e),o=this.getViewportTransform(),a=s.hasBorders,l=s.hasControls,c=At(o,this.calcTransformMatrix()),h=Kr(c);t.save(),t.translate(h.translateX,h.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(h.angle-=180),t.rotate(Mt(this.group?h.angle:this.angle)),a&&this.drawBorders(t,h,e),l&&this.drawControls(t,e),t.restore()}drawBorders(t,e,r){let n;if(r&&r.forActiveSelection||this.group){const s=ea(this.width,this.height,ys(e)),o=this.isStrokeAccountedForInDimensions()?vc:(this.strokeUniform?new C().scalarAdd(this.canvas?this.canvas.getZoom():1):new C(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);n=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else n=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,n,r)}drawControlsConnectingLines(t,e){let r=!1;t.beginPath(),this.forEachControl(((n,s)=>{n.withConnection&&n.getVisibility(this,s)&&(r=!0,t.moveTo(n.x*e.x,n.y*e.y),t.lineTo(n.x*e.x+n.offsetX,n.y*e.y+n.offsetY))})),r&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:n,cornerDashArray:s,cornerColor:o}=this,a=y({cornerStrokeColor:n,cornerDashArray:s,cornerColor:o},e);t.setTransform(r,0,0,r,0,0),t.strokeStyle=t.fillStyle=a.cornerColor,this.transparentCorners||(t.strokeStyle=a.cornerStrokeColor),this._setLineDash(t,a.cornerDashArray),this.forEachControl(((l,c)=>{if(l.getVisibility(this,c)){const h=this.oCoords[c];l.render(t,h.x,h.y,a,this)}})),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach((e=>{let[r,n]=e;return this.setControlVisible(r,n)}))}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const r=this.canvas.viewportTransform;e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(e);const n=this.width+4,s=this.height+4;return e.clearRect(-n/2,-s/2,n,s),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function nd(i,t){return t.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((r=>{r!=="constructor"&&Object.defineProperty(i.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r)||Object.create(null))}))})),i}v(ui,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Gt extends ui{}nd(Gt,[Lf]),X.setClass(Gt),X.setClass(Gt,"object");const sd=(i,t,e,r)=>{const n=2*(r=Math.round(r))+1,{data:s}=i.getImageData(t-r,e-r,n,n);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class od{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new C(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new C(1/this.options.scaleX,1/this.options.scaleY):new C(1,1)}createSideVector(t,e){const r=Do(t,e);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(t,e,r){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new C(t);return e.y+=e.x*Math.tan(Mt(this.options.skewY)),e.x+=e.y*Math.tan(Mt(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const Vm=new C;class Xr extends od{static getOrthogonalRotationFactor(t,e){const r=e?Ao(t,e):Hf(t);return Math.abs(r)<Qi?-1:1}constructor(t,e,r,n){super(n),v(this,"AB",void 0),v(this,"AC",void 0),v(this,"alpha",void 0),v(this,"bisector",void 0),this.A=new C(t),this.B=new C(e),this.C=new C(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Ao(this.AB,this.AC),this.bisector=na(Oc(this.AB.eq(Vm)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(t,e),s=Ec(n),o=Xr.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*o)}projectBevel(){const t=[];return(this.alpha%ji==0?[this.B]:[this.B,this.C]).forEach((e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))})),t}projectMiter(){const t=[],e=Math.abs(this.alpha),r=1/Math.sin(e/2),n=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?Mo(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Mo(n)/this.strokeProjectionMagnitude<=s&&t.push(this.applySkew(this.A.add(n))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const r=[],n=new C(Xr.getOrthogonalRotationFactor(this.bisector),Xr.getOrthogonalRotationFactor(new C(this.bisector.y,this.bisector.x)));return[new C(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n),new C(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n)].forEach((s=>{yl(s,t,e)&&r.push(this.A.add(s))})),r}projectRoundWithSkew(t,e){const r=[],{skewX:n,skewY:s,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new C(Math.tan(Mt(n)),Math.tan(Mt(s))),h=this.strokeProjectionMagnitude,u=l?h/a/Math.sqrt(1/a**2+1/o**2*c.y**2):h/Math.sqrt(1+c.y**2),f=new C(Math.sqrt(Math.max(h**2-u**2,0)),u),d=l?h/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):h/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),g=new C(d,Math.sqrt(Math.max(h**2-d**2,0)));return[g,g.scalarMultiply(-1),f,f.scalarMultiply(-1)].map((p=>this.applySkew(l?p.multiply(this.strokeUniformScalar):p))).forEach((p=>{yl(p,t,e)&&r.push(this.applySkew(this.A).add(p))})),r}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%ji==0,r=this.applySkew(this.A),n=t[e?0:2].subtract(r),s=t[e?1:0].subtract(r),o=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Yr(n,o)>0,l=a?n:s,c=a?s:n;return this.isSkewed()?t.push(...this.projectRoundWithSkew(l,c)):t.push(...this.projectRoundNoSkew(l,c)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector})))}}class Yh extends od{constructor(t,e,r){super(r),this.A=new C(t),this.T=new C(e)}calcOrthogonalProjection(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(t,e);return this.scaleUnitVector(Ec(n),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new C(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new Xr(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new C(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(na(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),n=this.A.add(r);t.push(n.add(e),n.subtract(e))}return t.map((e=>this.applySkew(e)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t})))}}const ad=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(i.length===0)return r;const n=i.reduce(((s,o)=>(s[s.length-1].eq(o)||s.push(new C(o)),s)),[new C(i[0])]);if(n.length===1)e=!0;else if(!e){const s=n[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(n,(a=>!a.eq(s)));n.splice(o+1)}return n.forEach(((s,o,a)=>{let l,c;o===0?(c=a[1],l=e?s:a[a.length-1]):o===a.length-1?(l=a[o-1],c=e?s:a[0]):(l=a[o-1],c=a[o+1]),e&&a.length===1?r.push(...new Yh(s,s,t).project()):!e||o!==0&&o!==a.length-1?r.push(...new Xr(s,l,c,t).project()):r.push(...new Yh(s,o===0?c:l,t).project())})),r},Fc=i=>{const t={};return Object.keys(i).forEach((e=>{t[e]={},Object.keys(i[e]).forEach((r=>{t[e][r]=y({},i[e][r])}))})),t},ld=i=>i.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let yn;const oa=i=>{if(yn||yn||(yn="Intl"in xs()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),yn){const t=yn.segment(i);return Array.from(t).map((e=>{let{segment:r}=e;return r}))}return Gm(i)},Gm=i=>{const t=[];for(let e,r=0;r<i.length;r++)(e=$m(i,r))!==!1&&t.push(e);return t},$m=(i,t)=>{const e=i.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return i.charAt(t);if(55296<=e&&e<=56319){if(i.length<=t+1)throw"High surrogate without following low surrogate";const n=i.charCodeAt(t+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return i.charAt(t)+i.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const r=i.charCodeAt(t-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1};var Km=Object.freeze({__proto__:null,capitalize:function(i){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(i.charAt(0).toUpperCase()).concat(t?i.slice(1):i.slice(1).toLowerCase())},escapeXml:ld,graphemeSplit:oa});const aa=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return i.fill!==t.fill||i.stroke!==t.stroke||i.strokeWidth!==t.strokeWidth||i.fontSize!==t.fontSize||i.fontFamily!==t.fontFamily||i.fontWeight!==t.fontWeight||i.fontStyle!==t.fontStyle||i.textDecorationThickness!==t.textDecorationThickness||i.textBackgroundColor!==t.textBackgroundColor||i.deltaY!==t.deltaY||e&&(i.overline!==t.overline||i.underline!==t.underline||i.linethrough!==t.linethrough)},cd=(i,t)=>{const e=t.split(`
`),r=[];let n=-1,s={};i=Fc(i);for(let o=0;o<e.length;o++){const a=oa(e[o]);if(i[o])for(let l=0;l<a.length;l++){n++;const c=i[o][l];c&&Object.keys(c).length>0&&(aa(s,c,!0)?r.push({start:n,end:n+1,style:c}):r[r.length-1].end++),s=c||{}}else n+=a.length,s={}}return r},hd=(i,t)=>{if(!Array.isArray(i))return Fc(i);const e=t.split(mc),r={};let n=-1,s=0;for(let o=0;o<e.length;o++){const a=oa(e[o]);for(let l=0;l<a.length;l++)n++,i[s]&&i[s].start<=n&&n<i[s].end&&(r[o]=r[o]||{},r[o][l]=y({},i[s].style),n===i[s].end-1&&s++)}return r},rr=["display","transform",It,"fill-opacity","fill-rule","opacity",fe,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Xh(i,t){const e=i.nodeName,r=i.getAttribute("class"),n=i.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+e,"i"),t=t.replace(o,""),n&&t.length&&(o=new RegExp("#"+n+s,"i"),t=t.replace(o,"")),r&&t.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+s,"i"),t=t.replace(o,"")}return t.length===0}function Zm(i,t){let e=!0;const r=Xh(i,t.pop());return r&&t.length&&(e=(function(n,s){let o,a=!0;for(;n.parentElement&&n.parentElement.nodeType===1&&s.length;)a&&(o=s.pop()),a=Xh(n=n.parentElement,o);return s.length===0})(i,t)),r&&e&&t.length===0}const qm=i=>{var t;return(t=Om[i])!==null&&t!==void 0?t:i},Jm=new RegExp("(".concat(ze,")"),"gi"),Qm=i=>Oo(i.replace(Jm," $1 ").replace(/,/gi," "));var Vh,Gh,$h,Kh,Zh,qh,Jh;const Jt="(".concat(ze,")"),t1=String.raw(Vh||(Vh=vi(["(skewX)(",")"],["(skewX)\\(","\\)"])),Jt),e1=String.raw(Gh||(Gh=vi(["(skewY)(",")"],["(skewY)\\(","\\)"])),Jt),i1=String.raw($h||($h=vi(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Jt,Jt,Jt),r1=String.raw(Kh||(Kh=vi(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Jt,Jt),n1=String.raw(Zh||(Zh=vi(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Jt,Jt),s1=String.raw(qh||(qh=vi(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Jt,Jt,Jt,Jt,Jt,Jt),Lc="(?:".concat(s1,"|").concat(n1,"|").concat(i1,"|").concat(r1,"|").concat(t1,"|").concat(e1,")"),o1="(?:".concat(Lc,"*)"),a1=String.raw(Jh||(Jh=vi(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),o1),l1=new RegExp(a1),c1=new RegExp(Lc),h1=new RegExp(Lc,"g");function Tl(i){const t=[];if(!(i=Qm(i).replace(/\s*([()])\s*/gi,"$1"))||i&&!l1.test(i))return[...ee];for(const e of i.matchAll(h1)){const r=c1.exec(e[0]);if(!r)continue;let n=ee;const s=r.filter((g=>!!g)),[,o,...a]=s,[l,c,h,u,f,d]=a.map((g=>parseFloat(g)));switch(o){case"translate":n=cn(l,c);break;case _c:n=Cr({angle:l},{x:c,y:h});break;case Jo:n=ta(l,c);break;case an:n=wc(l);break;case ln:n=bc(l);break;case"matrix":n=[l,c,h,u,f,d]}t.push(n)}return Qo(t)}function u1(i,t,e,r){const n=Array.isArray(t);let s,o=t;if(i!==It&&i!==fe||t!==ue){if(i==="strokeUniform")return t==="non-scaling-stroke";if(i==="strokeDashArray")o=t===ue?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(i==="transformMatrix")o=e&&e.transformMatrix?At(e.transformMatrix,Tl(t)):Tl(t);else if(i==="visible")o=t!==ue&&t!=="hidden",e&&e.visible===!1&&(o=!1);else if(i==="opacity")o=parseFloat(t),e&&e.opacity!==void 0&&(o*=e.opacity);else if(i==="textAnchor")o=t==="start"?dt:t==="end"?Ft:rt;else if(i==="charSpacing"||i===vr)s=_r(t,r)/r*1e3;else if(i==="paintFirst"){const a=t.indexOf(It),l=t.indexOf(fe);o=It,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=fe)}else{if(i==="href"||i==="xlink:href"||i==="font"||i==="id")return t;if(i==="imageSmoothing")return t==="optimizeQuality";s=n?t.map(_r):_r(t,r)}}else o="";return!n&&isNaN(s)?o:s}function f1(i,t){const e=i.match(km);if(!e)return;const r=e[1],n=e[3],s=e[4],o=e[5],a=e[6];r&&(t.fontStyle=r),n&&(t.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),s&&(t.fontSize=_r(s)),a&&(t.fontFamily=a),o&&(t.lineHeight=o==="normal"?1:o)}function d1(i,t){i.replace(/;\s*$/,"").split(";").forEach((e=>{if(!e)return;const[r,n]=e.split(":");t[r.trim().toLowerCase()]=n.trim()}))}function g1(i){const t={},e=i.getAttribute("style");return e&&(typeof e=="string"?d1(e,t):(function(r,n){Object.entries(r).forEach((s=>{let[o,a]=s;a!==void 0&&(n[o.toLowerCase()]=a)}))})(e,t)),t}const p1={stroke:"strokeOpacity",fill:"fillOpacity"};function Bi(i,t,e){if(!i)return{};let r,n={},s=pc;i.parentNode&&zh.test(i.parentNode.nodeName)&&(n=Bi(i.parentElement,t,e),n.fontSize&&(r=s=_r(n.fontSize)));const o=y(y(y({},t.reduce(((c,h)=>{const u=i.getAttribute(h);return u&&(c[h]=u),c}),{})),(function(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={};for(const f in h)Zm(c,f.split(" "))&&(u=y(y({},u),h[f]));return u})(i,e)),g1(i));o[Pa]&&i.setAttribute(Pa,o[Pa]),o[Aa]&&(r=_r(o[Aa],s),o[Aa]="".concat(r));const a={};for(const c in o){const h=qm(c),u=u1(h,o[c],n,r);a[h]=u}a&&a.font&&f1(a.font,a);const l=y(y({},n),a);return zh.test(i.nodeName)?l:(function(c){const h=Gt.getDefaults();return Object.entries(p1).forEach((u=>{let[f,d]=u;if(c[d]===void 0||c[f]==="")return;if(c[f]===void 0){if(!h[f])return;c[f]=h[f]}if(c[f].indexOf("url(")===0)return;const g=new ct(c[f]);c[f]=g.setAlpha(vt(g.getAlpha()*c[d],2)).toRgba()})),c})(l)}const m1=["left","top","width","height","visible"],ud=["rx","ry"];class Re extends Gt{static getDefaults(){return y(y({},super.getDefaults()),Re.ownDefaults)}constructor(t){super(),Object.assign(this,Re.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:r}=this,n=-e/2,s=-r/2,o=this.rx?Math.min(this.rx,e/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;t.beginPath(),t.moveTo(n+o,s),t.lineTo(n+e-o,s),l&&t.bezierCurveTo(n+e-zi*o,s,n+e,s+zi*a,n+e,s+a),t.lineTo(n+e,s+r-a),l&&t.bezierCurveTo(n+e,s+r-zi*a,n+e-zi*o,s+r,n+e-o,s+r),t.lineTo(n+o,s+r),l&&t.bezierCurveTo(n+zi*o,s+r,n,s+r-zi*a,n,s+r-a),t.lineTo(n,s+a),l&&t.bezierCurveTo(n,s+zi*a,n+zi*o,s,n+o,s),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...ud,...t])}_toSVG(){const{width:t,height:e,rx:r,ry:n}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(r,'" ry="').concat(n,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,r){const n=Bi(t,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=n,h=bt(n,m1);return new this(y(y(y({},e),h),{},{left:s,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}v(Re,"type","Rect"),v(Re,"cacheProperties",[...Ii,...ud]),v(Re,"ownDefaults",{rx:0,ry:0}),v(Re,"ATTRIBUTE_NAMES",[...rr,"x","y","rx","ry","width","height"]),X.setClass(Re),X.setSVGClass(Re);const Mi="initialization",Po="added",jc="removed",Fo="imperative",fd=(i,t)=>{const{strokeUniform:e,strokeWidth:r,width:n,height:s,group:o}=t,a=o&&o!==i?bs(o.calcTransformMatrix(),i.calcTransformMatrix()):null,l=a?t.getRelativeCenterPoint().transform(a):t.getRelativeCenterPoint(),c=!t.isStrokeAccountedForInDimensions(),h=e&&c?Df(new C(r,r),void 0,i.calcTransformMatrix()):vc,u=!e&&c?r:0,f=ea(n+u,s+u,Qo([a,t.calcOwnMatrix()],!0)).add(h).scalarDivide(2);return[l.subtract(f),l.add(f)]};class la{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:r,strategy:n}=t;return e===Mi||e===Fo||!!r&&n!==r}shouldLayoutClipPath(t){let{type:e,target:{clipPath:r}}=t;return e!==Mi&&r&&!r.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:r,target:n}=e;if(r===Fo&&e.overrides)return e.overrides;if(t.length===0)return;const{left:s,top:o,width:a,height:l}=ci(t.map((u=>fd(n,u))).reduce(((u,f)=>u.concat(f)),[])),c=new C(a,l),h=new C(s,o).add(c.scalarDivide(2));if(r===Mi){const u=this.getInitialSize(e,{size:c,center:h});return{center:h,relativeCorrection:new C(0,0),size:u}}return{center:h.transform(n.calcOwnMatrix()),size:c}}}v(la,"type","strategy");class kl extends la{shouldPerformLayout(t){return!0}}v(kl,"type","fit-content"),X.setClass(kl);const _1=["strategy"],v1=["target","strategy","bubbles","prevStrategy"],dd="layoutManager";class Qr{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new kl;v(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=y(y({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const r=this.getLayoutResult(e);r&&this.commitLayout(e,r),this.onAfterLayout(e,r),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:r}=e;return[So,hf,es,uf,qo,ff,bo,df,mm].map((n=>t.on(n,(s=>this.performLayout(n===So?{type:"object_modified",trigger:n,e:s,target:r}:{type:"object_modifying",trigger:n,e:s,target:r})))))}subscribe(t,e){this.unsubscribe(t,e);const r=this.attachHandlers(t,e);this._subscriptions.set(t,r)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach((r=>r())),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach((e=>this.unsubscribe(e,t)))}subscribeTargets(t){t.targets.forEach((e=>this.subscribe(e,t)))}onBeforeLayout(t){const{target:e,type:r}=t,{canvas:n}=e;if(r===Mi||r===Po?this.subscribeTargets(t):r===jc&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),n&&n.fire("object:layout:before",{target:e,context:t}),r===Fo&&t.deep){const s=bt(t,_1);e.forEachObject((o=>o.layoutManager&&o.layoutManager.performLayout(y(y({},s),{},{bubbles:!1,target:o}))))}}getLayoutResult(t){const{target:e,strategy:r,type:n}=t,s=r.calcLayoutResult(t,e.getObjects());if(!s)return;const o=n===Mi?new C:e.getRelativeCenterPoint(),{center:a,correction:l=new C,relativeCorrection:c=new C}=s,h=o.subtract(a).add(l).transform(n===Mi?ee:xe(e.calcOwnMatrix()),!0).add(c);return{result:s,prevCenter:o,nextCenter:a,offset:h}}commitLayout(t,e){const{target:r}=t,{result:{size:n},nextCenter:s}=e;var o,a;r.set({width:n.x,height:n.y}),this.layoutObjects(t,e),t.type===Mi?r.set({left:(o=t.x)!==null&&o!==void 0?o:s.x+n.x*Lt(r.originX),top:(a=t.y)!==null&&a!==void 0?a:s.y+n.y*Lt(r.originY)}):(r.setPositionByOrigin(s,rt,rt),r.setCoords(),r.set("dirty",!0))}layoutObjects(t,e){const{target:r}=t;r.forEachObject((n=>{n.group===r&&this.layoutObject(t,e,n)})),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,r.clipPath)}layoutObject(t,e,r){let{offset:n}=e;r.set({left:r.left+n.x,top:r.top+n.y})}onAfterLayout(t,e){const{target:r,strategy:n,bubbles:s,prevStrategy:o}=t,a=bt(t,v1),{canvas:l}=r;r.fire("layout:after",{context:t,result:e}),l&&l.fire("object:layout:after",{context:t,result:e,target:r});const c=r.parent;s&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout(y(y({},a),{},{target:c}))),r.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach((e=>e.forEach((r=>r())))),t.clear()}toObject(){return{type:dd,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}X.setClass(Qr,dd);const x1=["type","objects","layoutManager"];class y1 extends Qr{performLayout(){}}class Ae extends gf(Gt){static getDefaults(){return y(y({},super.getDefaults()),Ae.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),v(this,"_activeObjects",[]),v(this,"__objectSelectionTracker",void 0),v(this,"__objectSelectionDisposer",void 0),Object.assign(this,Ae.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var r;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject((n=>{this.enterGroup(n,!1)})),this.layoutManager=(r=e.layoutManager)!==null&&r!==void 0?r:new Qr,this.layoutManager.performLayout({type:Mi,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(Ji("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(Ji("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter(((e,r,n)=>this.canEnterGroup(e)&&n.indexOf(e)===r))}add(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=this._filterObjectsBeforeEnteringGroup(e),s=super.add(...n);return this._onAfterObjectsChange(Po,n),s}insertAt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(t,...s);return this._onAfterObjectsChange(Po,s),o}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(jc,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const r=this[t];return super._set(t,e),t==="canvas"&&r!==e&&(this._objects||[]).forEach((n=>{n._set(t,e)})),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:r}=e;const n=this._activeObjects;if(t)n.push(r),this._set("dirty",!0);else if(n.length>0){const s=n.indexOf(r);s>-1&&(n.splice(s,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&Jr(t,At(xe(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===t||t.isDescendantOf(r))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(Jr(t,At(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const r=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const t=Gt.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,r){this._renderBackground(t);for(let s=0;s<this._objects.length;s++){var n;const o=this._objects[s];(n=this.canvas)!==null&&n!==void 0&&n.preserveObjectStacking&&o.group!==this?(t.save(),t.transform(...xe(this.calcTransformMatrix())),o.render(t),t.restore()):o.group===this&&o.render(t)}this._drawClipPath(t,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((t=>t.setCoords()))}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(y({target:this,type:Fo},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const r=this.includeDefaultValues;return this._objects.filter((function(n){return!n.excludeFromExport})).map((function(n){const s=n.includeDefaultValues;n.includeDefaultValues=r;const o=n[t||"toObject"](e);return n.includeDefaultValues=s,o}))}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return y(y(y({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject((t=>{this._watchObject(!1,t),t.dispose()})),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=Re.prototype._toSVG.call(this),r=e.indexOf("COMMON_PARTS");e[r]='for="group" ';const n=e.join("");return t?t(n):n}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(t);r&&e.push("		",r);for(let n=0;n<this._objects.length;n++)e.push("		",this._objects[n].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],r=this._createSVGBgRect(t);r&&e.push("	",r);for(let n=0;n<this._objects.length;n++)e.push("	",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:r,objects:n=[],layoutManager:s}=t,o=bt(t,x1);return Promise.all([Zr(n,e),ws(o,e)]).then((a=>{let[l,c]=a;const h=new this(l,y(y(y({},o),c),{},{layoutManager:new y1}));if(s){const u=X.getClass(s.type),f=X.getClass(s.strategy);h.layoutManager=new u(new f)}else h.layoutManager=new Qr;return h.layoutManager.subscribeTargets({type:Mi,target:h,targets:h.getObjects()}),h.setCoords(),h}))}}v(Ae,"type","Group"),v(Ae,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),X.setClass(Ae);const gd=(i,t)=>Math.min(t.width/i.width,t.height/i.height),pd=(i,t)=>Math.max(t.width/i.width,t.height/i.height),Ol="\\s*,?\\s*",wn="".concat(Ol,"(").concat(ze,")"),w1="".concat(wn).concat(wn).concat(wn).concat(Ol,"([01])").concat(Ol,"([01])").concat(wn).concat(wn),b1={m:"l",M:"L"},S1=(i,t,e,r,n,s,o,a,l,c,h)=>{const u=Ye(i),f=Xe(i),d=Ye(t),g=Xe(t),p=e*n*d-r*s*g+o,x=r*n*d+e*s*g+a;return["C",c+l*(-e*n*f-r*s*u),h+l*(-r*n*f+e*s*u),p+l*(e*n*g+r*s*d),x+l*(r*n*g-e*s*d),p,x]},Qh=(i,t,e,r)=>{const n=Math.atan2(t,i),s=Math.atan2(r,e);return s>=n?s-n:2*Math.PI-(n-s)};function El(i,t,e,r,n,s,o,a){let l;if(lt.cachesBoundsOfCurve&&(l=[...arguments].join(),zn.boundsOfCurveCache[l]))return zn.boundsOfCurveCache[l];const c=Math.sqrt,h=Math.abs,u=[],f=[[0,0],[0,0]];let d=6*i-12*e+6*n,g=-3*i+9*e-9*n+3*o,p=3*e-3*i;for(let w=0;w<2;++w){if(w>0&&(d=6*t-12*r+6*s,g=-3*t+9*r-9*s+3*a,p=3*r-3*t),h(g)<1e-12){if(h(d)<1e-12)continue;const H=-p/d;0<H&&H<1&&u.push(H);continue}const M=d*d-4*p*g;if(M<0)continue;const I=c(M),A=(-d+I)/(2*g);0<A&&A<1&&u.push(A);const j=(-d-I)/(2*g);0<j&&j<1&&u.push(j)}let x=u.length;const _=x,S=_d(i,t,e,r,n,s,o,a);for(;x--;){const{x:w,y:M}=S(u[x]);f[0][x]=w,f[1][x]=M}f[0][_]=i,f[1][_]=t,f[0][_+1]=o,f[1][_+1]=a;const T=[new C(Math.min(...f[0]),Math.min(...f[1])),new C(Math.max(...f[0]),Math.max(...f[1]))];return lt.cachesBoundsOfCurve&&(zn.boundsOfCurveCache[l]=T),T}const C1=(i,t,e)=>{let[r,n,s,o,a,l,c,h]=e;const u=((f,d,g,p,x,_,S)=>{if(g===0||p===0)return[];let T=0,w=0,M=0;const I=Math.PI,A=S*gc,j=Xe(A),H=Ye(A),N=.5*(-H*f-j*d),V=.5*(-H*d+j*f),et=g**2,nt=p**2,J=V**2,gt=N**2,D=et*nt-et*J-nt*gt;let k=Math.abs(g),O=Math.abs(p);if(D<0){const re=Math.sqrt(1-D/(et*nt));k*=re,O*=re}else M=(x===_?-1:1)*Math.sqrt(D/(et*J+nt*gt));const $=M*k*V/O,W=-M*O*N/k,it=H*$-j*W+.5*f,ot=j*$+H*W+.5*d;let Dt=Qh(1,0,(N-$)/k,(V-W)/O),St=Qh((N-$)/k,(V-W)/O,(-N-$)/k,(-V-W)/O);_===0&&St>0?St-=2*I:_===1&&St<0&&(St+=2*I);const de=Math.ceil(Math.abs(St/I*2)),Rt=[],zt=St/de,pn=8/3*Math.sin(zt/4)*Math.sin(zt/4)/Math.sin(zt/2);let Dr=Dt+zt;for(let re=0;re<de;re++)Rt[re]=S1(Dt,Dr,H,j,k,O,it,ot,pn,T,w),T=Rt[re][5],w=Rt[re][6],Dt=Dr,Dr+=zt;return Rt})(c-i,h-t,n,s,a,l,o);for(let f=0,d=u.length;f<d;f++)u[f][1]+=i,u[f][2]+=t,u[f][3]+=i,u[f][4]+=t,u[f][5]+=i,u[f][6]+=t;return u},md=i=>{let t=0,e=0,r=0,n=0;const s=[];let o,a=0,l=0;for(const c of i){const h=[...c];let u;switch(h[0]){case"l":h[1]+=t,h[2]+=e;case"L":t=h[1],e=h[2],u=["L",t,e];break;case"h":h[1]+=t;case"H":t=h[1],u=["L",t,e];break;case"v":h[1]+=e;case"V":e=h[1],u=["L",t,e];break;case"m":h[1]+=t,h[2]+=e;case"M":t=h[1],e=h[2],r=h[1],n=h[2],u=["M",t,e];break;case"c":h[1]+=t,h[2]+=e,h[3]+=t,h[4]+=e,h[5]+=t,h[6]+=e;case"C":a=h[3],l=h[4],t=h[5],e=h[6],u=["C",h[1],h[2],a,l,t,e];break;case"s":h[1]+=t,h[2]+=e,h[3]+=t,h[4]+=e;case"S":o==="C"?(a=2*t-a,l=2*e-l):(a=t,l=e),t=h[3],e=h[4],u=["C",a,l,h[1],h[2],t,e],a=u[3],l=u[4];break;case"q":h[1]+=t,h[2]+=e,h[3]+=t,h[4]+=e;case"Q":a=h[1],l=h[2],t=h[3],e=h[4],u=["Q",a,l,t,e];break;case"t":h[1]+=t,h[2]+=e;case"T":o==="Q"?(a=2*t-a,l=2*e-l):(a=t,l=e),t=h[1],e=h[2],u=["Q",a,l,t,e];break;case"a":h[6]+=t,h[7]+=e;case"A":C1(t,e,h).forEach((f=>s.push(f))),t=h[6],e=h[7];break;case"z":case"Z":t=r,e=n,u=["Z"]}u?(s.push(u),o=u[0]):o=""}return s},Lo=(i,t,e,r)=>Math.sqrt((e-i)**2+(r-t)**2),_d=(i,t,e,r,n,s,o,a)=>l=>{const c=l**3,h=(d=>3*d**2*(1-d))(l),u=(d=>3*d*(1-d)**2)(l),f=(d=>(1-d)**3)(l);return new C(o*c+n*h+e*u+i*f,a*c+s*h+r*u+t*f)},vd=i=>i**2,xd=i=>2*i*(1-i),yd=i=>(1-i)**2,T1=(i,t,e,r,n,s,o,a)=>l=>{const c=vd(l),h=xd(l),u=yd(l),f=3*(u*(e-i)+h*(n-e)+c*(o-n)),d=3*(u*(r-t)+h*(s-r)+c*(a-s));return Math.atan2(d,f)},k1=(i,t,e,r,n,s)=>o=>{const a=vd(o),l=xd(o),c=yd(o);return new C(n*a+e*l+i*c,s*a+r*l+t*c)},O1=(i,t,e,r,n,s)=>o=>{const a=1-o,l=2*(a*(e-i)+o*(n-e)),c=2*(a*(r-t)+o*(s-r));return Math.atan2(c,l)},tu=(i,t,e)=>{let r=new C(t,e),n=0;for(let s=1;s<=100;s+=1){const o=i(s/100);n+=Lo(r.x,r.y,o.x,o.y),r=o}return n},E1=(i,t)=>{let e,r=0,n=0,s={x:i.x,y:i.y},o=y({},s),a=.01,l=0;const c=i.iterator,h=i.angleFinder;for(;n<t&&a>1e-4;)o=c(r),l=r,e=Lo(s.x,s.y,o.x,o.y),e+n>t?(r-=a,a/=2):(s=o,r+=a,n+=e);return y(y({},o),{},{angle:h(l)})},Rc=i=>{let t,e,r=0,n=0,s=0,o=0,a=0;const l=[];for(const c of i){const h={x:n,y:s,command:c[0],length:0};switch(c[0]){case"M":e=h,e.x=o=n=c[1],e.y=a=s=c[2];break;case"L":e=h,e.length=Lo(n,s,c[1],c[2]),n=c[1],s=c[2];break;case"C":t=_d(n,s,c[1],c[2],c[3],c[4],c[5],c[6]),e=h,e.iterator=t,e.angleFinder=T1(n,s,c[1],c[2],c[3],c[4],c[5],c[6]),e.length=tu(t,n,s),n=c[5],s=c[6];break;case"Q":t=k1(n,s,c[1],c[2],c[3],c[4]),e=h,e.iterator=t,e.angleFinder=O1(n,s,c[1],c[2],c[3],c[4]),e.length=tu(t,n,s),n=c[3],s=c[4];break;case"Z":e=h,e.destX=o,e.destY=a,e.length=Lo(n,s,o,a),n=o,s=a}r+=e.length,l.push(e)}return l.push({length:r,x:n,y:s}),l},wd=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rc(i),r=0;for(;t-e[r].length>0&&r<e.length-2;)t-=e[r].length,r++;const n=e[r],s=t/n.length,o=i[r];switch(n.command){case"M":return{x:n.x,y:n.y,angle:0};case"Z":return y(y({},new C(n.x,n.y).lerp(new C(n.destX,n.destY),s)),{},{angle:Math.atan2(n.destY-n.y,n.destX-n.x)});case"L":return y(y({},new C(n.x,n.y).lerp(new C(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-n.y,o[1]-n.x)});case"C":case"Q":return E1(n,t)}},D1=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),eu=new RegExp(w1,"g"),M1=new RegExp(ze,"gi"),A1={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},bd=i=>{var t;const e=[],r=(t=i.match(D1))!==null&&t!==void 0?t:[];for(const n of r){const s=n[0];if(s==="z"||s==="Z"){e.push([s]);continue}const o=A1[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){eu.lastIndex=0;for(let l=null;l=eu.exec(n);)a.push(...l.slice(1))}else a=n.match(M1)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),h=b1[s];c[0]=l>0&&h?h:s;for(let u=0;u<o;u++)c[u+1]=parseFloat(a[l+u]);e.push(c)}}return e},Sd=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new C(i[0]),r=new C(i[1]),n=1,s=0;const o=[],a=i.length,l=a>2;let c;for(l&&(n=i[2].x<r.x?-1:i[2].x===r.x?0:1,s=i[2].y<r.y?-1:i[2].y===r.y?0:1),o.push(["M",e.x-n*t,e.y-s*t]),c=1;c<a;c++){if(!e.eq(r)){const h=e.midPointFrom(r);o.push(["Q",e.x,e.y,h.x,h.y])}e=i[c],c+1<i.length&&(r=i[c+1])}return l&&(n=e.x>i[c-2].x?1:e.x===i[c-2].x?0:-1,s=e.y>i[c-2].y?1:e.y===i[c-2].y?0:-1),o.push(["L",e.x+n*t,e.y+s*t]),o},Ic=(i,t)=>i.map((e=>e.map(((r,n)=>n===0||t===void 0?r:vt(r,t))).join(" "))).join(" ");function jo(i,t){const e=i.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach((r=>{let[n,s]=r;return e.setProperty(n,s)})))}const P1=(i,t)=>Math.floor(Math.random()*(t-i+1))+i;function F1(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.onComplete||mr,r=new(xs()).XMLHttpRequest,n=t.signal,s=function(){r.abort()},o=function(){n&&n.removeEventListener("abort",s),r.onerror=r.ontimeout=mr};if(n&&n.aborted)throw new lf("request");return n&&n.addEventListener("abort",s,{once:!0}),r.onreadystatechange=function(){r.readyState===4&&(o(),e(r),r.onreadystatechange=mr)},r.onerror=r.ontimeout=o,r.open("get",i,!0),r.send(),r}const L1=(i,t)=>{let e=i._findCenterFromElement();i.transformMatrix&&((r=>{if(r.transformMatrix){const{scaleX:n,scaleY:s,angle:o,skewX:a}=Kr(r.transformMatrix);r.flipX=!1,r.flipY=!1,r.set(ie,n),r.set(we,s),r.angle=o,r.skewX=a,r.skewY=0}})(i),e=e.transform(i.transformMatrix)),delete i.transformMatrix,t&&(i.scaleX*=t.scaleX,i.scaleY*=t.scaleY,i.cropX=t.cropX,i.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,i.width=t.width,i.height=t.height),i.setPositionByOrigin(e,rt,rt)};var tn=Object.freeze({__proto__:null,addTransformToObject:Of,animate:Mc,animateColor:Wf,applyTransformToObject:Jr,calcAngleBetweenVectors:Ao,calcDimensionsMatrix:ys,calcPlaneChangeMatrix:bs,calcVectorRotation:Hf,cancelAnimFrame:mf,capValue:xr,composeMatrix:wf,copyCanvasElement:i=>{var t;const e=be(i);return(t=e.getContext("2d"))===null||t===void 0||t.drawImage(i,0,0),e},cos:Ye,createCanvasElement:mi,createImage:_f,createRotateMatrix:Cr,createScaleMatrix:ta,createSkewXMatrix:wc,createSkewYMatrix:bc,createTranslateMatrix:cn,createVector:Do,crossProduct:Yr,degreesToRadians:Mt,dotProduct:Nf,ease:Am,enlivenObjectEnlivables:ws,enlivenObjects:Zr,findScaleToCover:pd,findScaleToFit:gd,getBoundsOfCurve:El,getOrthonormalVector:Ec,getPathSegmentsInfo:Rc,getPointOnPath:wd,getPointer:kf,getRandomInt:P1,getRegularPolygonPath:(i,t)=>{const e=2*Math.PI/i;let r=-Qi;i%2==0&&(r+=e/2);const n=new Array(i+1);for(let s=0;s<i;s++){const o=s*e+r,{x:a,y:l}=new C(Ye(o),Xe(o)).scalarMultiply(t);n[s]=[s===0?"M":"L",a,l]}return n[i]=["Z"],n},getSmoothPathFromPoints:Sd,getSvgAttributes:i=>{const t=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:na,groupSVGElements:(i,t)=>i&&i.length===1?i[0]:new Ae(i,t),hasStyleChanged:aa,invertTransform:xe,isBetweenVectors:yl,isIdentityMatrix:vf,isTouchEvent:To,isTransparent:sd,joinPath:Ic,loadImage:Nn,magnitude:Mo,makeBoundingBoxFromPoints:ci,makePathSimpler:md,matrixToSVG:qr,mergeClipPaths:(i,t)=>{var e;let r=i,n=t;r.inverted&&!n.inverted&&(r=t,n=i),xl(n,(e=n.group)===null||e===void 0?void 0:e.calcTransformMatrix(),r.calcTransformMatrix());const s=r.inverted&&n.inverted;return s&&(r.inverted=n.inverted=!1),new Ae([r],{clipPath:n,inverted:s})},multiplyTransformMatrices:At,multiplyTransformMatrixArray:Qo,parsePath:bd,parsePreserveAspectRatioAttribute:Ff,parseUnit:_r,pick:Tr,projectStrokeOnPoints:ad,qrDecompose:Kr,radiansToDegrees:_i,removeFromArray:ar,removeTransformFromObject:(i,t)=>{const e=xe(t),r=At(e,i.calcOwnMatrix());Jr(i,r)},removeTransformMatrixForSvgParsing:L1,request:F1,requestAnimFrame:Hn,resetObjectTransform:Ef,rotatePoint:(i,t,e)=>i.rotate(e,t),rotateVector:Oc,saveObjectTransform:Cc,sendObjectToPlane:xl,sendPointToPlane:Pi,sendVectorToPlane:Df,setStyle:jo,sin:Xe,sizeAfterTransform:ea,string:Km,stylesFromArray:hd,stylesToArray:cd,toBlob:yc,toDataURL:xc,toFixed:vt,transformPath:(i,t,e)=>(e&&(t=At(t,[1,0,0,1,-e.x,-e.y])),i.map((r=>{const n=[...r];for(let s=1;s<r.length-1;s+=2){const{x:o,y:a}=Yt({x:r[s],y:r[s+1]},t);n[s]=o,n[s+1]=a}return n}))),transformPoint:Yt});class j1 extends Tf{constructor(t){let{allowTouchScrolling:e=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),v(this,"upper",void 0),v(this,"container",void 0);const{el:n}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(n,{allowTouchScrolling:e}),this.applyCanvasStyle(s,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),n.parentNode&&n.parentNode.replaceChild(o,n),o.append(n,s),this.container=o}createUpperCanvas(){const{el:t}=this.lower,e=mi();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=on().createElement("div");return t.setAttribute("data-fabric","wrapper"),jo(t,{position:"relative"}),Dh(t),t}applyCanvasStyle(t,e){const{styles:r,allowTouchScrolling:n}=e;jo(t,y(y({},r),{},{"touch-action":n?"manipulation":ue})),Dh(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:r,ctx:n}=this.upper;Cf(r,n,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),vl(this.upper.el,t),vl(this.container,t)}cleanupDOM(t){const e=this.container,{el:r}=this.lower,{el:n}=this.upper;super.cleanupDOM(t),e.removeChild(n),e.removeChild(r),e.parentNode&&e.parentNode.replaceChild(r,e)}dispose(){super.dispose(),pi().dispose(this.upper.el),delete this.upper,delete this.container}}class ca extends hn{constructor(){super(...arguments),v(this,"targets",[]),v(this,"_hoveredTargets",[]),v(this,"_currentTransform",null),v(this,"_groupSelector",null),v(this,"contextTopDirty",!1)}static getDefaults(){return y(y({},super.getDefaults()),ca.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new j1(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter((e=>!e.group&&e!==t)).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),r=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,r){const n=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-e+n,-r+n),s.transform(...this.viewportTransform);const o=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(s),t.selectionBackgroundColor=o,s.restore();const a=Math.round(n*this.getRetinaScaling());return sd(s,a,a,a)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find((r=>!!r&&t[r]===!0)):t[e])}_shouldClearSelection(t,e){const r=this.getActiveObjects(),n=this._activeObject;return!!(!e||e&&n&&r.length>1&&r.indexOf(e)===-1&&n!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&n&&n!==e)}_shouldCenterTransform(t,e,r){if(!t)return;let n;return e===Jo||e===ie||e===we||e===es?n=this.centeredScaling||t.centeredScaling:e===_c&&(n=this.centeredRotation||t.centeredRotation),n?!r:r}_getOriginFromCorner(t,e){const r={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?r.x=Ft:["mr","tr","br"].includes(e)&&(r.x=dt),["tl","mt","tr"].includes(e)?r.y=_l:["bl","mb","br"].includes(e)&&(r.y=he)),r}_setupCurrentTransform(t,e,r){var n;const s=e.group?Pi(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:o="",control:a}=e.getActiveControl()||{},l=r&&a?(n=a.getActionHandler(t,e,a))===null||n===void 0?void 0:n.bind(a):Pf,c=((d,g,p,x)=>{if(!g||!d)return"drag";const _=x.controls[g];return _.getActionName(p,_,x)})(r,o,t,e),h=t[this.centeredKey],u=this._shouldCenterTransform(e,c,h)?{x:rt,y:rt}:this._getOriginFromCorner(e,o),f={target:e,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:s.x-e.left,offsetY:s.y-e.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Mt(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:h,original:y(y({},Cc(e)),{},{originX:u.x,originY:u.y})};this._currentTransform=f,this.fire("before:transform",{e:t,transform:f})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:r,deltaX:n,deltaY:s}=this._groupSelector,o=new C(e,r).transform(this.viewportTransform),a=new C(e+n,r+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),h=Math.min(o.y,a.y),u=Math.max(o.x,a.x),f=Math.max(o.y,a.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(c,h,u-c,f-h)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,c+=l,h+=l,u-=l,f-=l,Gt.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(c,h,u-c,f-h))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),r=this._activeObject,n=this.getActiveObjects();if(this.targets=[],r&&n.length>=1){if(r.findControl(e,To(t))||n.length>1&&this.searchPossibleTargets([r],e))return r;if(r===this.searchPossibleTargets([r],e)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&o&&o!==r?(this.targets=s,r):o}return r}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let r=t.getCoords();const n=this.getZoom(),s=t.padding/n;if(s){const[o,a,l,c]=r,h=Math.atan2(a.y-o.y,a.x-o.x),u=Ye(h)*s,f=Xe(h)*s,d=u+f,g=u-f;r=[new C(o.x-g,o.y-d),new C(a.x+d,a.y-g),new C(l.x+g,l.y+d),new C(c.x-d,c.y+g)]}return Ot.isPointInPolygon(e,r)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,Pi(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let r=t.length;for(;r--;){const n=t[r];if(this._checkTarget(n,e)){if(ho(n)&&n.subTargetCheck){const s=this._searchPossibleTargets(n._objects,e);s&&this.targets.push(s)}return n}}}searchPossibleTargets(t,e){const r=this._searchPossibleTargets(t,e);if(r&&ho(r)&&r.interactive&&this.targets[0]){const n=this.targets;for(let s=n.length-1;s>0;s--){const o=n[s];if(!ho(o)||!o.interactive)return o}return n[0]}return r}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,n=r.getBoundingClientRect();let s=kf(t),o=n.width||0,a=n.height||0;o&&a||(he in n&&_l in n&&(a=Math.abs(n.top-n.bottom)),Ft in n&&dt in n&&(o=Math.abs(n.right-n.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,e||(s=Pi(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const c=o===0||a===0?new C(1,1):new C(r.width/o,r.height/a);return s.multiply(c)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=mi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return lr(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let r=!1,n=!1;const s=this.getActiveObjects(),o=[],a=[];t.forEach((l=>{s.includes(l)||(r=!0,l.fire("deselected",{e,target:l}),a.push(l))})),s.forEach((l=>{t.includes(l)||(r=!0,l.fire("selected",{e,target:l}),o.push(l))})),t.length>0&&s.length>0?(n=!0,r&&this.fire("selection:updated",{e,selected:o,deselected:a})):s.length>0?(n=!0,this.fire("selection:created",{e,selected:o})):t.length>0&&(n=!0,this.fire("selection:cleared",{e,deselected:a})),n&&(this._objectsToRender=void 0)}setActiveObject(t,e){const r=this.getActiveObjects(),n=this._setActiveObject(t,e);return this._fireSelectionEvents(r,e),n}_setActiveObject(t,e){const r=this._activeObject;return r!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,lr(t)&&r!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const r=this._activeObject;return!!r&&!r.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(t),lr(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),r=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[r]});const n=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),n}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,r=e.target,n={e:t,target:r,transform:e,action:e.action};r._scaling&&(r._scaling=!1),r.setCoords(),e.actionPerformed&&(this.fire("object:modified",n),r.fire(So,n))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;lr(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,r){const n=this._realizeGroupTransformOnObject(t),s=super._toObject(t,e,r);return t.set(n),s}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&lr(e)&&this._activeObject===e){const r=Tr(t,["angle","flipX","flipY",dt,ie,we,an,ln,he]);return Of(t,e.calcOwnMatrix()),r}return{}}_setSVGObject(t,e,r){const n=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,r),e.set(n)}}v(ca,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class R1{constructor(t){v(this,"targets",[]),v(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:n}=t.getActiveObject()||{};n&&n.focus()},r=t.upperCanvasEl;r.addEventListener("click",e),this.__disposer=()=>r.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach((t=>{t.isEditing&&t.exitEditing()}))}add(t){this.targets.push(t)}remove(t){this.unregister(t),ar(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const I1=["target","oldTarget","fireCanvas","e"],pe={passive:!1},Pr=(i,t)=>{const e=i.getViewportPoint(t),r=i.getScenePoint(t);return{viewportPoint:e,scenePoint:r,pointer:e,absolutePointer:r}},Hi=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return i.addEventListener(...e)},Se=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return i.removeEventListener(...e)},B1={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Dl extends ca{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),v(this,"_isClick",void 0),v(this,"textEditingManager",new R1(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((e=>{this[e]=this[e].bind(this)})),this.addOrRemove(Hi,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const r=this.upperCanvasEl,n=this._getEventPrefix();t(Sf(r),"resize",this._onResize),t(r,n+"down",this._onMouseDown),t(r,"".concat(n,"move"),this._onMouseMove,pe),t(r,"".concat(n,"out"),this._onMouseOut),t(r,"".concat(n,"enter"),this._onMouseEnter),t(r,"wheel",this._onMouseWheel,{passive:!1}),t(r,"contextmenu",this._onContextMenu),t(r,"click",this._onClick),t(r,"dblclick",this._onClick),t(r,"dragstart",this._onDragStart),t(r,"dragend",this._onDragEnd),t(r,"dragover",this._onDragOver),t(r,"dragenter",this._onDragEnter),t(r,"dragleave",this._onDragLeave),t(r,"drop",this._onDrop),this.enablePointerEvents||t(r,"touchstart",this._onTouchStart,pe)}removeListeners(){this.addOrRemove(Se,"remove");const t=this._getEventPrefix(),e=Be(this.upperCanvasEl);Se(e,"".concat(t,"up"),this._onMouseUp),Se(e,"touchend",this._onTouchEnd,pe),Se(e,"".concat(t,"move"),this._onMouseMove,pe),Se(e,"touchmove",this._onMouseMove,pe),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,r=y({e:t},Pr(this,t));this.fire("mouse:out",y(y({},r),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",y({},r)),this._hoveredTargets.forEach((n=>{this.fire("mouse:out",y(y({},r),{},{target:n})),n&&n.fire("mouseout",y({},r))})),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",y({e:t},Pr(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const r={e:t,target:e};return this.fire("dragstart",r),e.fire("dragstart",r),void Hi(this.upperCanvasEl,"drag",this._onDragProgress)}Mh(t)}_renderDragEffects(t,e,r){let n=!1;const s=this._dropTarget;s&&s!==e&&s!==r&&(s.clearContextTop(),n=!0),e?.clearContextTop(),r!==e&&r?.clearContextTop();const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),e&&(o.save(),e.transform(o),e.renderDragSourceEffect(t),o.restore(),n=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(t),o.restore(),n=!0),o.restore(),n&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==ue,r=e?this._activeObject:void 0,n={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:r};Se(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n),this._dragSource&&this._dragSource.fire("dragend",n),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:r,targets:n}=this.findDragTargets(t),s=this._dragSource,o={e:t,target:r,subTargets:n,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(e,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(t)&&(a=r),r.fire(e,o));for(let l=0;l<n.length;l++){const c=n[l];c.canDrop(t)&&(a=c),c.fire(e,o)}this._renderDragEffects(t,s,a),this._dropTarget=a}_onDragEnter(t){const{target:e,targets:r}=this.findDragTargets(t),n={e:t,target:e,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",n),this._fireEnterLeaveEvents(e,n)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:r}=this.findDragTargets(t),n=this._basicEventHandler("drop:before",y({e:t,target:e,subTargets:r,dragSource:this._dragSource},Pr(this,t)));n.didDrop=!1,n.dropTarget=void 0,this._basicEventHandler("drop",n),this.fire("drop:after",n)}_onContextMenu(t){const e=this.findTarget(t),r=this.targets||[],n=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:r});return this.stopContextMenu&&Mh(t),this._basicEventHandler("contextmenu",n),!1}_onClick(t){const e=t.detail;e>3||e<2||(this._cacheTransformEventData(t),e==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),e==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let e=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||r&&this._target===r)&&(e=!0),e&&t.preventDefault(),this._resetTransformEventData();const n=this.upperCanvasEl,s=this._getEventPrefix(),o=Be(n);Hi(o,"touchend",this._onTouchEnd,pe),e&&Hi(o,"touchmove",this._onMouseMove,pe),Se(n,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,r=this._getEventPrefix();Se(e,"".concat(r,"move"),this._onMouseMove,pe);const n=Be(e);Hi(n,"".concat(r,"up"),this._onMouseUp),Hi(n,"".concat(r,"move"),this._onMouseMove,pe)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),r=Be(this.upperCanvasEl);Se(r,"touchend",this._onTouchEnd,pe),Se(r,"touchmove",this._onMouseMove,pe),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{Hi(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(t)){const n=Be(this.upperCanvasEl);Se(n,"".concat(r,"up"),this._onMouseUp),Se(n,"".concat(r,"move"),this._onMouseMove,pe),Hi(e,"".concat(r,"move"),this._onMouseMove,pe)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const r=this._currentTransform,n=this._isClick,s=this._target,{button:o}=t;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(t),c=r.actionPerformed),!n){const h=s===this._activeObject;this.handleSelection(t),c||(c=this._shouldRender(s)||!h&&s===this._activeObject)}if(s){const h=s.findControl(this.getViewportPoint(t),To(t)),{key:u,control:f}=h||{};if(l=u,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,t),c=!0;else if(f){const d=f.getMouseUpHandler(t,s,f);d&&(a=this.getScenePoint(t),d.call(f,t,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==l)){const h=r.target&&r.target.controls[r.corner],u=h&&h.getMouseUpHandler(t,r.target,h);a=a||this.getScenePoint(t),u&&u.call(h,t,r,a.x,a.y)}this._setCursorFromEvent(t,s),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),c?this.requestRenderAll():n||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:r,subTargets:n=[]}=e;this.fire(t,e),r&&r.fire(t,e);for(let s=0;s<n.length;s++)n[s]!==r&&n[s].fire(t,e);return e}_handleEvent(t,e,r){const n=this._target,s=this.targets||[],o=y(y(y({e:t,target:n,subTargets:s},Pr(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),e==="down:before"||e==="down"?r:{});this.fire("mouse:".concat(e),o),n&&n.fire("mouse".concat(e),o);for(let a=0;a<s.length;a++)s[a]!==n&&s[a].fire("mouse".concat(e),o)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target,r=!!e&&e===this._activeObject;const{button:n}=t;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(t,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let s=this._shouldRender(e),o=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,o=!0,s=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const a=this.getScenePoint(t);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(r=!!e&&e===this._activeObject,e){e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const a=e.findControl(this.getViewportPoint(t),To(t));if(e===this._activeObject&&(a||!o)){this._setupCurrentTransform(t,e,r);const l=a?a.control:void 0,c=this.getScenePoint(t),h=l&&l.getMouseDownHandler(t,e,l);h&&h.call(l,t,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=Pi(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const r=this.getScenePoint(t);e.deltaX=r.x-e.x,e.deltaY=r.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const r=this.findTarget(t);this._setCursorFromEvent(t,r),this._fireOverOutEvents(t,r)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const r=this._hoveredTarget,n=this._hoveredTargets,s=this.targets,o=Math.max(n.length,s.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)s[a]===e||n[a]&&n[a]===r||this.fireSyntheticInOutEvents("mouse",{e:t,target:s[a],oldTarget:n[a]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const r=this._draggedoverTarget,n=this._hoveredTargets,s=this.targets,o=Math.max(n.length,s.length);this.fireSyntheticInOutEvents("drag",y(y({},e),{},{target:t,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",y(y({},e),{},{target:s[a],oldTarget:n[a]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:r,oldTarget:n,fireCanvas:s,e:o}=e,a=bt(e,I1);const{targetIn:l,targetOut:c,canvasIn:h,canvasOut:u}=B1[t],f=n!==r;if(n&&f){const d=y(y({},a),{},{e:o,target:n,nextTarget:r},Pr(this,o));s&&this.fire(u,d),n.fire(c,d)}if(r&&f){const d=y(y({},a),{},{e:o,target:r,previousTarget:n},Pr(this,o));s&&this.fire(h,d),r.fire(l,d)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),r=this._currentTransform,n=r.target,s=n.group?Pi(e,void 0,n.group.calcTransformMatrix()):e;r.shiftKey=t.shiftKey,r.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,r){const{action:n,actionHandler:s,target:o}=e,a=!!s&&s(t,e,r.x,r.y);a&&o.setCoords(),n==="drag"&&a&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let r=e.hoverCursor||this.hoverCursor;const n=lr(this._activeObject)?this._activeObject:null,s=(!n||e.group!==n)&&e.findControl(this.getViewportPoint(t));if(s){const o=s.control;this.setCursor(o.cursorStyleHandler(t,o,e))}else e.subTargetCheck&&this.targets.concat().reverse().map((o=>{r=o.hoverCursor||r})),this.setCursor(r)}handleMultiSelection(t,e){const r=this._activeObject,n=lr(r);if(r&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(r!==e||n)&&(n||!e.isDescendantOf(r)&&!r.isDescendantOf(e))&&!e.onSelect({e:t})&&!r.getActiveControl()){if(n){const s=r.getObjects();if(e===r){const o=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(s,o)||this.searchPossibleTargets(this._objects,o))||!e.selectable)return!1}e.group===r?(r.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),t)):(r.multiSelectAdd(e),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,t)}else{r.isEditing&&r.exitEditing();const s=new(X.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,e),this._hoveredTarget=s,this._setActiveObject(s,t),this._fireSelectionEvents([r],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:r,deltaX:n,deltaY:s}=this._groupSelector,o=new C(e,r),a=o.add(new C(n,s)),l=o.min(a),c=o.max(a).subtract(l),h=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),u=o.eq(a)?h[0]?[h[0]]:[]:h.length>1?h.filter((f=>!f.onSelect({e:t}))).reverse():h;if(u.length===1)this.setActiveObject(u[0],t);else if(u.length>1){const f=X.getClass("ActiveSelection");this.setActiveObject(new f(u,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Cd={x1:0,y1:0,x2:0,y2:0},z1=y(y({},Cd),{},{r1:0,r2:0}),Ir=(i,t)=>isNaN(i)&&typeof t=="number"?t:i;function Td(i){return i&&/%$/.test(i)&&Number.isFinite(parseFloat(i))}function kd(i,t){const e=typeof i=="number"?i:typeof i=="string"?parseFloat(i)/(Td(i)?100:1):NaN;return xr(0,Ir(e,t),1)}const H1=/\s*;\s*/,N1=/\s*:\s*/;function U1(i,t){let e,r;const n=i.getAttribute("style");if(n){const o=n.split(H1);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(N1).map((h=>h.trim()));l==="stop-color"?e=c:l==="stop-opacity"&&(r=c)}}const s=new ct(e||i.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:kd(i.getAttribute("offset"),0),color:s.toRgb(),opacity:Ir(parseFloat(r||i.getAttribute("stop-opacity")||""),1)*s.getAlpha()*t}}function W1(i,t){const e=[],r=i.getElementsByTagName("stop"),n=kd(t,1);for(let s=r.length;s--;)e.push(U1(r[s],n));return e}function Od(i){return i.nodeName==="linearGradient"||i.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Ed(i){return i.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Fe(i,t){return i.getAttribute(t)}function Y1(i,t){return(function(e,r){let n,{width:s,height:o,gradientUnits:a}=r;return Object.entries(e).reduce(((l,c)=>{let[h,u]=c;if(u==="Infinity")n=1;else if(u==="-Infinity")n=0;else{const f=typeof u=="string";n=f?parseFloat(u):u,f&&Td(u)&&(n*=.01,a==="pixels"&&(h!=="x1"&&h!=="x2"&&h!=="r2"||(n*=s),h!=="y1"&&h!=="y2"||(n*=o)))}return l[h]=n,l}),{})})(Od(i)==="linear"?(function(e){return{x1:Fe(e,"x1")||0,y1:Fe(e,"y1")||0,x2:Fe(e,"x2")||"100%",y2:Fe(e,"y2")||0}})(i):(function(e){return{x1:Fe(e,"fx")||Fe(e,"cx")||"50%",y1:Fe(e,"fy")||Fe(e,"cy")||"50%",r1:0,x2:Fe(e,"cx")||"50%",y2:Fe(e,"cy")||"50%",r2:Fe(e,"r")||"50%"}})(i),y(y({},t),{},{gradientUnits:Ed(i)}))}class Ps{constructor(t){const{type:e="linear",gradientUnits:r="pixels",coords:n={},colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=t||{};Object.assign(this,{type:e,gradientUnits:r,coords:y(y({},e==="radial"?z1:Cd),n),colorStops:s,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(tr()):tr()})}addColorStop(t){for(const e in t){const r=new ct(t[e]);this.colorStops.push({offset:parseFloat(e),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(t){return y(y({},Tr(this,t)),{},{type:this.type,coords:y({},this.coords),colorStops:this.colorStops.map((e=>y({},e))),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],n=this.gradientTransform?this.gradientTransform.concat():ee.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map((u=>y({},u))).sort(((u,f)=>u.offset-f.offset));let a=-this.offsetX,l=-this.offsetY;var c;s==="objectBoundingBox"?(a/=t.width,l/=t.height):(a+=t.width/2,l+=t.height/2),(c=t)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=t.pathOffset.x,l-=t.pathOffset.y),n[4]-=a,n[5]-=l;const h=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(qr(n),'"'),""].join(" ");if(this.type==="linear"){const{x1:u,y1:f,x2:d,y2:g}=this.coords;r.push("<linearGradient ",h,' x1="',u,'" y1="',f,'" x2="',d,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:u,y1:f,x2:d,y2:g,r1:p,r2:x}=this.coords,_=p>x;r.push("<radialGradient ",h,' cx="',_?u:d,'" cy="',_?f:g,'" r="',_?p:x,'" fx="',_?d:u,'" fy="',_?g:f,`">
`),_&&(o.reverse(),o.forEach((T=>{T.offset=1-T.offset})));const S=Math.min(p,x);if(S>0){const T=S/Math.max(p,x);o.forEach((w=>{w.offset+=T*(1-w.offset)}))}}return o.forEach((u=>{let{color:f,offset:d,opacity:g}=u;r.push("<stop ",'offset="',100*d+"%",'" style="stop-color:',f,g!==void 0?";stop-opacity: "+g:";",`"/>
`)})),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(t){const{x1:e,y1:r,x2:n,y2:s,r1:o,r2:a}=this.coords,l=this.type==="linear"?t.createLinearGradient(e,r,n,s):t.createRadialGradient(e,r,o,n,s,a);return this.colorStops.forEach((c=>{let{color:h,opacity:u,offset:f}=c;l.addColorStop(f,u!==void 0?new ct(h).setAlpha(u).toRgba():h)})),l}static async fromObject(t){const{colorStops:e,gradientTransform:r}=t;return new this(y(y({},t),{},{colorStops:e?e.map((n=>y({},n))):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(t,e,r){const n=Ed(t),s=e._findCenterFromElement();return new this(y({id:t.getAttribute("id")||void 0,type:Od(t),coords:Y1(t,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:W1(t,r.opacity),gradientUnits:n,gradientTransform:Tl(t.getAttribute("gradientTransform")||"")},n==="pixels"?{offsetX:e.width/2-s.x,offsetY:e.height/2-s.y}:{offsetX:0,offsetY:0}))}}v(Ps,"type","Gradient"),X.setClass(Ps,"gradient"),X.setClass(Ps,"linear"),X.setClass(Ps,"radial");const X1=["type","source","patternTransform"];class Ra{get type(){return"pattern"}set type(t){Ji("warn","Setting type has no effect",t)}constructor(t){v(this,"repeat","repeat"),v(this,"offsetX",0),v(this,"offsetY",0),v(this,"crossOrigin",""),this.id=tr(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:r}=this;return y(y({},Tr(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:r,offsetX:vt(this.offsetX,lt.NUM_FRACTION_DIGITS),offsetY:vt(this.offsetY,lt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:r}=t;const{source:n,repeat:s,id:o}=this,a=Ir(this.offsetX/e,0),l=Ir(this.offsetY/r,0),c=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):Ir(n.width/e,0),h=s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):Ir(n.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(h,'">'),'<image x="0" y="0" width="'.concat(n.width,'" height="').concat(n.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:r,source:n,patternTransform:s}=t,o=bt(t,X1);const a=await Nn(n,y(y({},e),{},{crossOrigin:o.crossOrigin}));return new this(y(y({},o),{},{patternTransform:s&&s.slice(0),source:a}))}}v(Ra,"type","Pattern"),X.setClass(Ra),X.setClass(Ra,"pattern");class V1{constructor(t){v(this,"color","rgb(0, 0, 0)"),v(this,"width",1),v(this,"shadow",null),v(this,"strokeLineCap","round"),v(this,"strokeLineJoin","round"),v(this,"strokeMiterLimit",10),v(this,"strokeDashArray",null),v(this,"limitedToCanvasSize",!1),this.canvas=t}_setBrushStyles(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])}_saveAndTransform(t){const e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}needsFullRender(){return new ct(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const t=this.canvas,e=this.shadow,r=t.contextTop,n=t.getZoom()*t.getRetinaScaling();r.shadowColor=e.color,r.shadowBlur=e.blur*n,r.shadowOffsetX=e.offsetX*n,r.shadowOffsetY=e.offsetY*n}_resetShadow(){const t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}_isOutSideCanvas(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}const G1=["path","left","top"],$1=["d"];class Ei extends Gt{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:n,top:s}=e,o=bt(e,G1);super(),Object.assign(this,Ei.ownDefaults),this.setOptions(o),this._setPath(t||[],!0),typeof n=="number"&&this.set(dt,n),typeof s=="number"&&this.set(he,s)}_setPath(t,e){this.path=md(Array.isArray(t)?t:bd(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new C(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,r=-this.pathOffset.y;t.beginPath();for(const n of this.path)switch(n[0]){case"L":t.lineTo(n[1]+e,n[2]+r);break;case"M":t.moveTo(n[1]+e,n[2]+r);break;case"C":t.bezierCurveTo(n[1]+e,n[2]+r,n[3]+e,n[4]+r,n[5]+e,n[6]+r);break;case"Q":t.quadraticCurveTo(n[1]+e,n[2]+r,n[3]+e,n[4]+r);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return y(y({},super.toObject(t)),{},{path:this.path.map((e=>e.slice()))})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=Ic(this.path,lt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=lt.NUM_FRACTION_DIGITS;return" translate(".concat(vt(-this.pathOffset.x,t),", ").concat(vt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:r,pathOffset:n}=this._calcDimensions();this.set({width:e,height:r,pathOffset:n}),t&&this.setPositionByOrigin(n,rt,rt)}_calcBoundsFromPath(){const t=[];let e=0,r=0,n=0,s=0;for(const o of this.path)switch(o[0]){case"L":n=o[1],s=o[2],t.push({x:e,y:r},{x:n,y:s});break;case"M":n=o[1],s=o[2],e=n,r=s;break;case"C":t.push(...El(n,s,o[1],o[2],o[3],o[4],o[5],o[6])),n=o[5],s=o[6];break;case"Q":t.push(...El(n,s,o[1],o[2],o[1],o[2],o[3],o[4])),n=o[3],s=o[4];break;case"Z":n=e,s=r}return ci(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return y(y({},t),{},{pathOffset:new C(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,r){const n=Bi(t,this.ATTRIBUTE_NAMES,r),{d:s}=n;return new this(s,y(y(y({},bt(n,$1)),e),{},{left:void 0,top:void 0}))}}v(Ei,"type","Path"),v(Ei,"cacheProperties",[...Ii,"path","fillRule"]),v(Ei,"ATTRIBUTE_NAMES",[...rr,"d"]),X.setClass(Ei),X.setSVGClass(Ei);class rs extends V1{constructor(t){super(t),v(this,"decimate",.4),v(this,"drawStraightLine",!1),v(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(t,e,r){const n=e.midPointFrom(r);return t.quadraticCurveTo(e.x,e.y,n.x,n.y),n}onMouseDown(t,e){let{e:r}=e;this.canvas._isMainEvent(r)&&(this.drawStraightLine=!!this.straightLineKey&&r[this.straightLineKey],this._prepareForDrawing(t),this._addPoint(t),this._render())}onMouseMove(t,e){let{e:r}=e;if(this.canvas._isMainEvent(r)&&(this.drawStraightLine=!!this.straightLineKey&&r[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(t))&&this._addPoint(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const n=this._points,s=n.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=rs.drawSegment(o,n[s-2],n[s-1]),o.stroke(),o.restore()}}onMouseUp(t){let{e}=t;return!this.canvas._isMainEvent(e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(t){this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)}_addPoint(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,e=this._points[0],r=this._points[1];if(this._saveAndTransform(t),t.beginPath(),this._points.length===2&&e.x===r.x&&e.y===r.y){const n=this.width/1e3;e.x-=n,r.x+=n}t.moveTo(e.x,e.y);for(let n=1;n<this._points.length;n++)rs.drawSegment(t,e,r),e=this._points[n],r=this._points[n+1];t.lineTo(e.x,e.y),t.stroke(),t.restore()}convertPointsToSVGPath(t){const e=this.width/1e3;return Sd(t,e)}createPath(t){const e=new Ei(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new hi(this.shadow)),e}decimatePoints(t,e){if(t.length<=2)return t;let r,n=t[0];const s=this.canvas.getZoom(),o=Math.pow(e/s,2),a=t.length-1,l=[n];for(let c=1;c<a-1;c++)r=Math.pow(n.x-t[c].x,2)+Math.pow(n.y-t[c].y,2),r>=o&&(n=t[c],l.push(n));return l.push(t[a]),l}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const t=this.convertPointsToSVGPath(this._points);if((function(r){return Ic(r)==="M 0 0 Q 0 0 0 0 L 0 0"})(t))return void this.canvas.requestRenderAll();const e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}}const K1=["left","top","radius"],Dd=["radius","startAngle","endAngle","counterClockwise"];class ei extends Gt{static getDefaults(){return y(y({},super.getDefaults()),ei.ownDefaults)}constructor(t){super(),Object.assign(this,ei.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,Mt(this.startAngle),Mt(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(ie)}getRadiusY(){return this.get("radius")*this.get(we)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Dd,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,r=Mt(this.startAngle),n=Mt(this.endAngle),s=Ye(r)*e,o=Xe(r)*e,a=Ye(n)*e,l=Xe(n)*e,c=t>180?1:0,h=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(o," A ").concat(e," ").concat(e," 0 ").concat(c," ").concat(h," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,r){const n=Bi(t,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,radius:a=0}=n;return new this(y(y({},bt(n,K1)),{},{radius:a,left:s-a,top:o-a}))}static fromObject(t){return super._fromObject(t)}}v(ei,"type","Circle"),v(ei,"cacheProperties",[...Ii,...Dd]),v(ei,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),v(ei,"ATTRIBUTE_NAMES",["cx","cy","r",...rr]),X.setClass(ei),X.setSVGClass(ei);const Z1=["x1","y1","x2","y2"],q1=["x1","y1","x2","y2"],Ml=["x1","x2","y1","y2"];class Di extends Gt{constructor(){let[t,e,r,n]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Di.ownDefaults),this.setOptions(s),this.x1=t,this.x2=r,this.y1=e,this.y2=n,this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(dt,o),typeof a=="number"&&this.set(he,a)}_setWidthHeight(){const{x1:t,y1:e,x2:r,y2:n}=this;this.width=Math.abs(r-t),this.height=Math.abs(n-e);const{left:s,top:o,width:a,height:l}=ci([{x:t,y:e},{x:r,y:n}]),c=new C(s+a/2,o+l/2);this.setPositionByOrigin(c,rt,rt)}_set(t,e){return super._set(t,e),Ml.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const r=t.strokeStyle;var n;ke(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(n=this.stroke)!==null&&n!==void 0?n:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=r}_findCenterFromElement(){return new C((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return y(y({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:r,y2:n,width:s,height:o}=this,a=t<=e?-1:1,l=r<=n?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:t,x2:e,y1:r,y2:n}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(r,'" x2="').concat(e,'" y2="').concat(n,`" />
`)]}static async fromElement(t,e,r){const n=Bi(t,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:o=0,x2:a=0,y2:l=0}=n;return new this([s,o,a,l],bt(n,Z1))}static fromObject(t){let{x1:e,y1:r,x2:n,y2:s}=t,o=bt(t,q1);return this._fromObject(y(y({},o),{},{points:[e,r,n,s]}),{extraParam:"points"})}}v(Di,"type","Line"),v(Di,"cacheProperties",[...Ii,...Ml]),v(Di,"ATTRIBUTE_NAMES",rr.concat(Ml)),X.setClass(Di),X.setSVGClass(Di);class Yi extends Gt{static getDefaults(){return y(y({},super.getDefaults()),Yi.ownDefaults)}constructor(t){super(),Object.assign(this,Yi.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,r=this.height/2;t.beginPath(),t.moveTo(-e,r),t.lineTo(0,-r),t.lineTo(e,r),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}v(Yi,"type","Triangle"),v(Yi,"ownDefaults",{width:100,height:100}),X.setClass(Yi),X.setSVGClass(Yi);const Md=["rx","ry"];class ii extends Gt{static getDefaults(){return y(y({},super.getDefaults()),ii.ownDefaults)}constructor(t){super(),Object.assign(this,ii.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(ie)}getRy(){return this.get("ry")*this.get(we)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Md,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,ji,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,r){const n=Bi(t,this.ATTRIBUTE_NAMES,r);return n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,new this(n)}}function J1(i){if(!i)return[];const t=i.replace(/,/g," ").trim().split(/\s+/),e=[];for(let r=0;r<t.length;r+=2)e.push({x:parseFloat(t[r]),y:parseFloat(t[r+1])});return e}v(ii,"type","Ellipse"),v(ii,"cacheProperties",[...Ii,...Md]),v(ii,"ownDefaults",{rx:0,ry:0}),v(ii,"ATTRIBUTE_NAMES",[...rr,"cx","cy","rx","ry"]),X.setClass(ii),X.setSVGClass(ii);const Q1=["left","top"],Ad={exactBoundingBox:!1};class Le extends Gt{static getDefaults(){return y(y({},super.getDefaults()),Le.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),v(this,"strokeDiff",void 0),Object.assign(this,Le.ownDefaults),this.setOptions(e),this.points=t;const{left:r,top:n}=e;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(dt,r),typeof n=="number"&&this.set(he,n)}isOpen(){return!0}_projectStrokeOnPoints(t){return ad(this.points,t,this.isOpen())}_calcDimensions(t){t=y({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map((c=>c.projectedPoint)):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new C,strokeOffset:new C,strokeDiff:new C};const r=ci(e),n=ys(y(y({},t),{},{scaleX:1,scaleY:1})),s=ci(this.points.map((c=>Yt(c,n,!0)))),o=new C(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(Mt(this.skewX)),l-=a*Math.tan(Mt(this.skewY))),y(y({},r),{},{pathOffset:new C(a,l),strokeOffset:new C(s.left,s.top).subtract(new C(r.left,r.top)).multiply(o),strokeDiff:new C(r.width,r.height).subtract(new C(s.width,s.height)).multiply(o)})}_findCenterFromElement(){const t=ci(this.points);return new C(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:r,width:n,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:n,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}),t&&this.setPositionByOrigin(new C(e+n/2,r+s/2),rt,rt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new C(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(t).some((a=>this.strokeUniform||this.constructor.layoutProperties.includes(a)))){var e,r;const{width:a,height:l}=this._calcDimensions(t);o=new C((e=t.width)!==null&&e!==void 0?e:a,(r=t.height)!==null&&r!==void 0?r:l)}else{var n,s;o=new C((n=t.width)!==null&&n!==void 0?n:this.width,(s=t.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new C(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const r=this.initialized&&this[t]!==e,n=super._set(t,e);return this.exactBoundingBox&&r&&((t===ie||t===we)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),n}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return y(y({},super.toObject(t)),{},{points:this.points.map((e=>{let{x:r,y:n}=e;return{x:r,y:n}}))})}_toSVG(){const t=[],e=this.pathOffset.x,r=this.pathOffset.y,n=lt.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)t.push(vt(this.points[s].x-e,n),",",vt(this.points[s].y-r,n)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-n);for(let s=0;s<e;s++){const o=this.points[s];t.lineTo(o.x-r,o.y-n)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,r){return new this(J1(t.getAttribute("points")),y(y({},bt(Bi(t,this.ATTRIBUTE_NAMES,r),Q1)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}v(Le,"ownDefaults",Ad),v(Le,"type","Polyline"),v(Le,"layoutProperties",[an,ln,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),v(Le,"cacheProperties",[...Ii,"points"]),v(Le,"ATTRIBUTE_NAMES",[...rr]),X.setClass(Le),X.setSVGClass(Le);class Fs extends Le{isOpen(){return!1}}v(Fs,"ownDefaults",Ad),v(Fs,"type","Polygon"),X.setClass(Fs),X.setSVGClass(Fs);class Pd extends Gt{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const r in e)for(const n in e[r])for(const s in e[r][n])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const r=e===void 0?this.styles:{0:this.styles[e]};for(const n in r)for(const s in r[n])if(r[n][s][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let r,n,s=0,o=!0,a=0;for(const l in e){r=0;for(const c in e[l]){const h=e[l][c]||{};s++,h[t]!==void 0?(n?h[t]!==n&&(o=!1):n=h[t],h[t]===this[t]&&delete h[t]):o=!1,Object.keys(h).length!==0?r++:delete e[l][c]}r===0&&delete e[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&s===a&&(this[t]=n,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let r,n,s;for(n in e){for(s in r=e[n],r)delete r[s][t],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete e[n]}}_extendStyles(t,e){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(t);this._getLineStyle(r)||this._setLineStyle(r);const s=Sc(y(y({},this._getStyleDeclaration(r,n)),e),(o=>o!==void 0));this._setStyleDeclaration(r,n,s)}getSelectionStyles(t,e,r){const n=[];for(let s=t;s<(e||t);s++)n.push(this.getStyleAtPosition(s,r));return n}getStyleAtPosition(t,e){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(r,n):this._getStyleDeclaration(r,n)}setSelectionStyles(t,e,r){for(let n=e;n<(r||e);n++)this._extendStyles(n,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var r;const n=this.styles&&this.styles[t];return n&&(r=n[e])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(t,e){return y(y({},Tr(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,r){this.styles[t][e]=r}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}v(Pd,"_styleProperties",Cm);const t_=/  +/g,e_=/"/g;function Ia(i,t,e,r,n){return"		".concat((function(s,o){let{left:a,top:l,width:c,height:h}=o,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lt.NUM_FRACTION_DIGITS;const f=is(It,s,!1),[d,g,p,x]=[a,l,c,h].map((_=>vt(_,u)));return"<rect ".concat(f,' x="').concat(d,'" y="').concat(g,'" width="').concat(p,'" height="').concat(x,'"></rect>')})(i,{left:t,top:e,width:r,height:n}),`
`)}const i_=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Ba;class Zt extends Pd{static getDefaults(){return y(y({},super.getDefaults()),Zt.ownDefaults)}constructor(t,e){super(),v(this,"__charBounds",[]),Object.assign(this,Zt.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=Rc(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(ri)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,r,n,s,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===ri||l!==c-1&&!this.isEndOfWrapping(l))&&(n=0,s=this._textLines[l],e=this.getLineWidth(l),e<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,t=(this.width-e)/r;for(let h=0;h<=s.length;h++)o=this.__charBounds[l][h],this._reSpaceAndTab.test(s[h])?(o.width+=t,o.kernedWidth+=t,o.left+=n,n+=t):o.left+=n}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const r=e?this._unwrappedTextLines:this._textLines;let n;for(n=0;n<r.length;n++){if(t<=r[n].length)return{lineIndex:n,charIndex:t};t-=r[n].length+this.missingNewlineOffset(n,e)}return{lineIndex:n-1,charIndex:r[n-1].length<t?r[n-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===fe?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,r){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case rt:t.textBaseline="middle";break;case"ascender":t.textBaseline=he;break;case"descender":t.textBaseline=_l}t.font=this._getFontDeclaration(e,r)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,r=this._textLines.length;e<r;e++){const n=this.getLineWidth(e);n>t&&(t=n)}return t}_renderTextLine(t,e,r,n,s,o){this._renderChars(t,e,r,n,s,o)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,r=this._getLeftOffset();let n=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){n+=a;continue}const l=this._textLines[s].length,c=this._getLineLeftOffset(s);let h,u,f=0,d=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");const p=this.getHeightOfLineImpl(s);for(let x=0;x<l;x++){const _=this.__charBounds[s][x];u=this.getValueOfPropertyAt(s,x,"textBackgroundColor"),this.path?(t.save(),t.translate(_.renderLeft,_.renderTop),t.rotate(_.angle),t.fillStyle=u,u&&t.fillRect(-_.width/2,-p*(1-this._fontSizeFraction),_.width,p),t.restore()):u!==g?(h=r+c+d,this.direction==="rtl"&&(h=this.width-h-f),t.fillStyle=g,g&&t.fillRect(h,n,f,p),d=_.left,f=_.width,g=u):f+=_.kernedWidth}u&&!this.path&&(h=r+c+d,this.direction==="rtl"&&(h=this.width-h-f),t.fillStyle=u,t.fillRect(h,n,f,p)),n+=a}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,r,n){const s=zn.getFontCache(e),o=this._getFontDeclaration(e),a=r+t,l=r&&o===this._getFontDeclaration(n),c=e.fontSize/this.CACHE_FONT_SIZE;let h,u,f,d;if(r&&s.has(r)&&(f=s.get(r)),s.has(t)&&(d=h=s.get(t)),l&&s.has(a)&&(u=s.get(a),d=u-f),h===void 0||f===void 0||u===void 0){const g=(function(){return Ba||(Ba=be({width:0,height:0}).getContext("2d")),Ba})();this._setTextStyles(g,e,!0),h===void 0&&(d=h=g.measureText(t).width,s.set(t,h)),f===void 0&&l&&r&&(f=g.measureText(r).width,s.set(r,f)),l&&u===void 0&&(u=g.measureText(a).width,s.set(a,u),d=u-f)}return{width:h*c,kernedWidth:d*c}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,r,n=0;const s=this.pathSide===Ft,o=this.path,a=this._textLines[t],l=a.length,c=new Array(l);this.__charBounds[t]=c;for(let h=0;h<l;h++){const u=a[h];r=this._getGraphemeBox(u,t,h,e),c[h]=r,n+=r.kernedWidth,e=u}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let h=0;const u=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case dt:h=s?u-n:0;break;case rt:h=(u-n)/2;break;case Ft:h=s?0:u-n}h+=this.pathStartOffset*(s?-1:1);for(let f=s?l-1:0;s?f>=0:f<l;s?f--:f++)r=c[f],h>u?h%=u:h<0&&(h+=u),this._setGraphemeOnPath(h,r),h+=r.kernedWidth}return{width:n,numOfSpaces:0}}_setGraphemeOnPath(t,e){const r=t+e.kernedWidth/2,n=this.path,s=wd(n.path,r,n.segmentsInfo);e.renderLeft=s.x-n.pathOffset.x,e.renderTop=s.y-n.pathOffset.y,e.angle=s.angle+(this.pathSide===Ft?Math.PI:0)}_getGraphemeBox(t,e,r,n,s){const o=this.getCompleteStyleDeclaration(e,r),a=n?this.getCompleteStyleDeclaration(e,r-1):{},l=this._measureChar(t,o,n,a);let c,h=l.kernedWidth,u=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),u+=c,h+=c);const f={width:u,left:0,height:o.fontSize,kernedWidth:h,deltaY:o.deltaY};if(r>0&&!s){const d=this.__charBounds[e][r-1];f.left=d.left+d.width+l.kernedWidth-l.width}return f}getHeightOfLineImpl(t){const e=this.__lineHeights;if(e[t])return e[t];let r=this.getHeightOfChar(t,0);for(let n=1,s=this._textLines[t].length;n<s;n++)r=Math.max(this.getHeightOfChar(t,n),r);return e[t]=r*this._fontSizeMult}getHeightOfLine(t){return this.getHeightOfLineImpl(t)*this.lineHeight}calcTextHeight(){let t=0;for(let e=0,r=this._textLines.length;e<r;e++)t+=e===r-1?this.getHeightOfLineImpl(e):this.getHeightOfLine(e);return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let r=0;const n=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++)this._renderTextLine(e,t,this._textLines[o],n+this._getLineLeftOffset(o),s+r+this.getHeightOfLineImpl(o),o),r+=this.getHeightOfLine(o);t.restore()}_renderTextFill(t){(this.fill||this.styleHas(It))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,r,n,s,o){const a=this.textAlign.includes(ri),l=this.path,c=!a&&this.charSpacing===0&&this.isEmptyStyles(o)&&!l,h=this.direction==="ltr",u=this.direction==="ltr"?1:-1,f=e.direction;let d,g,p,x,_,S="",T=0;if(e.save(),f!==this.direction&&(e.canvas.setAttribute("dir",h?"ltr":"rtl"),e.direction=h?"ltr":"rtl",e.textAlign=h?dt:Ft),s-=this.getHeightOfLineImpl(o)*this._fontSizeFraction,c)return this._renderChar(t,e,o,0,r.join(""),n,s),void e.restore();for(let w=0,M=r.length-1;w<=M;w++)x=w===M||this.charSpacing||l,S+=r[w],p=this.__charBounds[o][w],T===0?(n+=u*(p.kernedWidth-p.width),T+=p.width):T+=p.kernedWidth,a&&!x&&this._reSpaceAndTab.test(r[w])&&(x=!0),x||(d=d||this.getCompleteStyleDeclaration(o,w),g=this.getCompleteStyleDeclaration(o,w+1),x=aa(d,g,!1)),x&&(l?(e.save(),e.translate(p.renderLeft,p.renderTop),e.rotate(p.angle),this._renderChar(t,e,o,w,S,-T/2,0),e.restore()):(_=n,this._renderChar(t,e,o,w,S,_,s)),S="",d=g,n+=u*T,T=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,r=this.height+this.strokeWidth,n=be({width:e,height:r}),s=n.getContext("2d");return n.width=e,n.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(e,0),s.lineTo(e,r),s.lineTo(0,r),s.closePath(),s.translate(e/2,r/2),s.fillStyle=t.toLive(s),this._applyPatternGradientTransform(s,t),s.fill(),s.createPattern(n,"no-repeat")}handleFiller(t,e,r){let n,s;return ke(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(n=-this.width/2,s=-this.height/2,t.translate(n,s),t[e]=this._applyPatternGradientTransformText(r),{offsetX:n,offsetY:s}):(t[e]=r.toLive(t),this._applyPatternGradientTransform(t,r)):(t[e]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:r,strokeWidth:n}=e;return t.lineWidth=n,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",r)}_setFillStyles(t,e){let{fill:r}=e;return this.handleFiller(t,"fillStyle",r)}_renderChar(t,e,r,n,s,o,a){const l=this._getStyleDeclaration(r,n),c=this.getCompleteStyleDeclaration(r,n),h=t==="fillText"&&c.fill,u=t==="strokeText"&&c.stroke&&c.strokeWidth;if(u||h){if(e.save(),e.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(e),l.deltaY&&(a+=l.deltaY),h){const f=this._setFillStyles(e,c);e.fillText(s,o-f.offsetX,a-f.offsetY)}if(u){const f=this._setStrokeStyles(e,c);e.strokeText(s,o-f.offsetX,a-f.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,r){const n=this.get2DCursorLocation(t,!0),s=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:o+s*r.baseline};this.setSelectionStyles(a,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),r=this.width-e,n=this.textAlign,s=this.direction,o=this.isEndOfWrapping(t);let a=0;return n===ri||n===Wn&&!o||n===Un&&!o||n===Eo&&!o?0:(n===rt&&(a=r/2),n===Ft&&(a=r),n===Wn&&(a=r/2),n===Un&&(a=r),s==="rtl"&&(n===Ft||n===ri||n===Un?a=0:n===dt||n===Eo?a=-r:n!==rt&&n!==Wn||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,r){var n;return(n=this._getStyleDeclaration(t,e)[r])!==null&&n!==void 0?n:this[r]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let r=this._getTopOffset();const n=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=e==="linethrough"?.5:e==="overline"?1:0,l=this.offsets[e];for(let c=0,h=this._textLines.length;c<h;c++){const u=this.getHeightOfLine(c);if(!this[e]&&!this.styleHas(e,c)){r+=u;continue}const f=this._textLines[c],d=u/this.lineHeight,g=this._getLineLeftOffset(c);let p=0,x=0,_=this.getValueOfPropertyAt(c,0,e),S=this.getValueOfPropertyAt(c,0,It),T=this.getValueOfPropertyAt(c,0,vr),w=_,M=S,I=T;const A=r+d*(1-this._fontSizeFraction);let j=this.getHeightOfChar(c,0),H=this.getValueOfPropertyAt(c,0,"deltaY");for(let et=0,nt=f.length;et<nt;et++){const J=this.__charBounds[c][et];w=this.getValueOfPropertyAt(c,et,e),M=this.getValueOfPropertyAt(c,et,It),I=this.getValueOfPropertyAt(c,et,vr);const gt=this.getHeightOfChar(c,et),D=this.getValueOfPropertyAt(c,et,"deltaY");if(s&&w&&M){const k=this.fontSize*I/1e3;t.save(),t.fillStyle=S,t.translate(J.renderLeft,J.renderTop),t.rotate(J.angle),t.fillRect(-J.kernedWidth/2,l*gt+D-a*k,J.kernedWidth,k),t.restore()}else if((w!==_||M!==S||gt!==j||I!==T||D!==H)&&x>0){const k=this.fontSize*T/1e3;let O=n+g+p;this.direction==="rtl"&&(O=this.width-O-x),_&&S&&T&&(t.fillStyle=S,t.fillRect(O,A+l*j+H-a*k,x,k)),p=J.left,x=J.width,_=w,T=I,S=M,j=gt,H=D}else x+=J.kernedWidth}let N=n+g+p;this.direction==="rtl"&&(N=this.width-N-x),t.fillStyle=M;const V=this.fontSize*I/1e3;w&&M&&I&&t.fillRect(N,A+l*j+H-a*V,x-o,V),r+=u}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:n=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=t.includes("'")||t.includes('"')||t.includes(",")||Zt.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,r,"".concat(s?this.CACHE_FONT_SIZE:n,"px"),o].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return oa(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),r=new Array(e.length),n=[`
`];let s=[];for(let o=0;o<e.length;o++)r[o]=this.graphemeSplit(e[o]),s=s.concat(r[o],n);return s.pop(),{_unwrappedLines:r,lines:e,graphemeText:s,graphemeLines:r}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return y(y({},super.toObject([...Bf,...t])),{},{styles:cd(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:r}=this.constructor;super.set(t,e);let n=!1,s=!1;if(typeof t=="object")for(const o in t)o==="path"&&this.setPathInfo(),n=n||r.includes(o),s=s||o==="path";else n=r.includes(t),s=t==="path";return s&&this.setPathInfo(),n&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,r){const n=Bi(t,Zt.ATTRIBUTE_NAMES,r),s=y(y({},e),n),{textAnchor:o=dt,textDecoration:a="",dx:l=0,dy:c=0,top:h=0,left:u=0,fontSize:f=pc,strokeWidth:d=1}=s,g=bt(s,i_),p=new this(Oo(t.textContent||"").trim(),y({left:u+l,top:h+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:f},g)),x=p.getScaledHeight()/p.height,_=((p.height+p.strokeWidth)*p.lineHeight-p.height)*x,S=p.getScaledHeight()+_;let T=0;return o===rt&&(T=p.getScaledWidth()/2),o===Ft&&(T=p.getScaledWidth()),p.set({left:p.left-T,top:p.top-(S-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:d}),p}static fromObject(t){return this._fromObject(y(y({},t),{},{styles:hd(t.styles||{},t.text)}),{extraParam:"text"})}}v(Zt,"textLayoutProperties",If),v(Zt,"cacheProperties",[...Ii,...Bf]),v(Zt,"ownDefaults",Tm),v(Zt,"type","Text"),v(Zt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),v(Zt,"ATTRIBUTE_NAMES",rr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),nd(Zt,[class extends Lf{_toSVG(){const i=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(i){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:i,noStyle:!0,withShadow:!0}),e=this.path;return e?t+e._createBaseSVGMarkup(e._toSVG(),{reviver:i,withShadow:!0,additionalTransform:qr(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(i){let{textBgRects:t,textSpans:e}=i;const r=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(e_,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(i,t){const e=[],r=[];let n,s=i;this.backgroundColor&&r.push(...Ia(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)n=this._getLineLeftOffset(o),this.direction==="rtl"&&(n+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,t+n,s),this._setSVGTextLineText(e,o,t+n,s),s+=this.getHeightOfLine(o);return{textSpans:e,textBgRects:r}}_createTextCharSpan(i,t,e,r,n){const s=lt.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(t,i!==i.trim()||!!i.match(t_)),a=o?'style="'.concat(o,'"'):"",l=t.deltaY,c=l?' dy="'.concat(vt(l,s),'" '):"",{angle:h,renderLeft:u,renderTop:f,width:d}=n;let g="";if(u!==void 0){const p=d/2;h&&(g=' rotate="'.concat(vt(_i(h),s),'"'));const x=Cr({angle:_i(h)});x[4]=u,x[5]=f;const _=new C(-p,0).transform(x);e=_.x,r=_.y}return'<tspan x="'.concat(vt(e,s),'" y="').concat(vt(r,s),'" ').concat(c).concat(g).concat(a,">").concat(ld(i),"</tspan>")}_setSVGTextLineText(i,t,e,r){const n=this.getHeightOfLine(t),s=this.textAlign.includes(ri),o=this._textLines[t];let a,l,c,h,u,f="",d=0;r+=n*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,p=o.length-1;g<=p;g++)u=g===p||this.charSpacing||this.path,f+=o[g],c=this.__charBounds[t][g],d===0?(e+=c.kernedWidth-c.width,d+=c.width):d+=c.kernedWidth,s&&!u&&this._reSpaceAndTab.test(o[g])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(t,g),l=this.getCompleteStyleDeclaration(t,g+1),u=aa(a,l,!0)),u&&(h=this._getStyleDeclaration(t,g),i.push(this._createTextCharSpan(f,h,e,r,c)),f="",a=l,this.direction==="rtl"?e-=d:e+=d,d=0)}_setSVGTextLineBg(i,t,e,r){const n=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let h=0;h<n.length;h++){const{left:u,width:f,kernedWidth:d}=this.__charBounds[t][h];o=this.getValueOfPropertyAt(t,h,"textBackgroundColor"),o!==c?(c&&i.push(...Ia(c,e+l,r,a,s)),l=u,a=f,c=o):a+=d}o&&i.push(...Ia(c,e+l,r,a,s))}_getSVGLineTopOffset(i){let t,e=0;for(t=0;t<i;t++)e+=this.getHeightOfLine(t);const r=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(i){return"".concat(super.getSvgStyles(i)," text-decoration-thickness: ").concat(vt(this.textDecorationThickness*this.getObjectScaling().y/10,lt.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(i,t){const{fontFamily:e,strokeWidth:r,stroke:n,fill:s,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c,textDecorationThickness:h,linethrough:u,overline:f,underline:d}=i,g=this.getSvgTextDecoration({underline:d??this.underline,overline:f??this.overline,linethrough:u??this.linethrough}),p=h||this.textDecorationThickness;return[n?is(fe,n):"",r?"stroke-width: ".concat(r,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",g?"text-decoration: ".concat(g,"; text-decoration-thickness: ").concat(vt(p*this.getObjectScaling().y/10,lt.NUM_FRACTION_DIGITS),"%; "):"",s?is(It,s):"",c?"baseline-shift: ".concat(-c,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(i){return["overline","underline","line-through"].filter((t=>i[t.replace("-","")])).join(" ")}}]),X.setClass(Zt),X.setSVGClass(Zt);class r_{constructor(t){v(this,"target",void 0),v(this,"__mouseDownInPlace",!1),v(this,"__dragStartFired",!1),v(this,"__isDraggingOver",!1),v(this,"__dragStartSelection",void 0),v(this,"__dragImageDisposer",void 0),v(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach((r=>r())),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,r=e.getSelectionStartFromPointer(t);return e.isEditing&&r>=e.selectionStart&&r<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var r;let{selectionStart:n,selectionEnd:s}=e;const o=this.target,a=o.canvas,l=new C(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(n),h=new C(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),u=a.getScenePoint(t).subtract(h),f=o.getCanvasRetinaScaling(),d=o.getBoundingRect(),g=h.subtract(new C(d.left,d.top)),p=a.viewportTransform,x=g.add(u).transform(p,!0),_=o.backgroundColor,S=Fc(o.styles);o.backgroundColor="";const T={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(T,0,n),o.setSelectionStyles(T,s,o.text.length),o.dirty=!0;const w=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=_,o.styles=S,o.dirty=!0,jo(w,{position:"fixed",left:"".concat(-w.width,"px"),border:ue,width:"".concat(w.width/f,"px"),height:"".concat(w.height/f,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{w.remove()},Be(t.target||this.target.hiddenTextarea).body.appendChild(w),(r=t.dataTransfer)===null||r===void 0||r.setDragImage(w,x.x,x.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,r=this.isActive();if(r&&t.dataTransfer){const n=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},s=e._text.slice(n.selectionStart,n.selectionEnd).join(""),o=y({text:e.text,value:s},n);t.dataTransfer.setData("text/plain",s),t.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:e.getSelectionStyles(n.selectionStart,n.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,o)}return e.abortCursorAnimation(),r}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),r=this.__dragStartSelection;return e<r.selectionStart||e>r.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const r=this.targetCanDrop(e);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,r=this.targetCanDrop(e);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:r}=t,n=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(e=r.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(s&&!n){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},h=s[Math.max(0,s.length-1)],u=0;if(this.__dragStartSelection){const f=this.__dragStartSelection.selectionStart,d=this.__dragStartSelection.selectionEnd;l>f&&l<=d?l=f:l>d&&(l-=d-f),o.removeChars(f,d),delete this.__dragStartSelection}o._reNewline.test(h)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(s=s.trimEnd()),t.didDrop=!0,t.dropTarget=o,o.insertChars(s,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+u,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(bo,{index:l+u,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const n=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=e.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||ue;l===ue?(n.selectionStart=o,n.selectionEnd=a,n._updateTextarea(),n.hiddenTextarea.focus()):(n.clearContextTop(),l==="move"&&(n.removeChars(o,a),n.selectionStart=n.selectionEnd=o,n.hiddenTextarea&&(n.hiddenTextarea.value=n.text),n._updateTextarea(),n.fire(bo,{index:o,action:"dragend"}),s.fire("text:changed",{target:n}),s.requestRenderAll()),n.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const iu=/[ \n\.,;!\?\-]/;class n_ extends Zt{constructor(){super(...arguments),v(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:r,delay:n,onComplete:s}=t;return Mc({startValue:this._currentCursorOpacity,endValue:e,duration:r,delay:n,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach((e=>{e&&!e.isDone()&&(t=!0,e.abort())})),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((t=>!t||t.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,r=t-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)e++,r--;for(;/\S/.test(this._text[r])&&r>-1;)e++,r--;return t-e}findWordBoundaryRight(t){let e=0,r=t;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)e++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)e++,r++;return t+e}findLineBoundaryLeft(t){let e=0,r=t-1;for(;!/\n/.test(this._text[r])&&r>-1;)e++,r--;return t-e}findLineBoundaryRight(t){let e=0,r=t;for(;!/\n/.test(this._text[r])&&r<this._text.length;)e++,r++;return t+e}searchWordBoundary(t,e){const r=this._text;let n=t>0&&this._reSpace.test(r[t])&&(e===-1||!mc.test(r[t-1]))?t-1:t,s=r[n];for(;n>0&&n<r.length&&!iu.test(s);)n+=e,s=r[n];return e===-1&&iu.test(s)&&n++,n}selectWord(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const r=this.searchWordBoundary(t,-1),n=Math.max(r,this.searchWordBoundary(t,1));this.selectionStart=r,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const r=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);this.selectionStart=r,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;Be(e).activeElement!==e&&e.focus();const r=this.getSelectionStartFromPointer(t),n=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&n!==s||n!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,r){const n=r.slice(0,t),s=this.graphemeSplit(n).length;if(t===e)return{selectionStart:s,selectionEnd:s};const o=r.slice(t,e);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(t,e,r){const n=r.slice(0,t).join("").length;return t===e?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+r.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),r=this.get2DCursorLocation(t),n=r.lineIndex,s=r.charIndex,o=this.getValueOfPropertyAt(n,s,"fontSize")*this.lineHeight,a=e.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,h=c.width/l,u=c.height/l,f=h-o,d=u-o,g=new C(e.left+a,e.top+e.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new C(c.clientWidth/h,c.clientHeight/u));return g.x<0&&(g.x=0),g.x>f&&(g.x=f),g.y<0&&(g.y=0),g.y>d&&(g.y=d),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(So),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(t,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(e,!0);if(r!==s){if(this.styles[r])for(let a=n;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const l=this.styles[s][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][n+a-o]=l)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],l=o-n;for(let c=n;c<o;c++)delete a[c];for(const c in this.styles[r]){const h=parseInt(c,10);h>=o&&(a[h-l]=a[c],delete a[c])}}}shiftLineStyles(t,e){const r=Object.assign({},this.styles);for(const n in this.styles){const s=parseInt(n,10);s>t&&(this.styles[s+e]=r[s],r[s-e]||delete this.styles[s])}}insertNewlineStyleObject(t,e,r,n){const s={},o=this._unwrappedTextLines[t].length,a=o===e;let l=!1;r||(r=1),this.shiftLineStyles(t,r);const c=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const u in this.styles[t]){const f=parseInt(u,10);f>=e&&(l=!0,s[f-e]=this.styles[t][u],a&&e===0||delete this.styles[t][u])}let h=!1;for(l&&!a&&(this.styles[t+r]=s,h=!0),(h||o>e)&&r--;r>0;)n&&n[r-1]?this.styles[t+r]={0:y({},n[r-1])}:c?this.styles[t+r]={0:y({},c)}:delete this.styles[t+r],r--;this._forceClearCache=!0}insertCharStyleObject(t,e,r,n){this.styles||(this.styles={});const s=this.styles[t],o=s?y({},s):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=e&&(s[c+r]=o[c],o[c-r]||delete s[c])}if(this._forceClearCache=!0,n){for(;r--;)Object.keys(n[r]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+r]=y({},n[r]));return}if(!s)return;const a=s[e?e-1:1];for(;a&&r--;)this.styles[t][e+r]=y({},a)}insertNewStyleBlock(t,e,r){const n=this.get2DCursorLocation(e,!0),s=[0];let o,a=0;for(let l=0;l<t.length;l++)t[l]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+s[0],a),o=1;o<a;o++)s[o]>0?this.insertCharStyleObject(n.lineIndex+o,0,s[o],r):r&&this.styles[n.lineIndex+o]&&r[0]&&(this.styles[n.lineIndex+o][0]=r[0]),r=r&&r.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(n.lineIndex+o,0,s[o],r)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;n>r&&this.removeStyleFromTo(r,n);const s=this.graphemeSplit(t);this.insertNewStyleBlock(s,r,e),this._text=[...this._text.slice(0,r),...s,...this._text.slice(n)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,r){r<=t?(e===t?this._selectionDirection=dt:this._selectionDirection===Ft&&(this._selectionDirection=dt,this.selectionEnd=t),this.selectionStart=r):r>t&&r<e?this._selectionDirection===Ft?this.selectionEnd=r:this.selectionStart=r:(e===t?this._selectionDirection=Ft:this._selectionDirection===dt&&(this._selectionDirection=Ft,this.selectionStart=e),this.selectionEnd=r)}}class s_ extends n_{initHiddenTextarea(){const t=this.canvas&&Be(this.canvas.getElement())||on(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map((o=>{let[a,l]=o;return e.setAttribute(a,l)}));const{top:r,left:n,fontSize:s}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(n,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map((o=>{let[a,l]=o;return e.addEventListener(a,this[l].bind(this))})),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste,{value:r,selectionStart:n,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(bo),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(r).graphemeText,l=this._text.length,c=a.length,h=this.selectionStart,u=this.selectionEnd,f=h!==u;let d,g,p,x,_=c-l;const S=this.fromStringToGraphemeSelection(n,s,r),T=h>S.selectionStart;f?(g=this._text.slice(h,u),_+=u-h):c<l&&(g=T?this._text.slice(u+_,u):this._text.slice(h,h-_));const w=a.slice(S.selectionEnd-_,S.selectionEnd);if(g&&g.length&&(w.length&&(d=this.getSelectionStyles(h,h+1,!1),d=w.map((()=>d[0]))),f?(p=h,x=u):T?(p=u-g.length,x=u):(p=u,x=u+g.length),this.removeStyleFromTo(p,x)),w.length){const{copyPasteData:M}=pi();e&&w.join("")===M.copiedText&&!lt.disableStyleCopyPaste&&(d=M.copiedTextStyle),this.insertNewStyleBlock(w,h,d)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:r,selectionEnd:n}=e;this.compositionStart=r,this.compositionEnd=n,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=pi();t.copiedText=this.getSelectedText(),lt.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let r,n=this._getLineLeftOffset(t);return e>0&&(r=this.__charBounds[t][e-1],n+=r.left+r.width),n}getDownCursorOffset(t,e){const r=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(r),s=n.lineIndex;if(s===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-r;const o=n.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const r=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(r),s=n.lineIndex;if(s===0||t.metaKey||t.keyCode===33)return-r;const o=n.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s-1,a),c=this._textLines[s].slice(0,o),h=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-c.length+(1-h)}_getIndexOnLine(t,e){const r=this._textLines[t];let n,s,o=this._getLineLeftOffset(t),a=0;for(let l=0,c=r.length;l<c;l++)if(n=this.__charBounds[t][l].width,o+=n,o>e){s=!0;const h=o-n,u=o,f=Math.abs(h-e);a=Math.abs(u-e)<f?l:l-1;break}return s||(a=r.length-1),a}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const r=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===Ft);if(e.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const n=this.text.length;this.selectionStart=xr(0,this.selectionStart,n),this.selectionEnd=xr(0,this.selectionEnd,n),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===dt?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,r){let n;if(t.altKey)n=this["findWordBoundary".concat(r)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=r==="Left"?-1:1,!0;n=this["findLineBoundary".concat(r)](this[e])}return n!==void 0&&this[e]!==n&&(this[e]=n,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=dt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===Ft&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=dt,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const r="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===dt&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ft,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=Ft,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const ru=i=>!!i.button;class o_ extends s_{constructor(){super(...arguments),v(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new r_(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e,alreadySelected:r}=t;this.canvas&&this.editable&&!ru(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(t){let{e,transform:r}=t;const n=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||ru(e)||n||this.selected&&!this.getActiveControl()&&(this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),r=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(r,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(xe(this.calcTransformMatrix())).add(new C(-this._getLeftOffset(),-this._getTopOffset()));let r=0,n=0,s=0;for(let c=0;c<this._textLines.length&&r<=e.y;c++)r+=this.getHeightOfLine(c),s=c,c>0&&(n+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,l=this.__charBounds[s];for(let c=0;c<a;c++){const h=o+l[c].kernedWidth;if(e.x<=h){Math.abs(e.x-h)<=Math.abs(e.x-o)&&n++;break}o=h,n++}return Math.min(this.flipX?a-n:n,this._text.length)}}const Ls="moveCursorUp",js="moveCursorDown",Rs="moveCursorLeft",Is="moveCursorRight",Bs="exitEditing",nu=(i,t)=>{const e=t.getRetinaScaling();i.setTransform(e,0,0,e,0,0);const r=t.viewportTransform;i.transform(r[0],r[1],r[2],r[3],r[4],r[5])},a_=y({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Bs,27:Bs,33:Ls,34:js,35:Is,36:Rs,37:Rs,38:Ls,39:Is,40:js},keysMapRtl:{9:Bs,27:Bs,33:Ls,34:js,35:Rs,36:Is,37:Is,38:Ls,39:Rs,40:js},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class He extends o_{static getDefaults(){return y(y({},super.getDefaults()),He.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,y(y({},He.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof Dl&&this.canvas.textEditingManager.remove(this),e instanceof Dl&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,r)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,r)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(t);return this.isEditing=e,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),n=r.length>0;let s,o=t;if(n){s=be(t.canvas),o=s.getContext("2d"),nu(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,e):this.renderCursor(o,e),n)for(const a of r){const l=a.clipPath,c=be(t.canvas),h=c.getContext("2d");if(nu(h,this.canvas),!l.absolutePositioned){const u=a.calcTransformMatrix();h.transform(u[0],u[1],u[2],u[3],u[4],u[5])}l.transform(h),l.drawObject(h,!0,{}),this.drawClipPathOnCache(o,l,c)}n&&(t.setTransform(1,0,0,1,0,0),t.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let e=this;for(;e;)e.clipPath&&t.push(e),e=e.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),n=this._getTopOffset(),s=this._getCursorBoundariesOffsets(t,e);return{left:r,top:n,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,r=0;const{charIndex:n,lineIndex:s}=this.get2DCursorLocation(t);for(let c=0;c<s;c++)e+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(s),a=this.__charBounds[s][n];a&&(r=a.left),this.charSpacing!==0&&n===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const l={top:e,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Ft||this.textAlign===ri||this.textAlign===Un?l.left*=-1:this.textAlign===dt||this.textAlign===Eo?l.left=o-(r>0?r:0):this.textAlign!==rt&&this.textAlign!==Wn||(l.left=o-(r>0?r:0))),l}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const r=this.get2DCursorLocation(t),n=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(n,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(n,s,"deltaY"),h=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(n,s,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-l/2,top:h+e.top+c,width:l,height:o}}_renderCursor(t,e,r){const{color:n,opacity:s,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,e);t.fillStyle=n,t.globalAlpha=s,t.fillRect(o,a,l,c)}renderSelection(t,e){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,r,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,r){const n=e.selectionStart,s=e.selectionEnd,o=this.textAlign.includes(ri),a=this.get2DCursorLocation(n),l=this.get2DCursorLocation(s),c=a.lineIndex,h=l.lineIndex,u=a.charIndex<0?0:a.charIndex,f=l.charIndex<0?0:l.charIndex;for(let d=c;d<=h;d++){const g=this._getLineLeftOffset(d)||0;let p=this.getHeightOfLine(d),x=0,_=0,S=0;if(d===c&&(_=this.__charBounds[c][u].left),d>=c&&d<h)S=o&&!this.isEndOfWrapping(d)?this.width:this.getLineWidth(d)||5;else if(d===h)if(f===0)S=this.__charBounds[h][f].left;else{const A=this._getWidthOfCharSpacing();S=this.__charBounds[h][f-1].left+this.__charBounds[h][f-1].width-A}x=p,(this.lineHeight<1||d===h&&this.lineHeight>1)&&(p/=this.lineHeight);let T=r.left+g+_,w=p,M=0;const I=S-_;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",w=1,M=p):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Ft||this.textAlign===ri||this.textAlign===Un?T=this.width-T-I:this.textAlign===dt||this.textAlign===Eo?T=r.left+g-S:this.textAlign!==rt&&this.textAlign!==Wn||(T=r.left+g-S)),t.fillRect(T,r.top+r.topOffset+M,I,w),r.topOffset+=x}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,It)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}v(He,"ownDefaults",a_),v(He,"type","IText"),X.setClass(He),X.setClass(He,"i-text");class hr extends He{static getDefaults(){return y(y({},super.getDefaults()),hr.ownDefaults)}constructor(t,e){super(t,y(y({},hr.ownDefaults),e))}static createControls(){return{controls:rd()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(ri)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,r=0,n=0;const s={};for(let o=0;o<t.graphemeLines.length;o++)t.graphemeText[n]===`
`&&o>0?(r=0,n++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[n])&&o>0&&(r++,n++),s[o]={line:e,offset:r},n+=t.graphemeLines[o].length,r+=t.graphemeLines[o].length;return s}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];r&&(e=r.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,r=0,n=t+1,s=!1;const o=this._styleMap[t],a=this._styleMap[t+1];o&&(t=o.line,r=o.offset),a&&(n=a.line,s=n===t,e=a.offset);const l=t===void 0?this.styles:{line:this.styles[t]};for(const c in l)for(const h in l[c]){const u=parseInt(h,10);if(u>=r&&(!s||u<e))for(const f in l[c][h])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];if(!r)return{};t=r.line,e=r.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,r){const n=this._styleMap[t];super._setStyleDeclaration(n.line,n.offset+e,r)}_deleteStyleDeclaration(t,e){const r=this._styleMap[t];super._deleteStyleDeclaration(r.line,r.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const r=this.getGraphemeDataForRender(t),n=[];for(let s=0;s<r.wordsData.length;s++)n.push(...this._wrapLine(s,e,r));return this.isWrapping=!1,n}getGraphemeDataForRender(t){const e=this.splitByGrapheme,r=e?"":" ";let n=0;return{wordsData:t.map(((s,o)=>{let a=0;const l=e?this.graphemeSplit(s):this.wordSplit(s);return l.length===0?[{word:[],width:0}]:l.map((c=>{const h=e?[c]:this.graphemeSplit(c),u=this._measureWord(h,o,a);return n=Math.max(u,n),a+=h.length+r.length,{word:h,width:u}}))})),largestWordWidth:n}}_measureWord(t,e){let r,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,a=t.length;o<a;o++)s+=this._getGraphemeBox(t[o],e,o+n,r,!0).kernedWidth,r=t[o];return s}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,r){let{largestWordWidth:n,wordsData:s}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],h=l?"":" ";let u=0,f=[],d=0,g=0,p=!0;e-=o;const x=Math.max(e,n,this.dynamicMinWidth),_=s[t];let S;for(d=0,S=0;S<_.length;S++){const{word:T,width:w}=_[S];d+=T.length,u+=g+w-a,u>x&&!p?(c.push(f),f=[],u=w,p=!0):u+=a,p||l||f.push(h),f=f.concat(T),g=l?0:this._measureWord([h],t,d),d++,p=!1}return S&&c.push(f),n+o>this.dynamicMinWidth&&(this.dynamicMinWidth=n-a+o),c}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),r=this._wrapText(e.lines,this.width),n=new Array(r.length);for(let s=0;s<r.length;s++)n[s]=r[s].join("");return e.lines=n,e.graphemeLines=r,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const r=parseInt(e,10);if(this._textLines[r]){const n=this._styleMap[e].line;t.set("".concat(n),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}v(hr,"type","Textbox"),v(hr,"textLayoutProperties",[...He.textLayoutProperties,"width"]),v(hr,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),X.setClass(hr);class su extends la{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:r}=t,{clipPath:n,group:s}=r;if(!n||!this.shouldPerformLayout(t))return;const{width:o,height:a}=ci(fd(r,n)),l=new C(o,a);if(n.absolutePositioned)return{center:Pi(n.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const c=n.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:h=new C,correction:u=new C}=this.calcBoundingBox(e,t)||{};return{center:h.add(c),correction:u.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}v(su,"type","clip-path"),X.setClass(su);class Al extends la{getInitialSize(t,e){let{target:r}=t,{size:n}=e;return new C(r.width||n.x,r.height||n.y)}}v(Al,"type","fixed"),X.setClass(Al);class l_ extends Qr{subscribeTargets(t){const e=t.target;t.targets.reduce(((r,n)=>(n.parent&&r.add(n.parent),r)),new Set).forEach((r=>{r.layoutManager.subscribeTargets({target:r,targets:[e]})}))}unsubscribeTargets(t){const e=t.target,r=e.getObjects();t.targets.reduce(((n,s)=>(s.parent&&n.add(s.parent),n)),new Set).forEach((n=>{!r.some((s=>s.parent===n))&&n.layoutManager.unsubscribeTargets({target:n,targets:[e]})}))}}class ur extends Ae{static getDefaults(){return y(y({},super.getDefaults()),ur.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ur.ownDefaults),this.setOptions(e);const{left:r,top:n,layoutManager:s}=e;this.groupInit(t,{left:r,top:n,layoutManager:s??new l_})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach((n=>{const s=this._objects.findIndex((a=>a.isInFrontOf(n))),o=s===-1?this.size():s;this.insertAt(o,n)}))}canEnterGroup(t){return this.getObjects().some((e=>e.isDescendantOf(t)||t.isDescendantOf(e)))?(Ji("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const r=new Set;e.forEach((n=>{const{parent:s}=n;s&&r.add(s)})),t===jc?r.forEach((n=>{n._onAfterObjectsChange(Po,e)})):r.forEach((n=>{n._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,r){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const n=y(y({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(t,n);super._renderControls(t,e),t.restore()}}v(ur,"type","ActiveSelection"),v(ur,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),X.setClass(ur),X.setClass(ur,"activeSelection");class c_{constructor(){v(this,"resources",{})}applyFilters(t,e,r,n,s){const o=s.getContext("2d");if(!o)return;o.drawImage(e,0,0,r,n);const a={sourceWidth:r,sourceHeight:n,imageData:o.getImageData(0,0,r,n),originalEl:e,originalImageData:o.getImageData(0,0,r,n),canvasEl:s,ctx:o,filterBackend:this};t.forEach((c=>{c.applyTo(a)}));const{imageData:l}=a;return l.width===r&&l.height===n||(s.width=l.width,s.height=l.height),o.putImageData(l,0,0),a}}class Fd{constructor(){let{tileSize:t=lt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};v(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),v(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const r=be({width:t,height:e}),n=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)}applyFilters(t,e,r,n,s,o){const a=this.gl,l=s.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,e));const h={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:r,sourceHeight:n,destinationWidth:r,destinationHeight:n,context:a,sourceTexture:this.createTexture(a,r,n,c?void 0:e),targetTexture:this.createTexture(a,r,n),originalTexture:c||this.createTexture(a,r,n,c?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,u),t.forEach((f=>{f&&f.applyTo(h)})),(function(f){const d=f.targetCanvas,g=d.width,p=d.height,x=f.destinationWidth,_=f.destinationHeight;g===x&&p===_||(d.width=x,d.height=_)})(h),this.copyGLTo2D(a,h),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(h.sourceTexture),a.deleteTexture(h.targetTexture),a.deleteFramebuffer(u),l.setTransform(1,0,0,1,0,0),h}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,r,n,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:h,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:f,TEXTURE_WRAP_S:d,TEXTURE_WRAP_T:g}=t,p=t.createTexture();return t.bindTexture(a,p),t.texParameteri(a,u,s||o),t.texParameteri(a,f,s||o),t.texParameteri(a,d,h),t.texParameteri(a,g,h),n?t.texImage2D(a,0,l,l,c,n):t.texImage2D(a,0,l,e,r,0,l,c,null),p}getCachedTexture(t,e,r){const{textureCache:n}=this;if(n[t])return n[t];{const s=this.createTexture(this.gl,e.width,e.height,e,r);return s&&(n[t]=s),s}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const r=t.canvas,n=e.targetCanvas,s=n.getContext("2d");if(!s)return;s.translate(0,n.height),s.scale(1,-1);const o=r.height-n.height;s.drawImage(r,0,o,n.width,n.height,0,0,n.width,n.height)}copyGLTo2DPutImageData(t,e){const r=e.targetCanvas.getContext("2d"),n=e.destinationWidth,s=e.destinationHeight,o=n*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,n,s,t.RGBA,t.UNSIGNED_BYTE,a);const c=new ImageData(l,n,s);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const r=t.getExtension("WEBGL_debug_renderer_info");if(r){const n=t.getParameter(r.UNMASKED_RENDERER_WEBGL),s=t.getParameter(r.UNMASKED_VENDOR_WEBGL);n&&(e.renderer=n.toLowerCase()),s&&(e.vendor=s.toLowerCase())}return this.gpuInfo=e,e}}let za;function h_(){const{WebGLProbe:i}=pi();return i.queryWebGL(mi()),lt.enableGLFiltering&&i.isSupported(lt.textureSize)?new Fd({tileSize:lt.textureSize}):new c_}function Ha(){return!za&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(za=h_()),za}const u_=["filters","resizeFilter","src","crossOrigin","type"],Ld=["cropX","cropY"];class ae extends Gt{static getDefaults(){return y(y({},super.getDefaults()),ae.ownDefaults)}constructor(t,e){super(),v(this,"_lastScaleX",1),v(this,"_lastScaleY",1),v(this,"_filterScalingX",1),v(this,"_filterScalingY",1),this.filters=[],Object.assign(this,ae.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(tr()),this.setElement(typeof t=="string"?(this.canvas&&Be(this.canvas.getElement())||on()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){var e;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(r),(e=t.classList)===null||e===void 0||e.add(ae.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Ha(!1);e instanceof Fd&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((t=>{const e=this[t];e&&pi().dispose(e),this[t]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,r=this.height/2;t.beginPath(),t.moveTo(-e,-r),t.lineTo(e,-r),t.lineTo(e,r),t.lineTo(-e,r),t.lineTo(-e,-r),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach((r=>{r&&e.push(r.toObject())})),y(y({},super.toObject([...Ld,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,r=-this.width/2,n=-this.height/2;let s=[],o=[],a="",l="";if(!e)return[];if(this.hasCrop()){const c=tr();s.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+n+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(n-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(n,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return s=this.paintFirst!==It?s.concat(o,t):s.concat(t,o),s}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Nn(t,{crossOrigin:e,signal:r}).then((n=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(n)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),n=r.x,s=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||n>e&&s>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=s);const a=be(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=t.scaleX=n,this._lastScaleY=t.scaleY=s,Ha().applyFilters([t],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter((s=>s&&!s.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,r=e.naturalWidth||e.width,n=e.naturalHeight||e.height;if(this._element===this._originalElement){const s=be({width:r,height:n});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,n),this._lastScaleX=1,this._lastScaleY=1);Ha().applyFilters(t,this._originalElement,r,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const r=this._filterScalingX,n=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=e.naturalWidth||e.width,h=e.naturalHeight||e.height,u=a*r,f=l*n,d=Math.min(s*r,c-u),g=Math.min(o*n,h-f),p=-s/2,x=-o/2,_=Math.min(s,c/r-a),S=Math.min(o,h/n-l);e&&t.drawImage(e,u,f,d,g,p,x,_,S)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=t||r.width,this.height=e||r.height}parsePreserveAspectRatioAttribute(){const t=Ff(this.preserveAspectRatio||""),e=this.width,r=this.height,n={width:e,height:r};let s,o=this._element.width,a=this._element.height,l=1,c=1,h=0,u=0,f=0,d=0;return!t||t.alignX===ue&&t.alignY===ue?(l=e/o,c=r/a):(t.meetOrSlice==="meet"&&(l=c=gd(this._element,n),s=(e-o*l)/2,t.alignX==="Min"&&(h=-s),t.alignX==="Max"&&(h=s),s=(r-a*c)/2,t.alignY==="Min"&&(u=-s),t.alignY==="Max"&&(u=s)),t.meetOrSlice==="slice"&&(l=c=pd(this._element,n),s=o-e/l,t.alignX==="Mid"&&(f=s/2),t.alignX==="Max"&&(f=s),s=a-r/c,t.alignY==="Mid"&&(d=s/2),t.alignY==="Max"&&(d=s),o=e/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:h,offsetTop:u,cropX:f,cropY:d}}static fromObject(t,e){let{filters:r,resizeFilter:n,src:s,crossOrigin:o,type:a}=t,l=bt(t,u_);return Promise.all([Nn(s,y(y({},e),{},{crossOrigin:o})),r&&Zr(r,e),n&&Zr([n],e),ws(l,e)]).then((c=>{let[h,u=[],[f]=[],d={}]=c;return new this(h,y(y({},l),{},{src:s,filters:u,resizeFilter:f},d))}))}static fromURL(t){let{crossOrigin:e=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Nn(t,{crossOrigin:e,signal:r}).then((s=>new this(s,n)))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n=Bi(t,this.ATTRIBUTE_NAMES,r);return this.fromURL(n["xlink:href"]||n.href,e,n).catch((s=>(Ji("log","Unable to parse Image",s),null)))}}v(ae,"type","Image"),v(ae,"cacheProperties",[...Ii,...Ld]),v(ae,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),v(ae,"CSS_CANVAS","canvas-img"),v(ae,"ATTRIBUTE_NAMES",[...rr,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),X.setClass(ae),X.setSVGClass(ae);ra(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const jd=df,ou=i=>function(t,e,r){const{points:n,pathOffset:s}=r;return new C(n[i]).subtract(s).transform(At(r.getViewportTransform(),r.calcTransformMatrix()))},Rd=(i,t,e,r)=>{const{target:n,pointIndex:s}=t,o=n,a=Pi(new C(e,r),void 0,o.calcOwnMatrix());return o.points[s]=a.add(o.pathOffset),o.setDimensions(),o.set("dirty",!0),!0},Id=(i,t)=>function(e,r,n,s){const o=r.target,a=new C(o.points[(i>0?i:o.points.length)-1]),l=a.subtract(o.pathOffset).transform(o.calcOwnMatrix()),c=t(e,y(y({},r),{},{pointIndex:i}),n,s),h=a.subtract(o.pathOffset).transform(o.calcOwnMatrix()).subtract(l);return o.left-=h.x,o.top-=h.y,c},au=i=>ir(jd,Id(i,Rd)),Pl=(i,t,e)=>{const{path:r,pathOffset:n}=i,s=r[t];return new C(s[e]-n.x,s[e+1]-n.y).transform(At(i.getViewportTransform(),i.calcTransformMatrix()))};function f_(i,t,e){const{commandIndex:r,pointIndex:n}=this;return Pl(e,r,n)}function d_(i,t,e,r){const{target:n}=t,{commandIndex:s,pointIndex:o}=this,a=((l,c,h,u,f)=>{const{path:d,pathOffset:g}=l,p=d[(u>0?u:d.length)-1],x=new C(p[f],p[f+1]),_=x.subtract(g).transform(l.calcOwnMatrix()),S=Pi(new C(c,h),void 0,l.calcOwnMatrix());d[u][f]=S.x+g.x,d[u][f+1]=S.y+g.y,l.setDimensions();const T=x.subtract(l.pathOffset).transform(l.calcOwnMatrix()).subtract(_);return l.left-=T.x,l.top-=T.y,l.set("dirty",!0),!0})(n,e,r,s,o);return Tc(this.actionName,y(y({},kc(i,t,e,r)),{},{commandIndex:s,pointIndex:o})),a}class Bd extends mt{constructor(t){super(t)}render(t,e,r,n,s){const o=y(y({},n),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(t,e,r,o,s)}}class g_ extends Bd{constructor(t){super(t)}render(t,e,r,n,s){const{path:o}=s,{commandIndex:a,pointIndex:l,connectToCommandIndex:c,connectToPointIndex:h}=this;t.save(),t.strokeStyle=this.controlStroke,this.connectionDashArray&&t.setLineDash(this.connectionDashArray);const[u]=o[a],f=Pl(s,c,h);if(u==="Q"){const d=Pl(s,a,l+2);t.moveTo(d.x,d.y),t.lineTo(e,r)}else t.moveTo(e,r);t.lineTo(f.x,f.y),t.stroke(),t.restore(),super.render(t,e,r,n,s)}}const zs=(i,t,e,r,n,s)=>new(e?g_:Bd)(y(y({commandIndex:i,pointIndex:t,actionName:"modifyPath",positionHandler:f_,actionHandler:d_,connectToCommandIndex:n,connectToPointIndex:s},r),e?r.controlPointStyle:r.pointStyle));var wt=Object.freeze({__proto__:null,changeWidth:bl,createObjectDefaultControls:Pc,createPathControls:function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};let r="M";return i.path.forEach(((n,s)=>{const o=n[0];switch(o!=="Z"&&(e["c_".concat(s,"_").concat(o)]=zs(s,n.length-2,!1,t)),o){case"C":e["c_".concat(s,"_C_CP_1")]=zs(s,1,!0,t,s-1,(a=>a==="C"?5:a==="Q"?3:1)(r)),e["c_".concat(s,"_C_CP_2")]=zs(s,3,!0,t,s,5);break;case"Q":e["c_".concat(s,"_Q_CP_1")]=zs(s,1,!0,t,s,3)}r=o})),e},createPolyActionHandler:au,createPolyControls:function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};for(let r=0;r<(typeof i=="number"?i:i.points.length);r++)e["p".concat(r)]=new mt(y({actionName:jd,positionHandler:ou(r),actionHandler:au(r)},t));return e},createPolyPositionHandler:ou,createResizeControls:id,createTextboxDefaultControls:rd,dragHandler:Pf,factoryPolyActionHandler:Id,getLocalPoint:ia,polyActionHandler:Rd,renderCircleControl:Yf,renderSquareControl:Xf,rotationStyleHandler:Vf,rotationWithSnapping:Gf,scaleCursorStyleHandler:Rr,scaleOrSkewActionName:kn,scaleSkewCursorStyleHandler:cr,scalingEqually:Tn,scalingX:Zf,scalingXOrSkewingY:Sl,scalingY:qf,scalingYOrSkewingX:Cl,skewCursorStyleHandler:Jf,skewHandlerX:td,skewHandlerY:ed,wrapWithFireEvent:ir,wrapWithFixedAnchor:kr});const ha=i=>i.webgl!==void 0,Bc="precision highp float",p_=`
    `.concat(Bc,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),m_=["type"],__=["type"],v_=new RegExp(Bc,"g");class Bt{get type(){return this.constructor.type}constructor(){let t=bt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m_);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return p_}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:n="highp"}}=pi();n!=="highp"&&(e=e.replace(v_,Bc.replace("highp",n)));const s=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER),a=t.createProgram();if(!s||!o||!a)throw new si("Vertex, fragment shader or program creation error");if(t.shaderSource(s,r),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS))throw new si("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(s)));if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new si("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.attachShader(a,s),t.attachShader(a,o),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new si('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(a)));const l=this.getUniformLocations(t,a)||{};return l.uStepW=t.getUniformLocation(a,"uStepW"),l.uStepH=t.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(t,a),uniformLocations:l}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const r=this.constructor.uniformLocations,n={};for(let s=0;s<r.length;s++)n[r[s]]=t.getUniformLocation(e,r[s]);return n}sendAttributeData(t,e,r){const n=e.aPosition,s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const r=t.destinationWidth,n=t.destinationHeight;t.sourceWidth===r&&t.sourceHeight===n||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,r,n)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){ha(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,r=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(r.program),this.sendAttributeData(e,r.attributeLocations,t.aPosition),e.uniform1f(r.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(r.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,r.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,r){t.activeTexture(r),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:r}=t,n=be({width:e,height:r});t.helpLayer=n}}toObject(){const t=Object.keys(this.constructor.defaults||{});return y({type:this.type},t.reduce(((e,r)=>(e[r]=this[r],e)),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(bt(t,__))}}v(Bt,"type","BaseFilter"),v(Bt,"uniformLocations",[]);const x_={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Hs extends Bt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(x_[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const r=new ct(this.color).getSource(),n=this.alpha,s=r[0]*n,o=r[1]*n,a=r[2]*n,l=1-n;for(let c=0;c<e.length;c+=4){const h=e[c],u=e[c+1],f=e[c+2];let d,g,p;switch(this.mode){case"multiply":d=h*s/255,g=u*o/255,p=f*a/255;break;case"screen":d=255-(255-h)*(255-s)/255,g=255-(255-u)*(255-o)/255,p=255-(255-f)*(255-a)/255;break;case"add":d=h+s,g=u+o,p=f+a;break;case"difference":d=Math.abs(h-s),g=Math.abs(u-o),p=Math.abs(f-a);break;case"subtract":d=h-s,g=u-o,p=f-a;break;case"darken":d=Math.min(h,s),g=Math.min(u,o),p=Math.min(f,a);break;case"lighten":d=Math.max(h,s),g=Math.max(u,o),p=Math.max(f,a);break;case"overlay":d=s<128?2*h*s/255:255-2*(255-h)*(255-s)/255,g=o<128?2*u*o/255:255-2*(255-u)*(255-o)/255,p=a<128?2*f*a/255:255-2*(255-f)*(255-a)/255;break;case"exclusion":d=s+h-2*s*h/255,g=o+u-2*o*u/255,p=a+f-2*a*f/255;break;case"tint":d=s+h*l,g=o+u*l,p=a+f*l}e[c]=d,e[c+1]=g,e[c+2]=p}}sendUniformData(t,e){const r=new ct(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,t.uniform4fv(e.uColor,r)}}v(Hs,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),v(Hs,"type","BlendColor"),v(Hs,"uniformLocations",["uColor"]),X.setClass(Hs);const y_={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},w_=["type","image"];class Ns extends Bt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return y_[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,r=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,r,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:r}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/r,1]}applyTo2d(t){let{imageData:{data:e,width:r,height:n},filterBackend:{resources:s}}=t;const o=this.image;s.blendImage||(s.blendImage=mi());const a=s.blendImage,l=a.getContext("2d");a.width!==r||a.height!==n?(a.width=r,a.height=n):l.clearRect(0,0,r,n),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,n);const c=l.getImageData(0,0,r,n).data;for(let h=0;h<e.length;h+=4){const u=e[h],f=e[h+1],d=e[h+2],g=e[h+3],p=c[h],x=c[h+1],_=c[h+2],S=c[h+3];switch(this.mode){case"multiply":e[h]=u*p/255,e[h+1]=f*x/255,e[h+2]=d*_/255,e[h+3]=g*S/255;break;case"mask":e[h+3]=S}}}sendUniformData(t,e){const r=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,r)}toObject(){return y(y({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:r,image:n}=t,s=bt(t,w_);return ae.fromObject(n,e).then((o=>new this(y(y({},s),{},{image:o}))))}}v(Ns,"type","BlendImage"),v(Ns,"defaults",{mode:"multiply",alpha:1}),v(Ns,"uniformLocations",["uTransformMatrix","uImage"]),X.setClass(Ns);class Us extends Bt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){ha(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:e,width:r,height:n}}=t;this.aspectRatio=r/n,this.horizontal=!0;let s=this.getBlurValue()*r;const o=new Uint8ClampedArray(e),a=15,l=4*r;for(let c=0;c<e.length;c+=4){let h=0,u=0,f=0,d=0,g=0;const p=c-c%l,x=p+l;for(let _=-14;_<a;_++){const S=_/a,T=4*Math.floor(s*S),w=1-Math.abs(S);let M=c+T;M<p?M=p:M>x&&(M=x);const I=e[M+3]*w;h+=e[M]*I,u+=e[M+1]*I,f+=e[M+2]*I,d+=I,g+=w}o[c]=h/d,o[c+1]=u/d,o[c+2]=f/d,o[c+3]=d/g}this.horizontal=!1,s=this.getBlurValue()*n;for(let c=0;c<o.length;c+=4){let h=0,u=0,f=0,d=0,g=0;const p=c%l,x=o.length-l+p;for(let _=-14;_<a;_++){const S=_/a,T=Math.floor(s*S)*l,w=1-Math.abs(S);let M=c+T;M<p?M=p:M>x&&(M=x);const I=o[M+3]*w;h+=o[M]*I,u+=o[M+1]*I,f+=o[M+2]*I,d+=I,g+=w}e[c]=h/d,e[c+1]=u/d,e[c+2]=f/d,e[c+3]=d/g}}sendUniformData(t,e){const r=this.chooseRightDelta();t.uniform2fv(e.uDelta,r)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:e,aspectRatio:r}=this;return e?r>1&&(t=1/r):r<1&&(t=r),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}v(Us,"type","Blur"),v(Us,"defaults",{blur:0}),v(Us,"uniformLocations",["uDelta"]),X.setClass(Us);class Ws extends Bt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=Math.round(255*this.brightness);for(let n=0;n<e.length;n+=4)e[n]+=r,e[n+1]+=r,e[n+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}v(Ws,"type","Brightness"),v(Ws,"defaults",{brightness:0}),v(Ws,"uniformLocations",["uBrightness"]),X.setClass(Ws);const zd={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Br extends Bt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,r=this.matrix,n=this.colorsOnly;for(let s=0;s<e.length;s+=4){const o=e[s],a=e[s+1],l=e[s+2];if(e[s]=o*r[0]+a*r[1]+l*r[2]+255*r[4],e[s+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],e[s+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!n){const c=e[s+3];e[s]+=c*r[3],e[s+1]+=c*r[8],e[s+2]+=c*r[13],e[s+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(t,e){const r=this.matrix,n=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,n),t.uniform4fv(e.uConstants,s)}toObject(){return y(y({},super.toObject()),{},{matrix:[...this.matrix]})}}function Or(i,t){var e;const r=(v(e=class extends Br{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",i),v(e,"defaults",{colorsOnly:!1,matrix:t}),e);return X.setClass(r,i),r}v(Br,"type","ColorMatrix"),v(Br,"defaults",zd),v(Br,"uniformLocations",["uColorMatrix","uConstants"]),X.setClass(Br);Or("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Or("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Or("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Or("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Or("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Or("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Or("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class lu extends Bt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){ha(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach((e=>{e.applyTo(t)}))}toObject(){return{type:this.type,subFilters:this.subFilters.map((t=>t.toObject()))}}isNeutralState(){return!this.subFilters.some((t=>!t.isNeutralState()))}static fromObject(t,e){return Promise.all((t.subFilters||[]).map((r=>X.getClass(r.type).fromObject(r,e)))).then((r=>new this({subFilters:r})))}}v(lu,"type","Composed"),X.setClass(lu);class Ys extends Bt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const r=Math.floor(255*this.contrast),n=259*(r+255)/(255*(259-r));for(let s=0;s<e.length;s+=4)e[s]=n*(e[s]-128)+128,e[s+1]=n*(e[s+1]-128)+128,e[s+2]=n*(e[s+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}v(Ys,"type","Contrast"),v(Ys,"defaults",{contrast:0}),v(Ys,"uniformLocations",["uContrast"]),X.setClass(Ys);const b_={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Xs extends Bt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return b_[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,r=e.data,n=this.matrix,s=Math.round(Math.sqrt(n.length)),o=Math.floor(s/2),a=e.width,l=e.height,c=t.ctx.createImageData(a,l),h=c.data,u=this.opaque?1:0;let f,d,g,p,x,_,S,T,w,M,I,A,j;for(I=0;I<l;I++)for(M=0;M<a;M++){for(x=4*(I*a+M),f=0,d=0,g=0,p=0,j=0;j<s;j++)for(A=0;A<s;A++)S=I+j-o,_=M+A-o,S<0||S>=l||_<0||_>=a||(T=4*(S*a+_),w=n[j*s+A],f+=r[T]*w,d+=r[T+1]*w,g+=r[T+2]*w,u||(p+=r[T+3]*w));h[x]=f,h[x+1]=d,h[x+2]=g,h[x+3]=u?r[x+3]:p}t.imageData=c}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return y(y({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}v(Xs,"type","Convolute"),v(Xs,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),v(Xs,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),X.setClass(Xs);const Hd="Gamma";class Vs extends Bt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const r=this.gamma,n=1/r[0],s=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,n),a.g[l]=255*Math.pow(l/255,s),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<e.length;l+=4)e[l]=a.r[e[l]],e[l+1]=a.g[e[l+1]],e[l+2]=a.b[e[l+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:Hd,gamma:this.gamma.concat()}}}v(Vs,"type",Hd),v(Vs,"defaults",{gamma:[1,1,1]}),v(Vs,"uniformLocations",["uGamma"]),X.setClass(Vs);const S_={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Gs extends Bt{applyTo2d(t){let{imageData:{data:e}}=t;for(let r,n=0;n<e.length;n+=4){const s=e[n],o=e[n+1],a=e[n+2];switch(this.mode){case"average":r=(s+o+a)/3;break;case"lightness":r=(Math.min(s,o,a)+Math.max(s,o,a))/2;break;case"luminosity":r=.21*s+.72*o+.07*a}e[n+2]=e[n+1]=e[n]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return S_[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}v(Gs,"type","Grayscale"),v(Gs,"defaults",{mode:"average"}),v(Gs,"uniformLocations",["uMode"]),X.setClass(Gs);const C_=y(y({},zd),{},{rotation:0});class Na extends Br{calculateMatrix(){const t=this.rotation*Math.PI,e=Ye(t),r=Xe(t),n=1/3,s=Math.sqrt(n)*r,o=1-e;this.matrix=[e+o/3,n*o-s,n*o+s,0,0,n*o+s,e+n*o,n*o-s,0,0,n*o-s,n*o+s,e+n*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}v(Na,"type","HueRotation"),v(Na,"defaults",C_),X.setClass(Na);class $s extends Bt{applyTo2d(t){let{imageData:{data:e}}=t;for(let r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2],this.alpha&&(e[r+3]=255-e[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}v($s,"type","Invert"),v($s,"defaults",{alpha:!1,invert:!0}),v($s,"uniformLocations",["uInvert","uAlpha"]),X.setClass($s);class Ks extends Bt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=this.noise;for(let n=0;n<e.length;n+=4){const s=(.5-Math.random())*r;e[n]+=s,e[n+1]+=s,e[n+2]+=s}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}v(Ks,"type","Noise"),v(Ks,"defaults",{noise:0}),v(Ks,"uniformLocations",["uNoise","uSeed"]),X.setClass(Ks);class Zs extends Bt{applyTo2d(t){let{imageData:{data:e,width:r,height:n}}=t;for(let s=0;s<n;s+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*s*r+4*o,l=e[a],c=e[a+1],h=e[a+2],u=e[a+3];for(let f=s;f<Math.min(s+this.blocksize,n);f++)for(let d=o;d<Math.min(o+this.blocksize,r);d++){const g=4*f*r+4*d;e[g]=l,e[g+1]=c,e[g+2]=h,e[g+3]=u}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}v(Zs,"type","Pixelate"),v(Zs,"defaults",{blocksize:4}),v(Zs,"uniformLocations",["uBlocksize"]),X.setClass(Zs);class qs extends Bt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=255*this.distance,n=new ct(this.color).getSource(),s=[n[0]-r,n[1]-r,n[2]-r],o=[n[0]+r,n[1]+r,n[2]+r];for(let a=0;a<e.length;a+=4){const l=e[a],c=e[a+1],h=e[a+2];l>s[0]&&c>s[1]&&h>s[2]&&l<o[0]&&c<o[1]&&h<o[2]&&(e[a+3]=0)}}sendUniformData(t,e){const r=new ct(this.color).getSource(),n=this.distance,s=[0+r[0]/255-n,0+r[1]/255-n,0+r[2]/255-n,1],o=[r[0]/255+n,r[1]/255+n,r[2]/255+n,1];t.uniform4fv(e.uLow,s),t.uniform4fv(e.uHigh,o)}}v(qs,"type","RemoveColor"),v(qs,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),v(qs,"uniformLocations",["uLow","uHigh"]),X.setClass(qs);class Js extends Bt{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,r=this.getFilterWindow(),n=new Array(r);for(let s=1;s<=r;s++)n[s-1]=t(s*e);return n}generateShader(t){const e=new Array(t);for(let r=1;r<=t;r++)e[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map(((r,n)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(n,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(n,`];
              sum += 2.0 * uTaps[`).concat(n,`];
            `))).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){ha(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const r=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(r)/r}}applyTo2d(t){const e=t.imageData,r=this.scaleX,n=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/n;const s=e.width,o=e.height,a=Math.round(s*r),l=Math.round(o*n);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(t,s,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(t,s,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(t,s,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(t,s,o,a,l):new ImageData(a,l),t.imageData=c}sliceByTwo(t,e,r,n,s){const o=t.imageData,a=.5;let l=!1,c=!1,h=e*a,u=r*a;const f=t.filterBackend.resources;let d=0,g=0;const p=e;let x=0;f.sliceByTwo||(f.sliceByTwo=mi());const _=f.sliceByTwo;(_.width<1.5*e||_.height<r)&&(_.width=1.5*e,_.height=r);const S=_.getContext("2d");for(S.clearRect(0,0,1.5*e,r),S.putImageData(o,0,0),n=Math.floor(n),s=Math.floor(s);!l||!c;)e=h,r=u,n<Math.floor(h*a)?h=Math.floor(h*a):(h=n,l=!0),s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,c=!0),S.drawImage(_,d,g,e,r,p,x,h,u),d=p,g=x,x+=u;return S.getImageData(d,g,n,s)}lanczosResize(t,e,r,n,s){const o=t.imageData.data,a=t.ctx.createImageData(n,s),l=a.data,c=this.lanczosCreate(this.lanczosLobes),h=this.rcpScaleX,u=this.rcpScaleY,f=2/this.rcpScaleX,d=2/this.rcpScaleY,g=Math.ceil(h*this.lanczosLobes/2),p=Math.ceil(u*this.lanczosLobes/2),x={},_={x:0,y:0},S={x:0,y:0};return(function T(w){let M,I,A,j,H,N,V,et,nt,J,gt;for(_.x=(w+.5)*h,S.x=Math.floor(_.x),M=0;M<s;M++){for(_.y=(M+.5)*u,S.y=Math.floor(_.y),H=0,N=0,V=0,et=0,nt=0,I=S.x-g;I<=S.x+g;I++)if(!(I<0||I>=e)){J=Math.floor(1e3*Math.abs(I-_.x)),x[J]||(x[J]={});for(let D=S.y-p;D<=S.y+p;D++)D<0||D>=r||(gt=Math.floor(1e3*Math.abs(D-_.y)),x[J][gt]||(x[J][gt]=c(Math.sqrt(Math.pow(J*f,2)+Math.pow(gt*d,2))/1e3)),A=x[J][gt],A>0&&(j=4*(D*e+I),H+=A,N+=A*o[j],V+=A*o[j+1],et+=A*o[j+2],nt+=A*o[j+3]))}j=4*(M*n+w),l[j]=N/H,l[j+1]=V/H,l[j+2]=et/H,l[j+3]=nt/H}return++w<n?T(w):a})(0)}bilinearFiltering(t,e,r,n,s){let o,a,l,c,h,u,f,d,g,p,x,_,S,T=0;const w=this.rcpScaleX,M=this.rcpScaleY,I=4*(e-1),A=t.imageData.data,j=t.ctx.createImageData(n,s),H=j.data;for(f=0;f<s;f++)for(d=0;d<n;d++)for(h=Math.floor(w*d),u=Math.floor(M*f),g=w*d-h,p=M*f-u,S=4*(u*e+h),x=0;x<4;x++)o=A[S+x],a=A[S+4+x],l=A[S+I+x],c=A[S+I+4+x],_=o*(1-g)*(1-p)+a*g*(1-p)+l*p*(1-g)+c*g*p,H[T++]=_;return j}hermiteFastResize(t,e,r,n,s){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),h=t.imageData.data,u=t.ctx.createImageData(n,s),f=u.data;for(let d=0;d<s;d++)for(let g=0;g<n;g++){const p=4*(g+d*n);let x=0,_=0,S=0,T=0,w=0,M=0,I=0;const A=(d+.5)*a;for(let j=Math.floor(d*a);j<(d+1)*a;j++){const H=Math.abs(A-(j+.5))/c,N=(g+.5)*o,V=H*H;for(let et=Math.floor(g*o);et<(g+1)*o;et++){let nt=Math.abs(N-(et+.5))/l;const J=Math.sqrt(V+nt*nt);J>1&&J<-1||(x=2*J*J*J-3*J*J+1,x>0&&(nt=4*(et+j*e),I+=x*h[nt+3],S+=x,h[nt+3]<255&&(x=x*h[nt+3]/250),T+=x*h[nt],w+=x*h[nt+1],M+=x*h[nt+2],_+=x))}}f[p]=T/_,f[p+1]=w/_,f[p+2]=M/_,f[p+3]=I/S}return u}}v(Js,"type","Resize"),v(Js,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),v(Js,"uniformLocations",["uDelta","uTaps"]),X.setClass(Js);class Qs extends Bt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=-this.saturation;for(let n=0;n<e.length;n+=4){const s=e[n],o=e[n+1],a=e[n+2],l=Math.max(s,o,a);e[n]+=l!==s?(l-s)*r:0,e[n+1]+=l!==o?(l-o)*r:0,e[n+2]+=l!==a?(l-a)*r:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}v(Qs,"type","Saturation"),v(Qs,"defaults",{saturation:0}),v(Qs,"uniformLocations",["uSaturation"]),X.setClass(Qs);class to extends Bt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=-this.vibrance;for(let n=0;n<e.length;n+=4){const s=e[n],o=e[n+1],a=e[n+2],l=Math.max(s,o,a),c=(s+o+a)/3,h=2*Math.abs(l-c)/255*r;e[n]+=l!==s?(l-s)*h:0,e[n+1]+=l!==o?(l-o)*h:0,e[n+2]+=l!==a?(l-a)*h:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}v(to,"type","Vibrance"),v(to,"defaults",{vibrance:0}),v(to,"uniformLocations",["uVibrance"]),X.setClass(to);function T_(i){return{all:i=i||new Map,on:function(t,e){var r=i.get(t);r?r.push(e):i.set(t,[e])},off:function(t,e){var r=i.get(t);r&&(e?r.splice(r.indexOf(e)>>>0,1):i.set(t,[]))},emit:function(t,e){var r=i.get(t);r&&r.slice().map(function(n){n(e)}),(r=i.get("*"))&&r.slice().map(function(n){n(t,e)})}}}class k_{emitter;constructor(){this.emitter=T_()}on(t,e){this.emitter.on(t,e)}off(t,e){this.emitter.off(t,e)}emit(t,e){this.emitter.emit(t,e)}removeAllListeners(){this.emitter.all.clear()}}class O_ extends Di{_render(t){super._render(t),t.save(),t.scale(1/this.scaleX,1/this.scaleY);const e=(this.x2-this.x1)*this.scaleX,r=(this.y2-this.y1)*this.scaleY,n=Math.atan2(r,e);t.translate((this.x2-this.x1)/2*this.scaleX,(this.y2-this.y1)/2*this.scaleY),t.rotate(n),t.beginPath(),t.moveTo(0,0),t.lineTo(-10,5),t.lineTo(-10,-5),t.closePath(),t.lineWidth=this.strokeWidth,t.strokeStyle=this.stroke,t.fillStyle=this.fill,t.stroke(),t.fill(),t.restore()}}const Ua=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Wa(i,t,e,r){i.addEventListener?i.addEventListener(t,e,r):i.attachEvent&&i.attachEvent("on".concat(t),e)}function bn(i,t,e,r){i.removeEventListener?i.removeEventListener(t,e,r):i.detachEvent&&i.detachEvent("on".concat(t),e)}function Nd(i,t){const e=t.slice(0,t.length-1);for(let r=0;r<e.length;r++)e[r]=i[e[r].toLowerCase()];return e}function Ud(i){typeof i!="string"&&(i=""),i=i.replace(/\s/g,"");const t=i.split(",");let e=t.lastIndexOf("");for(;e>=0;)t[e-1]+=",",t.splice(e,1),e=t.lastIndexOf("");return t}function E_(i,t){const e=i.length>=t.length?i:t,r=i.length>=t.length?t:i;let n=!0;for(let s=0;s<e.length;s++)r.indexOf(e[s])===-1&&(n=!1);return n}const ns={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":Ua?173:189,"=":Ua?61:187,";":Ua?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},We={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,meta:91,command:91},On={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Ut={16:!1,18:!1,17:!1,91:!1},Et={};for(let i=1;i<20;i++)ns["f".concat(i)]=111+i;let Tt=[],Yn=null,Wd="all";const Si=new Map,un=i=>ns[i.toLowerCase()]||We[i.toLowerCase()]||i.toUpperCase().charCodeAt(0),D_=i=>Object.keys(ns).find(t=>ns[t]===i),M_=i=>Object.keys(We).find(t=>We[t]===i);function Yd(i){Wd=i||"all"}function ss(){return Wd||"all"}function A_(){return Tt.slice(0)}function P_(){return Tt.map(i=>D_(i)||M_(i)||String.fromCharCode(i))}function F_(){const i=[];return Object.keys(Et).forEach(t=>{Et[t].forEach(e=>{let{key:r,scope:n,mods:s,shortcut:o}=e;i.push({scope:n,shortcut:o,mods:s,keys:r.split("+").map(a=>un(a))})})}),i}function L_(i){const t=i.target||i.srcElement,{tagName:e}=t;let r=!0;const n=e==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(n||e==="TEXTAREA"||e==="SELECT")&&!t.readOnly)&&(r=!1),r}function j_(i){return typeof i=="string"&&(i=un(i)),Tt.indexOf(i)!==-1}function R_(i,t){let e,r;i||(i=ss());for(const n in Et)if(Object.prototype.hasOwnProperty.call(Et,n))for(e=Et[n],r=0;r<e.length;)e[r].scope===i?e.splice(r,1).forEach(o=>{let{element:a}=o;return zc(a)}):r++;ss()===i&&Yd(t||"all")}function I_(i){let t=i.keyCode||i.which||i.charCode;i.key&&i.key.toLowerCase()==="capslock"&&(t=un(i.key));const e=Tt.indexOf(t);if(e>=0&&Tt.splice(e,1),i.key&&i.key.toLowerCase()==="meta"&&Tt.splice(0,Tt.length),(t===93||t===224)&&(t=91),t in Ut){Ut[t]=!1;for(const r in We)We[r]===t&&(le[r]=!1)}}function Xd(i){if(typeof i>"u")Object.keys(Et).forEach(n=>{Array.isArray(Et[n])&&Et[n].forEach(s=>eo(s)),delete Et[n]}),zc(null);else if(Array.isArray(i))i.forEach(n=>{n.key&&eo(n)});else if(typeof i=="object")i.key&&eo(i);else if(typeof i=="string"){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];let[n,s]=e;typeof n=="function"&&(s=n,n=""),eo({key:i,scope:n,method:s,splitKey:"+"})}}const eo=i=>{let{key:t,scope:e,method:r,splitKey:n="+"}=i;Ud(t).forEach(o=>{const a=o.split(n),l=a.length,c=a[l-1],h=c==="*"?"*":un(c);if(!Et[h])return;e||(e=ss());const u=l>1?Nd(We,a):[],f=[];Et[h]=Et[h].filter(d=>{const p=(r?d.method===r:!0)&&d.scope===e&&E_(d.mods,u);return p&&f.push(d.element),!p}),f.forEach(d=>zc(d))})};function cu(i,t,e,r){if(t.element!==r)return;let n;if(t.scope===e||t.scope==="all"){n=t.mods.length>0;for(const s in Ut)Object.prototype.hasOwnProperty.call(Ut,s)&&(!Ut[s]&&t.mods.indexOf(+s)>-1||Ut[s]&&t.mods.indexOf(+s)===-1)&&(n=!1);(t.mods.length===0&&!Ut[16]&&!Ut[18]&&!Ut[17]&&!Ut[91]||n||t.shortcut==="*")&&(t.keys=[],t.keys=t.keys.concat(Tt),t.method(i,t)===!1&&(i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation&&i.stopPropagation(),i.cancelBubble&&(i.cancelBubble=!0)))}}function hu(i,t){const e=Et["*"];let r=i.keyCode||i.which||i.charCode;if(i.key&&i.key.toLowerCase()==="capslock"||!le.filter.call(this,i))return;if((r===93||r===224)&&(r=91),Tt.indexOf(r)===-1&&r!==229&&Tt.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(a=>{const l=On[a];i[a]&&Tt.indexOf(l)===-1?Tt.push(l):!i[a]&&Tt.indexOf(l)>-1?Tt.splice(Tt.indexOf(l),1):a==="metaKey"&&i[a]&&(Tt=Tt.filter(c=>c in On||c===r))}),r in Ut){Ut[r]=!0;for(const a in We)if(Object.prototype.hasOwnProperty.call(We,a)){const l=On[We[a]];le[a]=i[l]}if(!e)return}for(const a in Ut)Object.prototype.hasOwnProperty.call(Ut,a)&&(Ut[a]=i[On[a]]);i.getModifierState&&!(i.altKey&&!i.ctrlKey)&&i.getModifierState("AltGraph")&&(Tt.indexOf(17)===-1&&Tt.push(17),Tt.indexOf(18)===-1&&Tt.push(18),Ut[17]=!0,Ut[18]=!0);const n=ss();if(e)for(let a=0;a<e.length;a++)e[a].scope===n&&(i.type==="keydown"&&e[a].keydown||i.type==="keyup"&&e[a].keyup)&&cu(i,e[a],n,t);if(!(r in Et))return;const s=Et[r],o=s.length;for(let a=0;a<o;a++)if((i.type==="keydown"&&s[a].keydown||i.type==="keyup"&&s[a].keyup)&&s[a].key){const l=s[a],{splitKey:c}=l,h=l.key.split(c),u=[];for(let f=0;f<h.length;f++)u.push(un(h[f]));u.sort().join("")===Tt.sort().join("")&&cu(i,l,n,t)}}function le(i,t,e){Tt=[];const r=Ud(i);let n=[],s="all",o=document,a=0,l=!1,c=!0,h="+",u=!1,f=!1;for(e===void 0&&typeof t=="function"&&(e=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(s=t.scope),t.element&&(o=t.element),t.keyup&&(l=t.keyup),t.keydown!==void 0&&(c=t.keydown),t.capture!==void 0&&(u=t.capture),typeof t.splitKey=="string"&&(h=t.splitKey),t.single===!0&&(f=!0)),typeof t=="string"&&(s=t),f&&Xd(i,s);a<r.length;a++)i=r[a].split(h),n=[],i.length>1&&(n=Nd(We,i)),i=i[i.length-1],i=i==="*"?"*":un(i),i in Et||(Et[i]=[]),Et[i].push({keyup:l,keydown:c,scope:s,mods:n,shortcut:r[a],method:e,key:r[a],splitKey:h,element:o});if(typeof o<"u"&&window){if(!Si.has(o)){const d=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return hu(p,o)},g=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;hu(p,o),I_(p)};Si.set(o,{keydownListener:d,keyupListenr:g,capture:u}),Wa(o,"keydown",d,u),Wa(o,"keyup",g,u)}if(!Yn){const d=()=>{Tt=[]};Yn={listener:d,capture:u},Wa(window,"focus",d,u)}}}function B_(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Et).forEach(e=>{Et[e].filter(n=>n.scope===t&&n.shortcut===i).forEach(n=>{n&&n.method&&n.method()})})}function zc(i){const t=Object.values(Et).flat();if(t.findIndex(r=>{let{element:n}=r;return n===i})<0){const{keydownListener:r,keyupListenr:n,capture:s}=Si.get(i)||{};r&&n&&(bn(i,"keyup",n,s),bn(i,"keydown",r,s),Si.delete(i))}if((t.length<=0||Si.size<=0)&&(Object.keys(Si).forEach(n=>{const{keydownListener:s,keyupListenr:o,capture:a}=Si.get(n)||{};s&&o&&(bn(n,"keyup",o,a),bn(n,"keydown",s,a),Si.delete(n))}),Si.clear(),Object.keys(Et).forEach(n=>delete Et[n]),Yn)){const{listener:n,capture:s}=Yn;bn(window,"focus",n,s),Yn=null}}const Ya={getPressedKeyString:P_,setScope:Yd,getScope:ss,deleteScope:R_,getPressedKeyCodes:A_,getAllKeyCodes:F_,isPressed:j_,filter:L_,trigger:B_,unbind:Xd,keyMap:ns,modifier:We,modifierMap:On};for(const i in Ya)Object.prototype.hasOwnProperty.call(Ya,i)&&(le[i]=Ya[i]);if(typeof window<"u"){const i=window.hotkeys;le.noConflict=t=>(t&&window.hotkeys===le&&(window.hotkeys=i),le),window.hotkeys=le}const en={lrdu:"left,right,down,up",backspace:"backspace",ctrlz:"ctrl+z",ctrly:"ctrl+y",ctrlc:"ctrl+c",ctrlv:"ctrl+v"};function z_(i){let t=null;le(en.ctrlc,()=>{const e=i.getActiveObject();e&&e.clone().then(r=>{i.discardActiveObject(),r.set({left:r.left+20,top:r.top+20,evented:!0}),t=r})}),le(en.ctrlv,()=>{t&&(i.add(t),i.setActiveObject(t))})}function H_(i){le(en.backspace,()=>{const t=i.getActiveObjects();t&&(t.map(e=>i.remove(e)),i.requestRenderAll(),i.discardActiveObject())}),le(en.lrdu,(t,e)=>{const r=i.getActiveObject();if(r){switch(e.key){case"left":r.set("left",r.left-1);break;case"right":r.set("left",r.left+1);break;case"down":r.set("top",r.top+1);break;case"up":r.set("top",r.top-1);break}i.renderAll()}}),z_(i)}const N_="data:image/svg+xml,%3csvg%20width='12'%20height='24'%20viewBox='0%200%2012%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='4'%20y='4'%20width='4'%20height='16'%20rx='2'%20fill='white'/%3e%3crect%20x='4.25'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='12'%20height='24'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",U_="data:image/svg+xml,%3csvg%20width='24'%20height='12'%20viewBox='0%200%2024%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='20'%20y='4'%20width='4'%20height='16'%20rx='2'%20transform='rotate(90%2020%204)'%20fill='white'/%3e%3crect%20x='19.75'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20transform='rotate(90%2019.75%204.25)'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='24'%20height='12'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",W_="data:image/svg+xml,%3csvg%20width='19'%20height='18'%20viewBox='0%200%2019%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0.996094'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",Y_="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cpath%20d='M10.8047%2011.1242L9.49934%2011.1242L9.49934%209.81885'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.94856%206.72607L8.25391%206.72607L8.25391%208.03142'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9.69517%206.92267C10.007%207.03301%2010.2858%207.22054%2010.5055%207.46776C10.7252%207.71497%2010.8787%208.01382%2010.9517%208.33642C11.0247%208.65902%2011.0148%208.99485%2010.9229%209.31258C10.831%209.63031%2010.6601%209.91958%2010.4262%2010.1534L9.49701%2011.0421M8.25792%206.72607L7.30937%207.73554C7.07543%207.96936%206.90454%208.25863%206.81264%208.57636C6.72073%208.89408%206.71081%209.22992%206.78381%209.55251C6.8568%209.87511%207.01032%2010.174%207.23005%2010.4212C7.44978%2010.6684%207.72855%2010.8559%208.04036%2010.9663'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",Fl=document.createElement("img");Fl.src=N_;const Ll=document.createElement("img");Ll.src=U_;const En=document.createElement("img");En.src=W_;const Vd=document.createElement("img");Vd.src=Y_;const X_="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",Gd=document.createElement("img");Gd.src=X_;function Ze(i,t,e){return(r,n,s,o,a)=>{r.save(),r.translate(n,s),r.rotate(tn.degreesToRadians(a.angle)),r.drawImage(i,-t/2,-e/2,t,e),r.restore()}}function V_(i){const t=new mt({x:-.5,y:0,offsetX:-1,cursorStyleHandler:wt.scaleSkewCursorStyleHandler,actionHandler:wt.scalingXOrSkewingY,getActionName:wt.scaleOrSkewActionName,render:Ze(Fl,20,25)}),e=new mt({x:.5,y:0,offsetX:1,cursorStyleHandler:wt.scaleSkewCursorStyleHandler,actionHandler:wt.scalingXOrSkewingY,getActionName:wt.scaleOrSkewActionName,render:Ze(Fl,20,25)}),r=new mt({x:0,y:.5,offsetY:1,cursorStyleHandler:wt.scaleSkewCursorStyleHandler,actionHandler:wt.scalingYOrSkewingX,getActionName:wt.scaleOrSkewActionName,render:Ze(Ll,25,20)}),n=new mt({x:0,y:-.5,offsetY:-1,cursorStyleHandler:wt.scaleSkewCursorStyleHandler,actionHandler:wt.scalingYOrSkewingX,getActionName:wt.scaleOrSkewActionName,render:Ze(Ll,25,20)}),s=new mt({x:-.5,y:-.5,cursorStyleHandler:wt.scaleCursorStyleHandler,actionHandler:wt.scalingEqually,render:Ze(En,25,25)}),o=new mt({x:-.5,y:.5,cursorStyleHandler:wt.scaleCursorStyleHandler,actionHandler:wt.scalingEqually,render:Ze(En,25,25)}),a=new mt({x:.5,y:-.5,cursorStyleHandler:wt.scaleCursorStyleHandler,actionHandler:wt.scalingEqually,render:Ze(En,25,25)}),l=new mt({x:.5,y:.5,cursorStyleHandler:wt.scaleCursorStyleHandler,actionHandler:wt.scalingEqually,render:Ze(En,25,25)}),c=new mt({x:0,y:.5,cursorStyle:"pointer",actionHandler:wt.rotationWithSnapping,offsetY:30,actionName:"rotate",render:Ze(Vd,40,40)});function h(g,p,x,_){if(p.action==="rotate")return!0;const S=i.getActiveObjects();return S.length>0&&(S.forEach(T=>i.remove(T)),i.requestRenderAll(),i.discardActiveObject()),!0}const u=new mt({x:.5,y:-.5,offsetY:-16,offsetX:16,cursorStyle:"pointer",mouseUpHandler:h,render:Ze(Gd,24,24),sizeX:24,sizeY:24}),f=ui.ownDefaults,d=ui.ownDefaults.controls;ui.ownDefaults={...f,transparentCorners:!1,borderColor:"#51B9F9",cornerColor:"#FFF",borderScaleFactor:2.5,cornerStyle:"circle",cornerStrokeColor:"#0E98FC",borderOpacityWhenMoving:1,controls:{...d,tl:s,bl:o,tr:a,br:l,ml:t,mr:e,mb:r,mt:n,mtr:c,deleteControl:u}}}function Dn(i){return`url("data:image/svg+xml,%3Csvg height='18' width='18' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: black;'%3E%3Cg fill='none' transform='rotate(${i} 16 16)'%3E%3Cpath d='M22.4484 0L32 9.57891L22.4484 19.1478V13.1032C17.6121 13.8563 13.7935 17.6618 13.0479 22.4914H19.2141L9.60201 32.01L0 22.4813H6.54912C7.36524 14.1073 14.0453 7.44023 22.4484 6.61688V0Z' fill='white'/%3E%3Cpath d='M24.0605 3.89587L29.7229 9.57896L24.0605 15.252V11.3562C17.0479 11.4365 11.3753 17.0895 11.3048 24.0879H15.3048L9.60201 29.7308L3.90932 24.0879H8.0806C8.14106 15.3223 15.2645 8.22345 24.0605 8.14313V3.89587Z' fill='black'/%3E%3C/g%3E%3C/svg%3E ") 12 12,crosshair`}function io(i){return(t,e,r)=>Dn(r.angle+i)}function G_(i){const t=new mt({x:-.5,y:-.5,offsetY:-10,offsetX:-10,actionName:"rotate",actionHandler:wt.rotationWithSnapping,cursorStyleHandler:io(0),render:()=>!1}),e=new mt({x:.5,y:-.5,offsetY:-10,offsetX:10,actionName:"rotate",actionHandler:wt.rotationWithSnapping,cursorStyleHandler:io(90),render:()=>!1}),r=new mt({x:.5,y:.5,offsetY:10,offsetX:10,actionName:"rotate",actionHandler:wt.rotationWithSnapping,cursorStyleHandler:io(180),render:()=>!1}),n=new mt({x:-.5,y:.5,offsetY:10,offsetX:-10,actionName:"rotate",actionHandler:wt.rotationWithSnapping,cursorStyleHandler:io(270),render:()=>!1}),s=ui.ownDefaults.controls;ui.ownDefaults.controls={...s,mtr1:t,mtr2:e,mtr3:r,mtr4:n},i.on("object:rotating",o=>{const a=o.target,l=o.transform;if(!a||!l||!l.corner)return;const c=i.upperCanvasEl;if(c)switch(l.corner){case"mtr1":c.style.cursor=Dn(a.angle);break;case"mtr2":c.style.cursor=Dn(a.angle+90);break;case"mtr3":c.style.cursor=Dn(a.angle+180);break;case"mtr4":c.style.cursor=Dn(a.angle+270);break}})}function $d(i,t,e){return t=Ce(t),J_(i,Kd()?Reflect.construct(t,e||[],Ce(i).constructor):t.apply(i,e))}function Kd(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kd=function(){return!!i})()}function $_(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r,n,s,o,a=[],l=!0,c=!1;try{if(s=(e=e.call(i)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(r=s.call(e)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(h){c=!0,n=h}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw n}}return a}}function uu(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,r)}return e}function K_(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?uu(Object(e),!0).forEach(function(r){os(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):uu(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}function Ie(){Ie=function(){return t};var i,t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(D,k,O){D[k]=O.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(D,k,O){return Object.defineProperty(D,k,{value:O,enumerable:!0,configurable:!0,writable:!0}),D[k]}try{c({},"")}catch{c=function(k,O,$){return k[O]=$}}function h(D,k,O,$){var W=k&&k.prototype instanceof _?k:_,it=Object.create(W.prototype),ot=new J($||[]);return n(it,"_invoke",{value:N(D,O,ot)}),it}function u(D,k,O){try{return{type:"normal",arg:D.call(k,O)}}catch($){return{type:"throw",arg:$}}}t.wrap=h;var f="suspendedStart",d="suspendedYield",g="executing",p="completed",x={};function _(){}function S(){}function T(){}var w={};c(w,o,function(){return this});var M=Object.getPrototypeOf,I=M&&M(M(gt([])));I&&I!==e&&r.call(I,o)&&(w=I);var A=T.prototype=_.prototype=Object.create(w);function j(D){["next","throw","return"].forEach(function(k){c(D,k,function(O){return this._invoke(k,O)})})}function H(D,k){function O(W,it,ot,Dt){var St=u(D[W],D,it);if(St.type!=="throw"){var de=St.arg,Rt=de.value;return Rt&&typeof Rt=="object"&&r.call(Rt,"__await")?k.resolve(Rt.__await).then(function(zt){O("next",zt,ot,Dt)},function(zt){O("throw",zt,ot,Dt)}):k.resolve(Rt).then(function(zt){de.value=zt,ot(de)},function(zt){return O("throw",zt,ot,Dt)})}Dt(St.arg)}var $;n(this,"_invoke",{value:function(W,it){function ot(){return new k(function(Dt,St){O(W,it,Dt,St)})}return $=$?$.then(ot,ot):ot()}})}function N(D,k,O){var $=f;return function(W,it){if($===g)throw new Error("Generator is already running");if($===p){if(W==="throw")throw it;return{value:i,done:!0}}for(O.method=W,O.arg=it;;){var ot=O.delegate;if(ot){var Dt=V(ot,O);if(Dt){if(Dt===x)continue;return Dt}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if($===f)throw $=p,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);$=g;var St=u(D,k,O);if(St.type==="normal"){if($=O.done?p:d,St.arg===x)continue;return{value:St.arg,done:O.done}}St.type==="throw"&&($=p,O.method="throw",O.arg=St.arg)}}}function V(D,k){var O=k.method,$=D.iterator[O];if($===i)return k.delegate=null,O==="throw"&&D.iterator.return&&(k.method="return",k.arg=i,V(D,k),k.method==="throw")||O!=="return"&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+O+"' method")),x;var W=u($,D.iterator,k.arg);if(W.type==="throw")return k.method="throw",k.arg=W.arg,k.delegate=null,x;var it=W.arg;return it?it.done?(k[D.resultName]=it.value,k.next=D.nextLoc,k.method!=="return"&&(k.method="next",k.arg=i),k.delegate=null,x):it:(k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,x)}function et(D){var k={tryLoc:D[0]};1 in D&&(k.catchLoc=D[1]),2 in D&&(k.finallyLoc=D[2],k.afterLoc=D[3]),this.tryEntries.push(k)}function nt(D){var k=D.completion||{};k.type="normal",delete k.arg,D.completion=k}function J(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(et,this),this.reset(!0)}function gt(D){if(D||D===""){var k=D[o];if(k)return k.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var O=-1,$=function W(){for(;++O<D.length;)if(r.call(D,O))return W.value=D[O],W.done=!1,W;return W.value=i,W.done=!0,W};return $.next=$}}throw new TypeError(typeof D+" is not iterable")}return S.prototype=T,n(A,"constructor",{value:T,configurable:!0}),n(T,"constructor",{value:S,configurable:!0}),S.displayName=c(T,l,"GeneratorFunction"),t.isGeneratorFunction=function(D){var k=typeof D=="function"&&D.constructor;return!!k&&(k===S||(k.displayName||k.name)==="GeneratorFunction")},t.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,T):(D.__proto__=T,c(D,l,"GeneratorFunction")),D.prototype=Object.create(A),D},t.awrap=function(D){return{__await:D}},j(H.prototype),c(H.prototype,a,function(){return this}),t.AsyncIterator=H,t.async=function(D,k,O,$,W){W===void 0&&(W=Promise);var it=new H(h(D,k,O,$),W);return t.isGeneratorFunction(k)?it:it.next().then(function(ot){return ot.done?ot.value:it.next()})},j(A),c(A,l,"Generator"),c(A,o,function(){return this}),c(A,"toString",function(){return"[object Generator]"}),t.keys=function(D){var k=Object(D),O=[];for(var $ in k)O.push($);return O.reverse(),function W(){for(;O.length;){var it=O.pop();if(it in k)return W.value=it,W.done=!1,W}return W.done=!0,W}},t.values=gt,J.prototype={constructor:J,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(nt),!D)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=i)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var k=this;function O(St,de){return it.type="throw",it.arg=D,k.next=St,de&&(k.method="next",k.arg=i),!!de}for(var $=this.tryEntries.length-1;$>=0;--$){var W=this.tryEntries[$],it=W.completion;if(W.tryLoc==="root")return O("end");if(W.tryLoc<=this.prev){var ot=r.call(W,"catchLoc"),Dt=r.call(W,"finallyLoc");if(ot&&Dt){if(this.prev<W.catchLoc)return O(W.catchLoc,!0);if(this.prev<W.finallyLoc)return O(W.finallyLoc)}else if(ot){if(this.prev<W.catchLoc)return O(W.catchLoc,!0)}else{if(!Dt)throw new Error("try statement without catch or finally");if(this.prev<W.finallyLoc)return O(W.finallyLoc)}}}},abrupt:function(D,k){for(var O=this.tryEntries.length-1;O>=0;--O){var $=this.tryEntries[O];if($.tryLoc<=this.prev&&r.call($,"finallyLoc")&&this.prev<$.finallyLoc){var W=$;break}}W&&(D==="break"||D==="continue")&&W.tryLoc<=k&&k<=W.finallyLoc&&(W=null);var it=W?W.completion:{};return it.type=D,it.arg=k,W?(this.method="next",this.next=W.finallyLoc,x):this.complete(it)},complete:function(D,k){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&k&&(this.next=k),x},finish:function(D){for(var k=this.tryEntries.length-1;k>=0;--k){var O=this.tryEntries[k];if(O.finallyLoc===D)return this.complete(O.completion,O.afterLoc),nt(O),x}},catch:function(D){for(var k=this.tryEntries.length-1;k>=0;--k){var O=this.tryEntries[k];if(O.tryLoc===D){var $=O.completion;if($.type==="throw"){var W=$.arg;nt(O)}return W}}throw new Error("illegal catch attempt")},delegateYield:function(D,k,O){return this.delegate={iterator:gt(D),resultName:k,nextLoc:O},this.method==="next"&&(this.arg=i),x}},t}function Z_(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var r=e.call(i,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function Zd(i){var t=Z_(i,"string");return typeof t=="symbol"?t:String(t)}function fu(i,t,e,r,n,s,o){try{var a=i[s](o),l=a.value}catch(c){e(c);return}a.done?t(l):Promise.resolve(l).then(r,n)}function Xn(i){return function(){var t=this,e=arguments;return new Promise(function(r,n){var s=i.apply(t,e);function o(l){fu(s,r,n,o,a,"next",l)}function a(l){fu(s,r,n,o,a,"throw",l)}o(void 0)})}}function qd(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function q_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Zd(r.key),r)}}function Jd(i,t,e){return t&&q_(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function os(i,t,e){return t=Zd(t),t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Qd(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&jl(i,t)}function Ce(i){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(i)}function jl(i,t){return jl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},jl(i,t)}function Ro(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function J_(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ro(i)}function Q_(i,t){for(;!Object.prototype.hasOwnProperty.call(i,t)&&(i=Ce(i),i!==null););return i}function Qe(){return typeof Reflect<"u"&&Reflect.get?Qe=Reflect.get.bind():Qe=function(t,e,r){var n=Q_(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(arguments.length<3?t:r):s.value}},Qe.apply(this,arguments)}function du(i,t){return ev(i)||$_(i,t)||tg(i,t)||nv()}function as(i){return tv(i)||iv(i)||tg(i)||rv()}function tv(i){if(Array.isArray(i))return Rl(i)}function ev(i){if(Array.isArray(i))return i}function iv(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function tg(i,t){if(i){if(typeof i=="string")return Rl(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Rl(i,t)}}function Rl(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function rv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ls=(function(i){Qd(t,i);function t(e,r){var n;return qd(this,t),n=$d(this,t,[e,K_({originX:"center",originY:"center",left:0,top:0,layoutManager:new Qr(new Al)},r)]),os(Ro(n),"blockErasing",!1),n}return Jd(t,[{key:"drawObject",value:function(r){var n=[],s=[];this._objects.forEach(function(o){return(o instanceof Ei?n:s).push(o)}),r.save(),r.fillStyle="black",r.fillRect(-this.width/2,-this.height/2,this.width,this.height),r.restore(),!this.blockErasing&&n.forEach(function(o){o.render(r)}),s.forEach(function(o){o.globalCompositeOperation=o.inverted?"destination-out":"source-in",o.render(r)})}}]),t})(Ae);os(ls,"type","clipping");X.setClass(ls);var gu=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"source-over";t.save(),t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",t.globalCompositeOperation=r,t.resetTransform(),t.drawImage(e.canvas,0,0),t.restore()},sv=function(t,e,r){gu(t,e,"destination-out"),r?gu(e,r,"source-in"):(e.save(),e.resetTransform(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore())};function eg(i){return i.flatMap(function(t){return!t.erasable||t.isNotVisible()?[]:t instanceof Ae&&t.erasable==="deep"?eg(t.getObjects()):[t]})}function ov(i,t,e){t.clearContext(i),i.imageSmoothingEnabled=t.imageSmoothingEnabled,i.imageSmoothingQuality="high",i.patternQuality="best",t._renderBackground(i),i.save(),i.transform.apply(i,as(t.viewportTransform)),e.forEach(function(n){return n.render(i)}),i.restore();var r=t.clipPath;r&&(r._set("canvas",t),r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),t.drawClipPathOnCanvas(i,r)),t._renderOverlay(i)}function av(i,t,e){var r=t.inverted,n=t.opacity,s=e.canvas,o=e.objects,a=o===void 0?s._objectsToRender||s._objects:o,l=e.background,c=l===void 0?s.backgroundImage:l,h=e.overlay,u=h===void 0?s.overlayImage:h,f=1-n,d=eg([].concat(as(a),as([c,u].filter(function(g){return!!g})))).map(function(g){if(r){if(g.clipPath instanceof ls)return g.clipPath.blockErasing=!0,g.clipPath.set("dirty",!0),g.set("dirty",!0),{object:g,clipPath:g.clipPath}}else{var p,x=g.opacity;return g.opacity*=f,(p=g.parent)===null||p===void 0||p.set("dirty",!0),{object:g,opacity:x}}});ov(i,s,a),d.forEach(function(g){if(g)if(g.opacity){var p;g.object.opacity=g.opacity,(p=g.object.parent)===null||p===void 0||p.set("dirty",!0)}else g.clipPath&&(g.clipPath.blockErasing=!1,g.clipPath.set("dirty",!0),g.object.set("dirty",!0))})}function ig(i,t){return i.flatMap(function(e){return!e.erasable||!e.intersectsWithObject(t)?[]:e instanceof Ae&&e.erasable==="deep"?ig(e.getObjects(),t):[e]})}var lv=function(t){var e=t.clipPath;if(e instanceof ls)return e;var r=t.strokeWidth,n=new C(r,r),s=t.strokeUniform?n.divide(t.getObjectScaling()):n,o=new ls([],{width:t.width+s.x,height:t.height+s.y});if(e){var a=e.translateToOriginPoint(new C,e.originX,e.originY),l=a.x,c=a.y;e.originX=e.originY="center",tn.sendObjectToPlane(e,void 0,tn.createTranslateMatrix(l,c)),o.add(e)}return t.clipPath=o};function rg(i,t){var e=lv(i);e.add(t),e.set("dirty",!0),i.set("dirty",!0)}function cv(i,t){return Il.apply(this,arguments)}function Il(){return Il=Xn(Ie().mark(function i(t,e){var r;return Ie().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.clone();case 2:return r=s.sent,tn.sendObjectToPlane(r,void 0,t.calcTransformMatrix()),rg(t,r),s.abrupt("return",r);case 6:case"end":return s.stop()}},i)})),Il.apply(this,arguments)}function hv(i,t,e){return Bl.apply(this,arguments)}function Bl(){return Bl=Xn(Ie().mark(function i(t,e,r){var n,s;return Ie().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.clone();case 2:return n=a.sent,s=e&&t.translateToOriginPoint(new C,t.originX,t.originY),tn.sendObjectToPlane(n,void 0,s?tn.multiplyTransformMatrixArray([[1,0,0,1,s.x,s.y],e,[1,0,0,1,-s.x,-s.y],t.calcTransformMatrix()]):t.calcTransformMatrix()),rg(t,n),a.abrupt("return",n);case 7:case"end":return a.stop()}},i)})),Bl.apply(this,arguments)}var uv=function(t,e,r){var n=r.width,s=r.height,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;t.width=n,t.height=s,o>1&&(t.setAttribute("width",(n*o).toString()),t.setAttribute("height",(s*o).toString()),e.scale(o,o))},fv=(function(i){Qd(t,i);function t(e){var r;qd(this,t),r=$d(this,t,[e]),os(Ro(r),"inverted",!1),os(Ro(r),"active",!1);var n=document.createElement("canvas"),s=n.getContext("2d");if(!s)throw new Error("Failed to get context");return uv(n,s,e,r.canvas.getRetinaScaling()),r.effectContext=s,r.eventEmitter=new EventTarget,r}return Jd(t,[{key:"on",value:function(r,n,s){var o=this;return this.eventEmitter.addEventListener(r,n,s),function(){return o.eventEmitter.removeEventListener(r,n,s)}}},{key:"drawEffect",value:function(){av(this.effectContext,{opacity:new ct(this.color).getAlpha(),inverted:this.inverted},{canvas:this.canvas})}},{key:"_setBrushStyles",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop;Qe(Ce(t.prototype),"_setBrushStyles",this).call(this,r),r.strokeStyle="black"}},{key:"needsFullRender",value:function(){return!0}},{key:"_render",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.getTopContext();Qe(Ce(t.prototype),"_render",this).call(this,r),sv(this.canvas.getContext(),r,this.effectContext)}},{key:"onMouseDown",value:function(r,n){var s=this;this.eventEmitter.dispatchEvent(new CustomEvent("start",{detail:n,cancelable:!0}))&&(this.active=!0,this.eventEmitter.dispatchEvent(new CustomEvent("redraw",{detail:{type:"start"},cancelable:!0}))&&this.drawEffect(),this._disposer=this.canvas.on("after:render",function(o){var a=o.ctx;a===s.canvas.getContext()&&(s.eventEmitter.dispatchEvent(new CustomEvent("redraw",{detail:{type:"render"},cancelable:!0}))&&s.drawEffect(),s._render())}),Qe(Ce(t.prototype),"onMouseDown",this).call(this,r,n))}},{key:"onMouseMove",value:function(r,n){this.active&&this.eventEmitter.dispatchEvent(new CustomEvent("move",{detail:n,cancelable:!0}))&&Qe(Ce(t.prototype),"onMouseMove",this).call(this,r,n)}},{key:"onMouseUp",value:function(r){var n;return this.active&&Qe(Ce(t.prototype),"onMouseUp",this).call(this,r),this.active=!1,(n=this._disposer)===null||n===void 0||n.call(this),delete this._disposer,!1}},{key:"convertPointsToSVGPath",value:function(r){return Qe(Ce(t.prototype),"convertPointsToSVGPath",this).call(this,this.decimate?this.decimatePoints(r,this.decimate):r)}},{key:"createPath",value:function(r){var n=Qe(Ce(t.prototype),"createPath",this).call(this,r);return n.set(this.inverted?{globalCompositeOperation:"source-over",stroke:"white"}:{globalCompositeOperation:"destination-out",stroke:"black",opacity:new ct(this.color).getAlpha()}),n}},{key:"commit",value:(function(){var e=Xn(Ie().mark(function n(s){var o,a;return Ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=s.path,a=s.targets,c.t0=Map,c.next=4,Promise.all([].concat(as(a.map((function(){var h=Xn(Ie().mark(function u(f){return Ie().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.t0=f,g.next=3,cv(f,o);case 3:return g.t1=g.sent,g.abrupt("return",[g.t0,g.t1]);case 5:case"end":return g.stop()}},u)}));return function(u){return h.apply(this,arguments)}})())),as([[this.canvas.backgroundImage,this.canvas.backgroundVpt?void 0:this.canvas.viewportTransform],[this.canvas.overlayImage,this.canvas.overlayVpt?void 0:this.canvas.viewportTransform]].filter(function(h){var u=du(h,1),f=u[0];return!!(f!=null&&f.erasable)}).map((function(){var h=Xn(Ie().mark(function u(f){var d,g,p;return Ie().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return d=du(f,2),g=d[0],p=d[1],_.t0=g,_.next=4,hv(g,p,o);case 4:return _.t1=_.sent,_.abrupt("return",[_.t0,_.t1]);case 6:case"end":return _.stop()}},u)}));return function(u){return h.apply(this,arguments)}})()))));case 4:return c.t1=c.sent,c.abrupt("return",new c.t0(c.t1));case 6:case"end":return c.stop()}},n,this)}));function r(n){return e.apply(this,arguments)}return r})()},{key:"_finalizeAndAddPath",value:function(){var r=this._points;if(r.length<2){this.eventEmitter.dispatchEvent(new CustomEvent("cancel",{cancelable:!1}));return}var n=this.createPath(this.convertPointsToSVGPath(r)),s=ig(this.canvas.getObjects(),n);this.eventEmitter.dispatchEvent(new CustomEvent("end",{detail:{path:n,targets:s},cancelable:!0}))&&this.commit({path:n,targets:s}),this.canvas.clearContext(this.canvas.contextTop),this.canvas.requestRenderAll(),this._resetShadow()}},{key:"dispose",value:function(){var r=this.effectContext.canvas;r.width=r.height=0}}]),t})(rs);class dv extends k_{canvas;currentShape=null;drawingTool="";isDrawing=!1;startX=0;startY=0;options={stroke:"#ff0000",strokeWidth:5,fill:"transparent",opacity:1,erasable:!0};images=[];curImageIndex=0;constructor(t){super(),this.canvas=new Dl(t,{isDrawingMode:!0,selection:!1,includeDefaultValues:!1}),this.setDrawingTool("pencil"),H_(this.canvas),V_(this.canvas),G_(this.canvas),this.initEvent()}getCanvas(){return this.canvas}clearCanvas(){this.canvas.clear()}setBackgroundColor(t){this.canvas.backgroundColor=t,this.canvas.requestRenderAll()}setBackgroundImage(t,e){ae.fromURL(t).then(r=>{if(!r)return;const n=this.canvas.getWidth(),o=this.canvas.getHeight()/r.height,a=r.width*o;r.set({scaleX:o,scaleY:o,top:0,left:(n-a)/2,originX:"left",originY:"top",selectable:!1,evented:!1,...e}),this.canvas.backgroundImage=r,this.canvas.requestRenderAll()})}addObject(t){this.canvas.add(t)}removeObject(t){this.canvas.remove(t)}removeAllObject(){this.canvas.getObjects().forEach(e=>this.canvas.remove(e))}getObjects(){return this.canvas.getObjects()}getActiveObject(){return this.canvas.getActiveObject()??null}setActiveObject(t){t?this.canvas.setActiveObject(t):this.canvas.discardActiveObject()}setWidth(t){this.canvas.setWidth(t)}setHeight(t){this.canvas.setHeight(t)}setDrawingTool(t){if(this.drawingTool!==t)if(this.canvas.isDrawingMode=!1,this.canvas.selection=!1,this.canvas.defaultCursor="default",this.drawingTool=t,t==="pencil")this.drawFreeDraw();else if(t==="eraser")this.eraser();else if(t==="select")this.canvas.selection=!0,this.canvas.defaultCursor="auto";else if(t==="text"){const e=this.canvas.getActiveObject();e instanceof He&&e.isEditing&&e.exitEditing()}else this.canvas.defaultCursor="crosshair"}setOptions(t){this.options={...this.options,...t}}drawRect(t){const e=new Re({...this.options,...t});this.canvas.add(e),this.currentShape=e}drawTriangle(t){const e=new Yi({...this.options,...t});this.canvas.add(e),this.currentShape=e}drawCircle(t){const e=new ei({...this.options,...t});this.canvas.add(e),this.currentShape=e}drawEllipse(t){const e=new ii({...this.options,...t});this.canvas.add(e),this.currentShape=e}drawLine(t,e,r,n,s){const o=new Di([t,e,r,n],{...this.options,...s});this.canvas.add(o),this.currentShape=o}drawArrow(t,e,r,n,s){const o=new O_([t,e,r,n],{...this.options,...s});this.canvas.add(o),this.currentShape=o}drawFreeDraw(){const t=new rs(this.canvas);t.width=this.options.strokeWidth??5,t.color=this.options.stroke??"#ff0000",this.canvas.freeDrawingBrush=t,this.canvas.freeDrawingCursor="default",this.canvas.isDrawingMode=!0}drawText(t,e){const r=new He(t,{fill:this.options.stroke,editingBorderColor:this.options.stroke,erasable:this.options.erasable,fontSize:18,padding:5,...e});this.canvas.add(r),this.canvas.defaultCursor="text",this.currentShape=r}insertImage(t,e){ae.fromURL(t).then(r=>{if(r){if(e)r.set(e);else{const n=this.canvas.getWidth(),s=this.canvas.getHeight(),o=r.width*r.scaleX,a=r.height*r.scaleY,l=(n-o)/2,c=(s-a)/2;r.set({left:l,top:c})}this.canvas.add(r)}})}insertPPT(t){this.images=t,this.setCurrentScene(0),this.emit("insert:images",t)}setCurrentScene(t){t<0||t>=this.images.length||(this.curImageIndex=t,this.setBackgroundImage(this.images[this.curImageIndex]),this.emit("current:image",t))}eraser(t){const e=new fv(this.canvas);t?.width?e.width=t.width:e.width=10,this.canvas.freeDrawingBrush=e,this.canvas.freeDrawingCursor="default",this.canvas.isDrawingMode=!0,e.on("end",async r=>{r.preventDefault(),r.detail.targets.forEach(s=>s.group?.remove(s)||this.canvas.remove(s))})}initEvent(){this.canvas.on("object:added",t=>{this.emit("object:added",t)}),this.canvas.on("object:modified",t=>{this.emit("object:modified",t)}),this.canvas.on("object:removed",t=>{this.emit("object:removed",t)}),this.canvas.on("after:render",t=>{this.emit("after:render",t)}),this.canvas.on("path:created",t=>{t.path.set("erasable",this.options.erasable),this.emit("path:created",t)}),this.canvas.on("mouse:down",this.onMouseDown.bind(this)),this.canvas.on("mouse:move",this.onMouseMove.bind(this)),this.canvas.on("mouse:up",this.onMouseUp.bind(this))}onMouseDown(t){const e=this.canvas.getActiveObject();if(!t.pointer||e)return;const{x:r,y:n}=t.pointer;switch(this.isDrawing=!0,this.startX=r,this.startY=n,this.drawingTool){case"rectangle":this.drawRect({left:r,top:n,width:0,height:0});break;case"triangle":this.drawTriangle({left:r,top:n,width:0,height:0});break;case"circle":this.drawCircle({left:r,top:n,radius:0});break;case"ellipse":this.drawEllipse({left:r,top:n,rx:0,ry:0});break;case"line":this.drawLine(r,n,r,n);break;case"arrow":this.drawArrow(r,n,r,n);break;case"text":this.drawText("",{left:r,top:n,width:0,height:0});break}}onMouseMove(t){if(!this.isDrawing||!t.pointer||!this.currentShape)return;const{x:e,y:r}=t.pointer,n=Math.min(e,this.startX),s=Math.min(r,this.startY),o=Math.abs(e-this.startX),a=Math.abs(r-this.startY);switch(this.drawingTool){case"rectangle":case"triangle":this.currentShape.set({left:n,top:s,width:o,height:a});break;case"circle":const l=Math.sqrt(o*o+a*a)/2;this.currentShape.set({left:n,top:s,radius:l});break;case"ellipse":this.currentShape.set({left:n,top:s,rx:Math.abs(o/2),ry:Math.abs(a/2)});break;case"line":case"arrow":this.currentShape.set({x2:e,y2:r});break;case"text":this.currentShape.set({left:n,top:s,width:o,height:a});break}this.currentShape.setCoords(),this.canvas.requestRenderAll()}onMouseUp(){this.currentShape&&this.drawingTool==="text"&&(this.currentShape.width<10&&this.currentShape.height<10&&this.currentShape.set({width:100,height:28}),this.canvas.setActiveObject(this.currentShape),this.currentShape.enterEditing()),this.isDrawing=!1,this.currentShape=null,this.emit("mouse:up",null)}toDataURL(t){return this.canvas.toDataURL(t)}toJSON(){return this.canvas.toJSON()}loadFromJSON(t,e){t&&this.canvas.loadFromJSON(t).then(()=>{this.canvas.requestRenderAll(),typeof e=="function"&&e()})}renderAll(){this.canvas.renderAll()}zoom(t=1){const e=new C(this.canvas.width/2,this.canvas.height/2);this.canvas.zoomToPoint(e,t)}getZoom(){return this.canvas.getZoom()}zoomIn(){this.zoom(this.canvas.getZoom()*1.1)}zoomOut(){this.zoom(this.canvas.getZoom()/1.1)}destroy(){this.removeAllListeners(),this.canvas.destroy()}}const gv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efollow%2014%3c/title%3e%3cg%20id='Flat'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='--'%20transform='translate(-16.000000,%20-247.000000)'%3e%3cg%20id='-35'%20transform='translate(8.000000,%20207.000000)'%3e%3cg%20id='folder'%20transform='translate(8.000000,%2040.000000)'%3e%3cpath%20d='M12,19%20L7,19%20C5.8954305,19%205,18.1045695%205,17%20L5,7%20C5,5.8954305%205.8954305,5%207,5%20L17,5%20C18.1045695,5%2019,5.8954305%2019,7%20L19,12%20L19,12'%20id=''%20stroke='%23444E60'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/path%3e%3cpolygon%20id='-10'%20fill='%23444E60'%20points='13%2013%2019%2015%2016.3333333%2016.3333333%2015%2019'%3e%3c/polygon%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",pv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='16px'%20height='16px'%20viewBox='0%200%2016%2016'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!--%20Generator:%20Sketch%2055.1%20(78136)%20-%20https://sketchapp.com%20--%3e%3ctitle%3eselector%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cg%20id='1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='selector'%20transform='translate(1.000000,%201.000000)'%3e%3cpath%20d='M7,14%20L2,14%20C0.8954305,14%200,13.1045695%200,12%20L0,2%20C0,0.8954305%200.8954305,0%202,0%20L12,0%20C13.1045695,0%2014,0.8954305%2014,2%20L14,7%20L14,7'%20id=''%20stroke='%233381FF'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/path%3e%3cpolygon%20id='-10'%20fill='%233381FF'%20fill-rule='nonzero'%20points='8%208%2014%2010%2011.3333333%2011.3333333%2010%2014'%3e%3c/polygon%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efollow%203%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-8.000000,%20-44.000000)'%20stroke='%23444E60'%3e%3cg%20id='folder'%20transform='translate(8.000000,%2044.000000)'%3e%3cpath%20d='M15.2700286,11.5822879%20L9.44305056,17.4092659%20C9.06480988,17.7875066%208.55180543,18%208.01689232,18%20L6,18%20L6,18%20L6,15.9831077%20C6,15.4481946%206.2124934,14.9351901%206.59073408,14.5569494%20L14.5569494,6.59073408%20C15.3445949,5.80308864%2016.6216205,5.80308864%2017.4092659,6.59073408%20C18.1969114,7.37837953%2018.1969114,8.65540512%2017.4092659,9.44305056%20L17.4092659,9.44305056%20L17.4092659,9.44305056%20C18.1969114,10.230696%2018.1969114,11.5077216%2017.4092659,12.295367%20L14.5569494,15.1476835%20L14.5569494,15.1476835'%20id=''%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",_v="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efollow%203%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-48.000000,%20-44.000000)'%20stroke='%233381FF'%3e%3cg%20id='folder'%20transform='translate(48.000000,%2044.000000)'%3e%3cpath%20d='M15.2700286,11.5822879%20L9.44305056,17.4092659%20C9.06480988,17.7875066%208.55180543,18%208.01689232,18%20L6,18%20L6,18%20L6,15.9831077%20C6,15.4481946%206.2124934,14.9351901%206.59073408,14.5569494%20L14.5569494,6.59073408%20C15.3445949,5.80308864%2016.6216205,5.80308864%2017.4092659,6.59073408%20C18.1969114,7.37837953%2018.1969114,8.65540512%2017.4092659,9.44305056%20L17.4092659,9.44305056%20L17.4092659,9.44305056%20C18.1969114,10.230696%2018.1969114,11.5077216%2017.4092659,12.295367%20L14.5569494,15.1476835%20L14.5569494,15.1476835'%20id=''%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",vv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%2025%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-8.000000,%20-80.000000)'%20stroke='%23444E60'%3e%3cg%20id='-2'%20transform='translate(8.000000,%2080.000000)'%3e%3cpolyline%20id='-16'%20points='6%206%2018%206%2018%208'%3e%3c/polyline%3e%3cline%20x1='12'%20y1='6'%20x2='12'%20y2='16'%20id='-17'%3e%3c/line%3e%3cline%20x1='6'%20y1='6'%20x2='6'%20y2='8'%20id='-18'%3e%3c/line%3e%3cline%20x1='10'%20y1='18'%20x2='14'%20y2='18'%20id='-19'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",xv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%2025%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-48.000000,%20-80.000000)'%20stroke='%233381FF'%3e%3cg%20id='-2'%20transform='translate(48.000000,%2080.000000)'%3e%3cpolyline%20id='-16'%20points='6%206%2018%206%2018%208'%3e%3c/polyline%3e%3cline%20x1='12'%20y1='6'%20x2='12'%20y2='16'%20id='-17'%3e%3c/line%3e%3cline%20x1='6'%20y1='6'%20x2='6'%20y2='8'%20id='-18'%3e%3c/line%3e%3cline%20x1='10'%20y1='18'%20x2='14'%20y2='18'%20id='-19'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",yv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%2025%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id=''%20transform='translate(-8.000000,%20-116.000000)'%20stroke='%23444E60'%3e%3cg%20id='-3'%20transform='translate(8.000000,%20116.000000)'%3e%3cline%20x1='11'%20y1='8'%20x2='16'%20y2='13'%20id='-26'%3e%3c/line%3e%3cpath%20d='M15.5,6.16666667%20L17.8333333,8.5%20C18.4776655,9.14433221%2018.4776655,10.1890011%2017.8333333,10.8333333%20L12,16.6666667%20C10.7113356,17.9553311%208.62199775,17.9553311%207.33333333,16.6666667%20L6.16666667,15.5%20C5.52233446,14.8556678%205.52233446,13.8109989%206.16666667,13.1666667%20L13.1666667,6.16666667%20C13.8109989,5.52233446%2014.8556678,5.52233446%2015.5,6.16666667%20Z'%20id=''%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",wv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%2025%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id=''%20transform='translate(-48.000000,%20-116.000000)'%20stroke='%233381FF'%3e%3cg%20id='-3'%20transform='translate(48.000000,%20116.000000)'%3e%3cline%20x1='11'%20y1='8'%20x2='16'%20y2='13'%20id='-26'%3e%3c/line%3e%3cpath%20d='M15.5,6.16666667%20L17.8333333,8.5%20C18.4776655,9.14433221%2018.4776655,10.1890011%2017.8333333,10.8333333%20L12,16.6666667%20C10.7113356,17.9553311%208.62199775,17.9553311%207.33333333,16.6666667%20L6.16666667,15.5%20C5.52233446,14.8556678%205.52233446,13.8109989%206.16666667,13.1666667%20L13.1666667,6.16666667%20C13.8109989,5.52233446%2014.8556678,5.52233446%2015.5,6.16666667%20Z'%20id=''%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",bv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%2024%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id=''%20transform='translate(-8.000000,%20-152.000000)'%3e%3cg%20id='-4'%20transform='translate(8.000000,%20152.000000)'%3e%3cline%20x1='6'%20y1='18'%20x2='16.4593589'%20y2='7.54064109'%20id='-20'%20stroke='%23444E60'%20stroke-linecap='square'%20stroke-linejoin='round'%3e%3c/line%3e%3cpolygon%20id=''%20fill='%23444E60'%20points='12%206%2018%206%2018%2012'%3e%3c/polygon%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Sv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%2024%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id=''%20transform='translate(-48.000000,%20-152.000000)'%3e%3cg%20id='-4'%20transform='translate(48.000000,%20152.000000)'%3e%3cline%20x1='6'%20y1='18'%20x2='16.4593589'%20y2='7.54064109'%20id='-20'%20stroke='%233381FF'%20stroke-linecap='square'%20stroke-linejoin='round'%3e%3c/line%3e%3cpolygon%20id=''%20fill='%233381FF'%20points='12%206%2018%206%2018%2012'%3e%3c/polygon%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Cv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efolder%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-8.000000,%20-368.000000)'%20stroke='%23444E60'%3e%3cg%20id='folder'%20transform='translate(8.000000,%20368.000000)'%3e%3crect%20id=''%20x='6'%20y='6'%20width='12'%20height='12'%20rx='6'%3e%3c/rect%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Tv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efolder%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-48.000000,%20-368.000000)'%20stroke='%233381FF'%3e%3cg%20id='folder'%20transform='translate(48.000000,%20368.000000)'%3e%3crect%20id=''%20x='6'%20y='6'%20width='12'%20height='12'%20rx='6'%3e%3c/rect%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",kv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efolder%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-8.000000,%20-332.000000)'%20stroke='%23444E60'%3e%3cg%20id='folder'%20transform='translate(8.000000,%20332.000000)'%3e%3crect%20id=''%20x='6'%20y='6'%20width='12'%20height='12'%20rx='2'%3e%3c/rect%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Ov="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efolder%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-48.000000,%20-332.000000)'%20stroke='%233381FF'%3e%3cg%20id='folder'%20transform='translate(48.000000,%20332.000000)'%3e%3crect%20id=''%20x='6'%20y='6'%20width='12'%20height='12'%20rx='2'%3e%3c/rect%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Ev="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efollow%205%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-8.000000,%20-404.000000)'%20stroke='%23444E60'%3e%3cg%20id='folder-2'%20transform='translate(8.000000,%20404.000000)'%3e%3cline%20x1='6'%20y1='18'%20x2='18'%20y2='6'%20id='-2'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Dv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efollow%207%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-48.000000,%20-404.000000)'%20stroke='%233381FF'%3e%3cg%20id='folder-2'%20transform='translate(48.000000,%20404.000000)'%3e%3cline%20x1='6'%20y1='18'%20x2='18'%20y2='6'%20id='-2'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Mv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%2025%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id=''%20transform='translate(-96.000000,%20-48.000000)'%20stroke='%23444E60'%3e%3cg%20id='-34'%20transform='translate(56.000000,%208.000000)'%3e%3cg%20id='follow-22'%20transform='translate(40.000000,%2040.000000)'%3e%3cpath%20d='M11.8735432,6.51639519%20L18.4433604,16.8729099%20C18.5014646,16.9705991%2018.513552,17.0816789%2018.4849451,17.1824518%20C18.4637477,17.2571235%2018.4207741,17.3254323%2018.3599622,17.3797162%20L18.3599622,17.3797162%20L5.9619473,17.5%20C5.83202254,17.5%205.71357665,17.4508256%205.62815063,17.3687543%20C5.5756394,17.3183052%205.53576798,17.2551406%205.51530514,17.1841993%20L5.51530514,17.1841993%20L11.5944453,6.72141053%20C11.6575042,6.61539105%2011.7604689,6.5460226%2011.8735432,6.51639519%20L11.8735432,6.51639519%20Z'%20id=''%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Av="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%2025%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id=''%20transform='translate(-96.000000,%20-128.000000)'%20stroke='%233381FF'%3e%3cg%20id='-34'%20transform='translate(56.000000,%2088.000000)'%3e%3cg%20id='follow-22'%20transform='translate(40.000000,%2040.000000)'%3e%3cpath%20d='M11.8735432,6.51639519%20L18.4433604,16.8729099%20C18.5014646,16.9705991%2018.513552,17.0816789%2018.4849451,17.1824518%20C18.4637477,17.2571235%2018.4207741,17.3254323%2018.3599622,17.3797162%20L18.3599622,17.3797162%20L5.9619473,17.5%20C5.83202254,17.5%205.71357665,17.4508256%205.62815063,17.3687543%20C5.5756394,17.3183052%205.53576798,17.2551406%205.51530514,17.1841993%20L5.51530514,17.1841993%20L11.5944453,6.72141053%20C11.6575042,6.61539105%2011.7604689,6.5460226%2011.8735432,6.51639519%20L11.8735432,6.51639519%20Z'%20id=''%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Pv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-16.000000,%20-549.000000)'%20stroke='%23444E60'%3e%3cg%20id='-35'%20transform='translate(8.000000,%20285.000000)'%3e%3cg%20id='-9'%20transform='translate(8.000000,%20264.000000)'%3e%3cpath%20d='M10.6666667,9.66666667%20L10.6666667,6.16666667%20C10.6666667,5.52233446%2011.1890011,5%2011.8333333,5%20C12.4776655,5%2013,5.52233446%2013,6.16666667%20L13,9.66666667%20L13,9.66666667%20C14.2886644,9.66666667%2015.3333333,10.7113356%2015.3333333,12%20L15.3333333,12%20L15.3333333,12%20L8.33333333,12%20C8.33333333,10.7113356%209.37800225,9.66666667%2010.6666667,9.66666667%20L10.6666667,9.66666667%20L10.6666667,9.66666667%20Z'%20id='-47'%3e%3c/path%3e%3cpath%20d='M15.3333333,12%20L17.6666667,17.8333333%20C13.8159078,18.6034851%209.85075886,18.6034851%206,17.8333333%20L8.33333333,12'%20id=''%3e%3c/path%3e%3cline%20x1='11.8333333'%20y1='17.8333333'%20x2='11.8333333'%20y2='15.5'%20id='-49'%3e%3c/line%3e%3cline%20x1='9.5'%20y1='17.8333333'%20x2='9.5'%20y2='15.5'%20id='-51'%3e%3c/line%3e%3cline%20x1='14.1666667'%20y1='17.8333333'%20x2='14.1666667'%20y2='15.5'%20id='-52'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Fv={class:"tool-mid-box-left"},Lv=["onClick"],jv=["src","alt"],Rv={class:"tool-box-cell-box-left"},Iv=["src"],Bv=sn({__name:"index",setup(i){const t=Ai("canvas"),e=Me([{name:"",icon:gv,iconActive:pv,shapeType:"select"},{name:"",icon:mv,iconActive:_v,shapeType:"pencil"},{name:"",icon:vv,iconActive:xv,shapeType:"text"},{name:"",icon:yv,iconActive:wv,shapeType:"eraser"},{name:"",icon:Mv,iconActive:Av,shapeType:"triangle"},{name:"",icon:Cv,iconActive:Tv,shapeType:"circle"},{name:"",icon:kv,iconActive:Ov,shapeType:"rectangle"},{name:"",icon:Ev,iconActive:Dv,shapeType:"line"},{name:"",icon:bv,iconActive:Sv,shapeType:"arrow"}]),r=Me("pencil");function n(o){r.value=o,t?.value.setDrawingTool(o)}function s(){t?.value.clearCanvas()}return(o,a)=>(ai(),li("div",Fv,[(ai(!0),li(je,null,R0(e.value,l=>(ai(),li("div",{class:"tool-box-cell-box-left",key:l.shapeType},[G("div",{class:"tool-box-cell",onClick:c=>n(l.shapeType)},[G("img",{src:l.shapeType===r.value?l.iconActive:l.icon,alt:l.name},null,8,jv)],8,Lv)]))),128)),G("div",Rv,[G("div",{class:"tool-box-cell",onClick:s},[G("img",{src:Pt(Pv),alt:""},null,8,Iv)])])]))}}),Hc=(i,t)=>{const e=i.__vccOpts||i;for(const[r,n]of t)e[r]=n;return e},zv=Hc(Bv,[["__scopeId","data-v-ca940f89"]]),Hv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eundo%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-116.000000)'%20stroke='%23444E60'%3e%3cpolyline%20id='-11-5'%20transform='translate(103.000000,%20126.000000)%20scale(-1,%201)%20rotate(-360.000000)%20translate(-103.000000,%20-126.000000)%20'%20points='105%20130%20103%20128%20101%20126%20103%20124%20105%20122'%3e%3c/polyline%3e%3cpath%20d='M95,126%20L103,126%20C104.104569,126%20105,126.895431%20105,128%20L105,134%20L105,134'%20id='-7'%20transform='translate(100.000000,%20130.000000)%20scale(-1,%201)%20translate(-100.000000,%20-130.000000)%20'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Nv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eredo%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-80.000000)'%20stroke='%23444E60'%3e%3cpolyline%20id='-11-5'%20transform='translate(97.000000,%2090.000000)%20rotate(-360.000000)%20translate(-97.000000,%20-90.000000)%20'%20points='99%2094%2097%2092%2095%2090%2097%2088%2099%2086'%3e%3c/polyline%3e%3cpath%20d='M95,90%20L103,90%20C104.104569,90%20105,90.8954305%20105,92%20L105,98%20L105,98'%20id='-7'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Uv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eundo-d%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-128.000000,%20-116.000000)'%20stroke='%23DBE1EA'%3e%3cpolyline%20id='-11-5'%20transform='translate(143.000000,%20126.000000)%20scale(-1,%201)%20rotate(-360.000000)%20translate(-143.000000,%20-126.000000)%20'%20points='145%20130%20143%20128%20141%20126%20143%20124%20145%20122'%3e%3c/polyline%3e%3cpath%20d='M135,126%20L143,126%20C144.104569,126%20145,126.895431%20145,128%20L145,134%20L145,134'%20id='-7'%20transform='translate(140.000000,%20130.000000)%20scale(-1,%201)%20translate(-140.000000,%20-130.000000)%20'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Wv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eredo-d%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-128.000000,%20-80.000000)'%20stroke='%23DBE1EA'%3e%3cpolyline%20id='-11-5'%20transform='translate(137.000000,%2090.000000)%20rotate(-360.000000)%20translate(-137.000000,%20-90.000000)%20'%20points='139%2094%20137%2092%20135%2090%20137%2088%20139%2086'%3e%3c/polyline%3e%3cpath%20d='M135,90%20L143,90%20C144.104569,90%20145,90.8954305%20145,92%20L145,98%20L145,98'%20id='-7'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Yv={class:"redo-undo"},Xv=["src"],Vv=["src"],Gv=10,$v=sn({__name:"index",setup(i){const t=Ai("canvas"),e=Me(0),r=Me([]);function n(c){t?.value&&(t.value.clearCanvas(),t.value.loadFromJSON(c,()=>{t.value.renderAll()}))}function s(){const c=r.value.length;if(!(!t?.value||!c)&&e.value<c){const h=r.value[c-1-e.value-1];n(h),e.value+=1}}function o(){const c=r.value.length;if(!(!t?.value||!c)&&e.value>0){const h=r.value[c-1-e.value+1];n(h),e.value-=1}}function a(){if(!t?.value)return;const c=t.value.toJSON();r.value.length>Gv&&r.value.shift(),r.value.push(c)}function l(){t?.value&&(t.value.on("mouse:up",a),le(en.ctrlz,s),le(en.ctrly,o))}return uc(()=>{t?.value&&l()}),(c,h)=>(ai(),li("div",Yv,[G("div",{class:"redo-undo-controller-btn",onClick:s},[G("img",{src:e.value!==r.value.length?Pt(Nv):Pt(Wv),alt:""},null,8,Xv)]),G("div",{class:"redo-undo-controller-btn",onClick:o},[G("img",{src:e.value?Pt(Hv):Pt(Uv),alt:""},null,8,Vv)])]))}}),Kv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3ereset%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-152.000000)'%3e%3ccircle%20id='-2'%20fill='%23444E60'%20cx='100'%20cy='164'%20r='1'%3e%3c/circle%3e%3ccircle%20id=''%20stroke='%23444E60'%20stroke-linecap='round'%20stroke-linejoin='round'%20cx='100'%20cy='164'%20r='4'%3e%3c/circle%3e%3cline%20x1='100'%20y1='158'%20x2='100'%20y2='160'%20id='-2-2'%20stroke='%23444E60'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/line%3e%3cline%20x1='100'%20y1='168'%20x2='100'%20y2='170'%20id='-2-2'%20stroke='%23444E60'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/line%3e%3cline%20x1='106'%20y1='164'%20x2='104'%20y2='164'%20id='-2-2'%20stroke='%23444E60'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/line%3e%3cline%20x1='96'%20y1='164'%20x2='94'%20y2='164'%20id='-2-2'%20stroke='%23444E60'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Zv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eadd%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-224.000000)'%20stroke='%23444E60'%3e%3cline%20x1='100'%20y1='231'%20x2='100'%20y2='241'%20id='-2'%3e%3c/line%3e%3cline%20x1='95'%20y1='236'%20x2='105'%20y2='236'%20id='-2'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/svg%3e",qv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eless%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-188.000000)'%20stroke='%23444E60'%3e%3cline%20x1='95'%20y1='200'%20x2='105'%20y2='200'%20id='-2'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Jv={class:"scale-controller-box"},Qv=["src"],tx=["src"],ex=["src"],ix=sn({__name:"index",setup(i){const t=Ai("canvas"),e=Me(100);function r(){t?.value.zoom(1),e.value=100}function n(){t?.value.zoomIn(),e.value=Math.floor(t?.value.getZoom()*100)}function s(){t?.value.zoomOut(),e.value=Math.floor(t?.value.getZoom()*100)}return(o,a)=>(ai(),li("div",Jv,[G("div",{class:"scale-controller-btn",onClick:r},[G("img",{src:Pt(Kv),alt:""},null,8,Qv)]),a[1]||(a[1]=G("div",{class:"scale-controller-cut-line"},null,-1)),G("div",{class:"scale-controller-btn",onClick:s},[G("img",{src:Pt(qv),alt:""},null,8,tx)]),G("div",null,[rf(Kn(e.value)+" ",1),a[0]||(a[0]=G("span",{style:{opacity:"0.6"}},"%",-1))]),G("div",{class:"scale-controller-btn",onClick:n},[G("img",{src:Pt(Zv),alt:""},null,8,ex)])]))}}),rx=Hc(ix,[["__scopeId","data-v-208f1cc3"]]),nx="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3enext%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-404.000000)'%20stroke='%23444E60'%3e%3cpolyline%20id='-11-5'%20transform='translate(100.000000,%20416.000000)%20scale(-1,%201)%20rotate(-360.000000)%20translate(-100.000000,%20-416.000000)%20'%20points='102%20420%20100%20418%2098%20416%20100%20414%20102%20412'%3e%3c/polyline%3e%3c/g%3e%3c/g%3e%3c/svg%3e",sx="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3enext-d%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-128.000000,%20-404.000000)'%20stroke='%23DBE1EA'%3e%3cpolyline%20id='-11-5'%20transform='translate(140.000000,%20416.000000)%20scale(-1,%201)%20rotate(-360.000000)%20translate(-140.000000,%20-416.000000)%20'%20points='142%20420%20140%20418%20138%20416%20140%20414%20142%20412'%3e%3c/polyline%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ox="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eprevious%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-368.000000)'%20stroke='%23444E60'%3e%3cpolyline%20id='-11-5'%20transform='translate(100.000000,%20380.000000)%20rotate(-360.000000)%20translate(-100.000000,%20-380.000000)%20'%20points='102%20384%20100%20382%2098%20380%20100%20378%20102%20376'%3e%3c/polyline%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ax="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3eprevious-d%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-128.000000,%20-368.000000)'%20stroke='%23DBE1EA'%3e%3cpolyline%20id='-11-5'%20transform='translate(140.000000,%20380.000000)%20rotate(-360.000000)%20translate(-140.000000,%20-380.000000)%20'%20points='142%20384%20140%20382%20138%20380%20140%20378%20142%20376'%3e%3c/polyline%3e%3c/g%3e%3c/g%3e%3c/svg%3e",lx="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efirst%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-296.000000)'%20stroke='%23444E60'%3e%3cpolyline%20id='-11-5'%20transform='translate(101.000000,%20308.000000)%20rotate(-360.000000)%20translate(-101.000000,%20-308.000000)%20'%20points='103%20312%20101%20310%2099%20308%20101%20306%20103%20304'%3e%3c/polyline%3e%3cline%20x1='97'%20y1='304'%20x2='97'%20y2='312'%20id='-4'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/svg%3e",cx="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3efirst-d%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-128.000000,%20-296.000000)'%20stroke='%23DBE1EA'%3e%3cpolyline%20id='-11-5'%20transform='translate(141.000000,%20308.000000)%20rotate(-360.000000)%20translate(-141.000000,%20-308.000000)%20'%20points='143%20312%20141%20310%20139%20308%20141%20306%20143%20304'%3e%3c/polyline%3e%3cline%20x1='137'%20y1='304'%20x2='137'%20y2='312'%20id='-4'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/svg%3e",hx="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3elast%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-332.000000)'%20stroke='%23444E60'%3e%3cpolyline%20id='-11-5'%20transform='translate(99.000000,%20344.000000)%20scale(-1,%201)%20rotate(-360.000000)%20translate(-99.000000,%20-344.000000)%20'%20points='101%20348%2099%20346%2097%20344%2099%20342%20101%20340'%3e%3c/polyline%3e%3cline%20x1='103'%20y1='340'%20x2='103'%20y2='348'%20id='-4'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ux="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3elast-d%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-128.000000,%20-332.000000)'%20stroke='%23DBE1EA'%3e%3cpolyline%20id='-11-5'%20transform='translate(139.000000,%20344.000000)%20scale(-1,%201)%20rotate(-360.000000)%20translate(-139.000000,%20-344.000000)%20'%20points='141%20348%20139%20346%20137%20344%20139%20342%20141%20340'%3e%3c/polyline%3e%3cline%20x1='143'%20y1='340'%20x2='143'%20y2='348'%20id='-4'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/svg%3e",fx={class:"whiteboard-annex-box"},dx=["src"],gx=["src"],px={className:"whiteboard-annex-arrow-page"},mx=["src"],_x=["src"],vx=sn({__name:"index",setup(i){const t=Ai("canvas"),e=Me(0),r=Me([]);function n(){t?.value.clearCanvas(),t?.value.setCurrentScene(e.value)}function s(){if(--e.value,e.value<0){e.value=0;return}n()}function o(){if(++e.value,e.value>=r.value.length){e.value=r.value.length-1;return}n()}function a(){return e.value===0}function l(){const u=r.value.length-1;return e.value===u}function c(){e.value=r.value.length-1,n()}function h(){e.value=0,n()}return uc(()=>{t?.value&&(t.value.on("insert:images",u=>{r.value=u}),t.value.on("current:image",u=>{e.value=u}))}),(u,f)=>(ai(),li("div",fx,[G("div",{onClick:h,class:"whiteboard-annex-arrow"},[G("img",{src:a()?Pt(cx):Pt(lx),alt:"first"},null,8,dx)]),G("div",{onClick:s,class:"whiteboard-annex-arrow"},[G("img",{src:a()?Pt(ax):Pt(ox),alt:"back"},null,8,gx)]),G("div",px,Kn(e.value+1)+" / "+Kn(r.value.length),1),G("div",{onClick:o,class:"whiteboard-annex-arrow"},[G("img",{src:l()?Pt(sx):Pt(nx),alt:"next"},null,8,mx)]),G("div",{onClick:c,class:"whiteboard-annex-arrow"},[G("img",{src:l()?Pt(ux):Pt(hx),alt:"last"},null,8,_x)])]))}}),xx="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='22px'%20height='22px'%20viewBox='0%200%2022%2022'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!--%20Generator:%20Sketch%2060.1%20(88133)%20-%20https://sketch.com%20--%3e%3ctitle%3eclose%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cg%20id='-4'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Whiteboard-Guidelines'%20transform='translate(-417.000000,%20-445.000000)'%3e%3cg%20id='close'%20transform='translate(417.000000,%20445.000000)'%3e%3cg%20id='addPage'%20fill='%23FFFFFF'%20opacity='0.01'%3e%3crect%20id='-24'%20x='0'%20y='0'%20width='22'%20height='22'%3e%3c/rect%3e%3c/g%3e%3cg%20id='-3'%20transform='translate(11.000000,%2011.000000)%20rotate(-315.000000)%20translate(-11.000000,%20-11.000000)%20translate(5.000000,%205.000000)'%20stroke='%23212324'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cline%20x1='0'%20y1='6'%20x2='12'%20y2='6'%20id='-31'%3e%3c/line%3e%3cline%20x1='6'%20y1='0'%20x2='6'%20y2='12'%20id='-31'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",yx="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='22px'%20height='22px'%20viewBox='0%200%2022%2022'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!--%20Generator:%20Sketch%2060.1%20(88133)%20-%20https://sketch.com%20--%3e%3ctitle%3edelete%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cg%20id='-4'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20opacity='0.600000024'%3e%3cg%20id='Whiteboard-Pages'%20transform='translate(-1402.000000,%20-226.000000)'%3e%3cg%20id='delete'%20transform='translate(1402.000000,%20226.000000)'%3e%3crect%20id='-21'%20fill='%23FFFFFF'%20opacity='0.01'%20x='0'%20y='0'%20width='22'%20height='22'%3e%3c/rect%3e%3cpath%20d='M15,9%20L15,15%20C15,16.1045695%2014.1045695,17%2013,17%20L9,17%20C7.8954305,17%207,16.1045695%207,15%20L7,9%20L7,9'%20id=''%20stroke='%23212324'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20d='M8,7%20C8,5.8954305%208.8954305,5%2010,5%20L12,5%20C13.1045695,5%2014,5.8954305%2014,7%20L14,7%20L14,7'%20id='-28'%20stroke='%23212324'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/path%3e%3cline%20x1='6'%20y1='7'%20x2='16'%20y2='7'%20id='-27'%20stroke='%23212324'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/line%3e%3cline%20x1='12.5'%20y1='10'%20x2='12.5'%20y2='14'%20id='-29'%20stroke='%23212324'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/line%3e%3cline%20x1='9.5'%20y1='10'%20x2='9.5'%20y2='14'%20id='-29'%20stroke='%23212324'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",wx={class:"menu-annex-box",style:{outline:"0"}},bx={class:"menu-title-line-box"},Sx={class:"menu-title-line"},Cx={class:"menu-title-left"},Tx=["src"],kx={class:"menu-annex-body"},Ox={class:"preview-cells-box"},Ex={class:"page-out-box"},Dx=["onClick"],Mx=["src"],Ax={class:"page-box-under"},Px={class:"page-box-under-left"},Fx=["onClick"],Lx=["src"],jx=sn({__name:"index",emits:["handlePreviewState"],setup(i,{emit:t}){const e=Ai("canvas"),r=Me([]),n=Me(0),s=t;function o(c){s("handlePreviewState",c)}function a(c){e?.value.setCurrentScene(c)}function l(c){}return uc(()=>{e?.value&&(e.value.on("insert:images",c=>{r.value=c}),e.value.on("current:image",c=>{n.value=c}))}),(c,h)=>(ai(),li("div",wx,[G("div",bx,[G("div",Sx,[h[1]||(h[1]=G("div",{class:"menu-title-text-box"},"  ",-1)),G("div",Cx,[G("div",{class:"menu-head-btn",style:{marginLeft:"8px"},onClick:h[0]||(h[0]=u=>o(!1))},[G("img",{src:Pt(xx),alt:""},null,8,Tx)])])])]),h[2]||(h[2]=G("div",{style:{height:"64px"}},null,-1)),G("div",kx,[G("div",Ox,[(ai(!0),li(je,null,R0(r.value,(u,f)=>(ai(),li("div",Ex,[G("div",{onClick:d=>a(f),class:Yo(["page-box",{active:n.value===f}])},[G("img",{class:"ppt-image",src:u},null,8,Mx)],10,Dx),G("div",Ax,[G("div",Px,Kn(f+1),1),G("div",{onClick:d=>void 0,class:"page-box-under-right"},[G("img",{src:Pt(yx),alt:""},null,8,Lx)],8,Fx)])]))),256))])])]))}}),Rx="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='24px'%20height='24px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3epage%3c/title%3e%3cg%20id='-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20id=''%20transform='translate(-88.000000,%20-260.000000)'%20stroke='%23444E60'%3e%3crect%20id=''%20x='94'%20y='268'%20width='10'%20height='10'%20rx='2'%3e%3c/rect%3e%3cpath%20d='M98,266%20L104,266%20C105.104569,266%20106,266.895431%20106,268%20L106,274'%20id='-3'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Ix="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='32px'%20height='32px'%20viewBox='0%200%2032%2032'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!--%20Generator:%20Sketch%2060.1%20(88133)%20-%20https://sketch.com%20--%3e%3ctitle%3efolder%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cg%20id='-4'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Whiteboard-Guidelines'%20transform='translate(-664.000000,%20-374.000000)'%3e%3cg%20id='folder'%20transform='translate(664.000000,%20374.000000)'%3e%3crect%20id='-25'%20fill='%23FFFFFF'%20opacity='0.01'%20x='0'%20y='0'%20width='32'%20height='32'%3e%3c/rect%3e%3cpath%20d='M10,11%20C10,10.4477153%2010.4477153,10%2011,10%20L14.4384472,10%20C15.3561825,10%2016.1561487,10.6245947%2016.3787322,11.5149287%20L16.5,12%20L20,12%20C21.1045695,12%2022,12.8954305%2022,14%20L22,20%20C22,21.1045695%2021.1045695,22%2020,22%20L12,22%20C10.8954305,22%2010,21.1045695%2010,20%20L10,11%20Z'%20id=''%20stroke='%23212324'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/path%3e%3cline%20x1='10'%20y1='14'%20x2='22'%20y2='14'%20id='-6'%20stroke='%23212324'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/line%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";const Bx=4,pu=0,mu=1,zx=2;function fn(i){let t=i.length;for(;--t>=0;)i[t]=0}const Hx=0,ng=1,Nx=2,Ux=3,Wx=258,Nc=29,Ss=256,cs=Ss+1+Nc,Vr=30,Uc=19,sg=2*cs+1,fr=15,Xa=16,Yx=7,Wc=256,og=16,ag=17,lg=18,zl=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),fo=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Xx=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),cg=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vx=512,Ci=new Array((cs+2)*2);fn(Ci);const Vn=new Array(Vr*2);fn(Vn);const hs=new Array(Vx);fn(hs);const us=new Array(Wx-Ux+1);fn(us);const Yc=new Array(Nc);fn(Yc);const Io=new Array(Vr);fn(Io);function Va(i,t,e,r,n){this.static_tree=i,this.extra_bits=t,this.extra_base=e,this.elems=r,this.max_length=n,this.has_stree=i&&i.length}let hg,ug,fg;function Ga(i,t){this.dyn_tree=i,this.max_code=0,this.stat_desc=t}const dg=i=>i<256?hs[i]:hs[256+(i>>>7)],fs=(i,t)=>{i.pending_buf[i.pending++]=t&255,i.pending_buf[i.pending++]=t>>>8&255},ce=(i,t,e)=>{i.bi_valid>Xa-e?(i.bi_buf|=t<<i.bi_valid&65535,fs(i,i.bi_buf),i.bi_buf=t>>Xa-i.bi_valid,i.bi_valid+=e-Xa):(i.bi_buf|=t<<i.bi_valid&65535,i.bi_valid+=e)},ni=(i,t,e)=>{ce(i,e[t*2],e[t*2+1])},gg=(i,t)=>{let e=0;do e|=i&1,i>>>=1,e<<=1;while(--t>0);return e>>>1},Gx=i=>{i.bi_valid===16?(fs(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)},$x=(i,t)=>{const e=t.dyn_tree,r=t.max_code,n=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,h,u,f,d,g,p=0;for(f=0;f<=fr;f++)i.bl_count[f]=0;for(e[i.heap[i.heap_max]*2+1]=0,c=i.heap_max+1;c<sg;c++)h=i.heap[c],f=e[e[h*2+1]*2+1]+1,f>l&&(f=l,p++),e[h*2+1]=f,!(h>r)&&(i.bl_count[f]++,d=0,h>=a&&(d=o[h-a]),g=e[h*2],i.opt_len+=g*(f+d),s&&(i.static_len+=g*(n[h*2+1]+d)));if(p!==0){do{for(f=l-1;i.bl_count[f]===0;)f--;i.bl_count[f]--,i.bl_count[f+1]+=2,i.bl_count[l]--,p-=2}while(p>0);for(f=l;f!==0;f--)for(h=i.bl_count[f];h!==0;)u=i.heap[--c],!(u>r)&&(e[u*2+1]!==f&&(i.opt_len+=(f-e[u*2+1])*e[u*2],e[u*2+1]=f),h--)}},pg=(i,t,e)=>{const r=new Array(fr+1);let n=0,s,o;for(s=1;s<=fr;s++)n=n+e[s-1]<<1,r[s]=n;for(o=0;o<=t;o++){let a=i[o*2+1];a!==0&&(i[o*2]=gg(r[a]++,a))}},Kx=()=>{let i,t,e,r,n;const s=new Array(fr+1);for(e=0,r=0;r<Nc-1;r++)for(Yc[r]=e,i=0;i<1<<zl[r];i++)us[e++]=r;for(us[e-1]=r,n=0,r=0;r<16;r++)for(Io[r]=n,i=0;i<1<<fo[r];i++)hs[n++]=r;for(n>>=7;r<Vr;r++)for(Io[r]=n<<7,i=0;i<1<<fo[r]-7;i++)hs[256+n++]=r;for(t=0;t<=fr;t++)s[t]=0;for(i=0;i<=143;)Ci[i*2+1]=8,i++,s[8]++;for(;i<=255;)Ci[i*2+1]=9,i++,s[9]++;for(;i<=279;)Ci[i*2+1]=7,i++,s[7]++;for(;i<=287;)Ci[i*2+1]=8,i++,s[8]++;for(pg(Ci,cs+1,s),i=0;i<Vr;i++)Vn[i*2+1]=5,Vn[i*2]=gg(i,5);hg=new Va(Ci,zl,Ss+1,cs,fr),ug=new Va(Vn,fo,0,Vr,fr),fg=new Va(new Array(0),Xx,0,Uc,Yx)},mg=i=>{let t;for(t=0;t<cs;t++)i.dyn_ltree[t*2]=0;for(t=0;t<Vr;t++)i.dyn_dtree[t*2]=0;for(t=0;t<Uc;t++)i.bl_tree[t*2]=0;i.dyn_ltree[Wc*2]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},_g=i=>{i.bi_valid>8?fs(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},_u=(i,t,e,r)=>{const n=t*2,s=e*2;return i[n]<i[s]||i[n]===i[s]&&r[t]<=r[e]},$a=(i,t,e)=>{const r=i.heap[e];let n=e<<1;for(;n<=i.heap_len&&(n<i.heap_len&&_u(t,i.heap[n+1],i.heap[n],i.depth)&&n++,!_u(t,r,i.heap[n],i.depth));)i.heap[e]=i.heap[n],e=n,n<<=1;i.heap[e]=r},vu=(i,t,e)=>{let r,n,s=0,o,a;if(i.sym_next!==0)do r=i.pending_buf[i.sym_buf+s++]&255,r+=(i.pending_buf[i.sym_buf+s++]&255)<<8,n=i.pending_buf[i.sym_buf+s++],r===0?ni(i,n,t):(o=us[n],ni(i,o+Ss+1,t),a=zl[o],a!==0&&(n-=Yc[o],ce(i,n,a)),r--,o=dg(r),ni(i,o,e),a=fo[o],a!==0&&(r-=Io[o],ce(i,r,a)));while(s<i.sym_next);ni(i,Wc,t)},Hl=(i,t)=>{const e=t.dyn_tree,r=t.stat_desc.static_tree,n=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,c;for(i.heap_len=0,i.heap_max=sg,o=0;o<s;o++)e[o*2]!==0?(i.heap[++i.heap_len]=l=o,i.depth[o]=0):e[o*2+1]=0;for(;i.heap_len<2;)c=i.heap[++i.heap_len]=l<2?++l:0,e[c*2]=1,i.depth[c]=0,i.opt_len--,n&&(i.static_len-=r[c*2+1]);for(t.max_code=l,o=i.heap_len>>1;o>=1;o--)$a(i,e,o);c=s;do o=i.heap[1],i.heap[1]=i.heap[i.heap_len--],$a(i,e,1),a=i.heap[1],i.heap[--i.heap_max]=o,i.heap[--i.heap_max]=a,e[c*2]=e[o*2]+e[a*2],i.depth[c]=(i.depth[o]>=i.depth[a]?i.depth[o]:i.depth[a])+1,e[o*2+1]=e[a*2+1]=c,i.heap[1]=c++,$a(i,e,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],$x(i,t),pg(e,l,i.bl_count)},xu=(i,t,e)=>{let r,n=-1,s,o=t[1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(e+1)*2+1]=65535,r=0;r<=e;r++)s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)&&(a<c?i.bl_tree[s*2]+=a:s!==0?(s!==n&&i.bl_tree[s*2]++,i.bl_tree[og*2]++):a<=10?i.bl_tree[ag*2]++:i.bl_tree[lg*2]++,a=0,n=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},yu=(i,t,e)=>{let r,n=-1,s,o=t[1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),r=0;r<=e;r++)if(s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)){if(a<c)do ni(i,s,i.bl_tree);while(--a!==0);else s!==0?(s!==n&&(ni(i,s,i.bl_tree),a--),ni(i,og,i.bl_tree),ce(i,a-3,2)):a<=10?(ni(i,ag,i.bl_tree),ce(i,a-3,3)):(ni(i,lg,i.bl_tree),ce(i,a-11,7));a=0,n=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},Zx=i=>{let t;for(xu(i,i.dyn_ltree,i.l_desc.max_code),xu(i,i.dyn_dtree,i.d_desc.max_code),Hl(i,i.bl_desc),t=Uc-1;t>=3&&i.bl_tree[cg[t]*2+1]===0;t--);return i.opt_len+=3*(t+1)+5+5+4,t},qx=(i,t,e,r)=>{let n;for(ce(i,t-257,5),ce(i,e-1,5),ce(i,r-4,4),n=0;n<r;n++)ce(i,i.bl_tree[cg[n]*2+1],3);yu(i,i.dyn_ltree,t-1),yu(i,i.dyn_dtree,e-1)},Jx=i=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&i.dyn_ltree[e*2]!==0)return pu;if(i.dyn_ltree[18]!==0||i.dyn_ltree[20]!==0||i.dyn_ltree[26]!==0)return mu;for(e=32;e<Ss;e++)if(i.dyn_ltree[e*2]!==0)return mu;return pu};let wu=!1;const Qx=i=>{wu||(Kx(),wu=!0),i.l_desc=new Ga(i.dyn_ltree,hg),i.d_desc=new Ga(i.dyn_dtree,ug),i.bl_desc=new Ga(i.bl_tree,fg),i.bi_buf=0,i.bi_valid=0,mg(i)},vg=(i,t,e,r)=>{ce(i,(Hx<<1)+(r?1:0),3),_g(i),fs(i,e),fs(i,~e),e&&i.pending_buf.set(i.window.subarray(t,t+e),i.pending),i.pending+=e},ty=i=>{ce(i,ng<<1,3),ni(i,Wc,Ci),Gx(i)},ey=(i,t,e,r)=>{let n,s,o=0;i.level>0?(i.strm.data_type===zx&&(i.strm.data_type=Jx(i)),Hl(i,i.l_desc),Hl(i,i.d_desc),o=Zx(i),n=i.opt_len+3+7>>>3,s=i.static_len+3+7>>>3,s<=n&&(n=s)):n=s=e+5,e+4<=n&&t!==-1?vg(i,t,e,r):i.strategy===Bx||s===n?(ce(i,(ng<<1)+(r?1:0),3),vu(i,Ci,Vn)):(ce(i,(Nx<<1)+(r?1:0),3),qx(i,i.l_desc.max_code+1,i.d_desc.max_code+1,o+1),vu(i,i.dyn_ltree,i.dyn_dtree)),mg(i),r&&_g(i)},iy=(i,t,e)=>(i.pending_buf[i.sym_buf+i.sym_next++]=t,i.pending_buf[i.sym_buf+i.sym_next++]=t>>8,i.pending_buf[i.sym_buf+i.sym_next++]=e,t===0?i.dyn_ltree[e*2]++:(i.matches++,t--,i.dyn_ltree[(us[e]+Ss+1)*2]++,i.dyn_dtree[dg(t)*2]++),i.sym_next===i.sym_end);var ry=Qx,ny=vg,sy=ey,oy=iy,ay=ty,ly={_tr_init:ry,_tr_stored_block:ny,_tr_flush_block:sy,_tr_tally:oy,_tr_align:ay};const cy=(i,t,e,r)=>{let n=i&65535|0,s=i>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do n=n+t[r++]|0,s=s+n|0;while(--o);n%=65521,s%=65521}return n|s<<16|0};var ds=cy;const hy=()=>{let i,t=[];for(var e=0;e<256;e++){i=e;for(var r=0;r<8;r++)i=i&1?3988292384^i>>>1:i>>>1;t[e]=i}return t},uy=new Uint32Array(hy()),fy=(i,t,e,r)=>{const n=uy,s=r+e;i^=-1;for(let o=r;o<s;o++)i=i>>>8^n[(i^t[o])&255];return i^-1};var Ht=fy,yr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Cs={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:dy,_tr_stored_block:Nl,_tr_flush_block:gy,_tr_tally:Gi,_tr_align:py}=ly,{Z_NO_FLUSH:$i,Z_PARTIAL_FLUSH:my,Z_FULL_FLUSH:_y,Z_FINISH:Oe,Z_BLOCK:bu,Z_OK:Nt,Z_STREAM_END:Su,Z_STREAM_ERROR:fi,Z_DATA_ERROR:vy,Z_BUF_ERROR:Ka,Z_DEFAULT_COMPRESSION:xy,Z_FILTERED:yy,Z_HUFFMAN_ONLY:ro,Z_RLE:wy,Z_FIXED:by,Z_DEFAULT_STRATEGY:Sy,Z_UNKNOWN:Cy,Z_DEFLATED:ua}=Cs,Ty=9,ky=15,Oy=8,Ey=29,Dy=256,Ul=Dy+1+Ey,My=30,Ay=19,Py=2*Ul+1,Fy=15,st=3,Xi=258,di=Xi+st+1,Ly=32,rn=42,Xc=57,Wl=69,Yl=73,Xl=91,Vl=103,dr=113,Mn=666,te=1,dn=2,wr=3,gn=4,jy=3,gr=(i,t)=>(i.msg=yr[t],t),Cu=i=>i*2-(i>4?9:0),Wi=i=>{let t=i.length;for(;--t>=0;)i[t]=0},Ry=i=>{let t,e,r,n=i.w_size;t=i.hash_size,r=t;do e=i.head[--r],i.head[r]=e>=n?e-n:0;while(--t);t=n,r=t;do e=i.prev[--r],i.prev[r]=e>=n?e-n:0;while(--t)};let Iy=(i,t,e)=>(t<<i.hash_shift^e)&i.hash_mask,Ki=Iy;const _e=i=>{const t=i.state;let e=t.pending;e>i.avail_out&&(e=i.avail_out),e!==0&&(i.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),i.next_out),i.next_out+=e,t.pending_out+=e,i.total_out+=e,i.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},ye=(i,t)=>{gy(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,t),i.block_start=i.strstart,_e(i.strm)},ht=(i,t)=>{i.pending_buf[i.pending++]=t},Sn=(i,t)=>{i.pending_buf[i.pending++]=t>>>8&255,i.pending_buf[i.pending++]=t&255},Gl=(i,t,e,r)=>{let n=i.avail_in;return n>r&&(n=r),n===0?0:(i.avail_in-=n,t.set(i.input.subarray(i.next_in,i.next_in+n),e),i.state.wrap===1?i.adler=ds(i.adler,t,n,e):i.state.wrap===2&&(i.adler=Ht(i.adler,t,n,e)),i.next_in+=n,i.total_in+=n,n)},xg=(i,t)=>{let e=i.max_chain_length,r=i.strstart,n,s,o=i.prev_length,a=i.nice_match;const l=i.strstart>i.w_size-di?i.strstart-(i.w_size-di):0,c=i.window,h=i.w_mask,u=i.prev,f=i.strstart+Xi;let d=c[r+o-1],g=c[r+o];i.prev_length>=i.good_match&&(e>>=2),a>i.lookahead&&(a=i.lookahead);do if(n=t,!(c[n+o]!==g||c[n+o-1]!==d||c[n]!==c[r]||c[++n]!==c[r+1])){r+=2,n++;do;while(c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&r<f);if(s=Xi-(f-r),r=f-Xi,s>o){if(i.match_start=t,o=s,s>=a)break;d=c[r+o-1],g=c[r+o]}}while((t=u[t&h])>l&&--e!==0);return o<=i.lookahead?o:i.lookahead},nn=i=>{const t=i.w_size;let e,r,n;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=t+(t-di)&&(i.window.set(i.window.subarray(t,t+t-r),0),i.match_start-=t,i.strstart-=t,i.block_start-=t,i.insert>i.strstart&&(i.insert=i.strstart),Ry(i),r+=t),i.strm.avail_in===0)break;if(e=Gl(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=e,i.lookahead+i.insert>=st)for(n=i.strstart-i.insert,i.ins_h=i.window[n],i.ins_h=Ki(i,i.ins_h,i.window[n+1]);i.insert&&(i.ins_h=Ki(i,i.ins_h,i.window[n+st-1]),i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++,i.insert--,!(i.lookahead+i.insert<st)););}while(i.lookahead<di&&i.strm.avail_in!==0)},yg=(i,t)=>{let e=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,r,n,s,o=0,a=i.strm.avail_in;do{if(r=65535,s=i.bi_valid+42>>3,i.strm.avail_out<s||(s=i.strm.avail_out-s,n=i.strstart-i.block_start,r>n+i.strm.avail_in&&(r=n+i.strm.avail_in),r>s&&(r=s),r<e&&(r===0&&t!==Oe||t===$i||r!==n+i.strm.avail_in)))break;o=t===Oe&&r===n+i.strm.avail_in?1:0,Nl(i,0,0,o),i.pending_buf[i.pending-4]=r,i.pending_buf[i.pending-3]=r>>8,i.pending_buf[i.pending-2]=~r,i.pending_buf[i.pending-1]=~r>>8,_e(i.strm),n&&(n>r&&(n=r),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+n),i.strm.next_out),i.strm.next_out+=n,i.strm.avail_out-=n,i.strm.total_out+=n,i.block_start+=n,r-=n),r&&(Gl(i.strm,i.strm.output,i.strm.next_out,r),i.strm.next_out+=r,i.strm.avail_out-=r,i.strm.total_out+=r)}while(o===0);return a-=i.strm.avail_in,a&&(a>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=a&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-a,i.strm.next_in),i.strstart),i.strstart+=a,i.insert+=a>i.w_size-i.insert?i.w_size-i.insert:a),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),o?gn:t!==$i&&t!==Oe&&i.strm.avail_in===0&&i.strstart===i.block_start?dn:(s=i.window_size-i.strstart,i.strm.avail_in>s&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,s+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),s>i.strm.avail_in&&(s=i.strm.avail_in),s&&(Gl(i.strm,i.window,i.strstart,s),i.strstart+=s,i.insert+=s>i.w_size-i.insert?i.w_size-i.insert:s),i.high_water<i.strstart&&(i.high_water=i.strstart),s=i.bi_valid+42>>3,s=i.pending_buf_size-s>65535?65535:i.pending_buf_size-s,e=s>i.w_size?i.w_size:s,n=i.strstart-i.block_start,(n>=e||(n||t===Oe)&&t!==$i&&i.strm.avail_in===0&&n<=s)&&(r=n>s?s:n,o=t===Oe&&i.strm.avail_in===0&&r===n?1:0,Nl(i,i.block_start,r,o),i.block_start+=r,_e(i.strm)),o?wr:te)},Za=(i,t)=>{let e,r;for(;;){if(i.lookahead<di){if(nn(i),i.lookahead<di&&t===$i)return te;if(i.lookahead===0)break}if(e=0,i.lookahead>=st&&(i.ins_h=Ki(i,i.ins_h,i.window[i.strstart+st-1]),e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),e!==0&&i.strstart-e<=i.w_size-di&&(i.match_length=xg(i,e)),i.match_length>=st)if(r=Gi(i,i.strstart-i.match_start,i.match_length-st),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=st){i.match_length--;do i.strstart++,i.ins_h=Ki(i,i.ins_h,i.window[i.strstart+st-1]),e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=Ki(i,i.ins_h,i.window[i.strstart+1]);else r=Gi(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(r&&(ye(i,!1),i.strm.avail_out===0))return te}return i.insert=i.strstart<st-1?i.strstart:st-1,t===Oe?(ye(i,!0),i.strm.avail_out===0?wr:gn):i.sym_next&&(ye(i,!1),i.strm.avail_out===0)?te:dn},Fr=(i,t)=>{let e,r,n;for(;;){if(i.lookahead<di){if(nn(i),i.lookahead<di&&t===$i)return te;if(i.lookahead===0)break}if(e=0,i.lookahead>=st&&(i.ins_h=Ki(i,i.ins_h,i.window[i.strstart+st-1]),e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=st-1,e!==0&&i.prev_length<i.max_lazy_match&&i.strstart-e<=i.w_size-di&&(i.match_length=xg(i,e),i.match_length<=5&&(i.strategy===yy||i.match_length===st&&i.strstart-i.match_start>4096)&&(i.match_length=st-1)),i.prev_length>=st&&i.match_length<=i.prev_length){n=i.strstart+i.lookahead-st,r=Gi(i,i.strstart-1-i.prev_match,i.prev_length-st),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=n&&(i.ins_h=Ki(i,i.ins_h,i.window[i.strstart+st-1]),e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=st-1,i.strstart++,r&&(ye(i,!1),i.strm.avail_out===0))return te}else if(i.match_available){if(r=Gi(i,0,i.window[i.strstart-1]),r&&ye(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return te}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(r=Gi(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<st-1?i.strstart:st-1,t===Oe?(ye(i,!0),i.strm.avail_out===0?wr:gn):i.sym_next&&(ye(i,!1),i.strm.avail_out===0)?te:dn},By=(i,t)=>{let e,r,n,s;const o=i.window;for(;;){if(i.lookahead<=Xi){if(nn(i),i.lookahead<=Xi&&t===$i)return te;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=st&&i.strstart>0&&(n=i.strstart-1,r=o[n],r===o[++n]&&r===o[++n]&&r===o[++n])){s=i.strstart+Xi;do;while(r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&n<s);i.match_length=Xi-(s-n),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=st?(e=Gi(i,1,i.match_length-st),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(e=Gi(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),e&&(ye(i,!1),i.strm.avail_out===0))return te}return i.insert=0,t===Oe?(ye(i,!0),i.strm.avail_out===0?wr:gn):i.sym_next&&(ye(i,!1),i.strm.avail_out===0)?te:dn},zy=(i,t)=>{let e;for(;;){if(i.lookahead===0&&(nn(i),i.lookahead===0)){if(t===$i)return te;break}if(i.match_length=0,e=Gi(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,e&&(ye(i,!1),i.strm.avail_out===0))return te}return i.insert=0,t===Oe?(ye(i,!0),i.strm.avail_out===0?wr:gn):i.sym_next&&(ye(i,!1),i.strm.avail_out===0)?te:dn};function qe(i,t,e,r,n){this.good_length=i,this.max_lazy=t,this.nice_length=e,this.max_chain=r,this.func=n}const An=[new qe(0,0,0,0,yg),new qe(4,4,8,4,Za),new qe(4,5,16,8,Za),new qe(4,6,32,32,Za),new qe(4,4,16,16,Fr),new qe(8,16,32,32,Fr),new qe(8,16,128,128,Fr),new qe(8,32,128,256,Fr),new qe(32,128,258,1024,Fr),new qe(32,258,258,4096,Fr)],Hy=i=>{i.window_size=2*i.w_size,Wi(i.head),i.max_lazy_match=An[i.level].max_lazy,i.good_match=An[i.level].good_length,i.nice_match=An[i.level].nice_length,i.max_chain_length=An[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=st-1,i.match_available=0,i.ins_h=0};function Ny(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ua,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Py*2),this.dyn_dtree=new Uint16Array((2*My+1)*2),this.bl_tree=new Uint16Array((2*Ay+1)*2),Wi(this.dyn_ltree),Wi(this.dyn_dtree),Wi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Fy+1),this.heap=new Uint16Array(2*Ul+1),Wi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ul+1),Wi(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ts=i=>{if(!i)return 1;const t=i.state;return!t||t.strm!==i||t.status!==rn&&t.status!==Xc&&t.status!==Wl&&t.status!==Yl&&t.status!==Xl&&t.status!==Vl&&t.status!==dr&&t.status!==Mn?1:0},wg=i=>{if(Ts(i))return gr(i,fi);i.total_in=i.total_out=0,i.data_type=Cy;const t=i.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Xc:t.wrap?rn:dr,i.adler=t.wrap===2?0:1,t.last_flush=-2,dy(t),Nt},bg=i=>{const t=wg(i);return t===Nt&&Hy(i.state),t},Uy=(i,t)=>Ts(i)||i.state.wrap!==2?fi:(i.state.gzhead=t,Nt),Sg=(i,t,e,r,n,s)=>{if(!i)return fi;let o=1;if(t===xy&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),n<1||n>Ty||e!==ua||r<8||r>15||t<0||t>9||s<0||s>by||r===8&&o!==1)return gr(i,fi);r===8&&(r=9);const a=new Ny;return i.state=a,a.strm=i,a.status=rn,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=n+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+st-1)/st),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<n+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=s,a.method=e,bg(i)},Wy=(i,t)=>Sg(i,t,ua,ky,Oy,Sy),Yy=(i,t)=>{if(Ts(i)||t>bu||t<0)return i?gr(i,fi):fi;const e=i.state;if(!i.output||i.avail_in!==0&&!i.input||e.status===Mn&&t!==Oe)return gr(i,i.avail_out===0?Ka:fi);const r=e.last_flush;if(e.last_flush=t,e.pending!==0){if(_e(i),i.avail_out===0)return e.last_flush=-1,Nt}else if(i.avail_in===0&&Cu(t)<=Cu(r)&&t!==Oe)return gr(i,Ka);if(e.status===Mn&&i.avail_in!==0)return gr(i,Ka);if(e.status===rn&&e.wrap===0&&(e.status=dr),e.status===rn){let n=ua+(e.w_bits-8<<4)<<8,s=-1;if(e.strategy>=ro||e.level<2?s=0:e.level<6?s=1:e.level===6?s=2:s=3,n|=s<<6,e.strstart!==0&&(n|=Ly),n+=31-n%31,Sn(e,n),e.strstart!==0&&(Sn(e,i.adler>>>16),Sn(e,i.adler&65535)),i.adler=1,e.status=dr,_e(i),e.pending!==0)return e.last_flush=-1,Nt}if(e.status===Xc){if(i.adler=0,ht(e,31),ht(e,139),ht(e,8),e.gzhead)ht(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),ht(e,e.gzhead.time&255),ht(e,e.gzhead.time>>8&255),ht(e,e.gzhead.time>>16&255),ht(e,e.gzhead.time>>24&255),ht(e,e.level===9?2:e.strategy>=ro||e.level<2?4:0),ht(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(ht(e,e.gzhead.extra.length&255),ht(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(i.adler=Ht(i.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=Wl;else if(ht(e,0),ht(e,0),ht(e,0),ht(e,0),ht(e,0),ht(e,e.level===9?2:e.strategy>=ro||e.level<2?4:0),ht(e,jy),e.status=dr,_e(i),e.pending!==0)return e.last_flush=-1,Nt}if(e.status===Wl){if(e.gzhead.extra){let n=e.pending,s=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+s>e.pending_buf_size;){let a=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>n&&(i.adler=Ht(i.adler,e.pending_buf,e.pending-n,n)),e.gzindex+=a,_e(i),e.pending!==0)return e.last_flush=-1,Nt;n=0,s-=a}let o=new Uint8Array(e.gzhead.extra);e.pending_buf.set(o.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending+=s,e.gzhead.hcrc&&e.pending>n&&(i.adler=Ht(i.adler,e.pending_buf,e.pending-n,n)),e.gzindex=0}e.status=Yl}if(e.status===Yl){if(e.gzhead.name){let n=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>n&&(i.adler=Ht(i.adler,e.pending_buf,e.pending-n,n)),_e(i),e.pending!==0)return e.last_flush=-1,Nt;n=0}e.gzindex<e.gzhead.name.length?s=e.gzhead.name.charCodeAt(e.gzindex++)&255:s=0,ht(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>n&&(i.adler=Ht(i.adler,e.pending_buf,e.pending-n,n)),e.gzindex=0}e.status=Xl}if(e.status===Xl){if(e.gzhead.comment){let n=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>n&&(i.adler=Ht(i.adler,e.pending_buf,e.pending-n,n)),_e(i),e.pending!==0)return e.last_flush=-1,Nt;n=0}e.gzindex<e.gzhead.comment.length?s=e.gzhead.comment.charCodeAt(e.gzindex++)&255:s=0,ht(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>n&&(i.adler=Ht(i.adler,e.pending_buf,e.pending-n,n))}e.status=Vl}if(e.status===Vl){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(_e(i),e.pending!==0))return e.last_flush=-1,Nt;ht(e,i.adler&255),ht(e,i.adler>>8&255),i.adler=0}if(e.status=dr,_e(i),e.pending!==0)return e.last_flush=-1,Nt}if(i.avail_in!==0||e.lookahead!==0||t!==$i&&e.status!==Mn){let n=e.level===0?yg(e,t):e.strategy===ro?zy(e,t):e.strategy===wy?By(e,t):An[e.level].func(e,t);if((n===wr||n===gn)&&(e.status=Mn),n===te||n===wr)return i.avail_out===0&&(e.last_flush=-1),Nt;if(n===dn&&(t===my?py(e):t!==bu&&(Nl(e,0,0,!1),t===_y&&(Wi(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),_e(i),i.avail_out===0))return e.last_flush=-1,Nt}return t!==Oe?Nt:e.wrap<=0?Su:(e.wrap===2?(ht(e,i.adler&255),ht(e,i.adler>>8&255),ht(e,i.adler>>16&255),ht(e,i.adler>>24&255),ht(e,i.total_in&255),ht(e,i.total_in>>8&255),ht(e,i.total_in>>16&255),ht(e,i.total_in>>24&255)):(Sn(e,i.adler>>>16),Sn(e,i.adler&65535)),_e(i),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?Nt:Su)},Xy=i=>{if(Ts(i))return fi;const t=i.state.status;return i.state=null,t===dr?gr(i,vy):Nt},Vy=(i,t)=>{let e=t.length;if(Ts(i))return fi;const r=i.state,n=r.wrap;if(n===2||n===1&&r.status!==rn||r.lookahead)return fi;if(n===1&&(i.adler=ds(i.adler,t,e,0)),r.wrap=0,e>=r.w_size){n===0&&(Wi(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(e-r.w_size,e),0),t=l,e=r.w_size}const s=i.avail_in,o=i.next_in,a=i.input;for(i.avail_in=e,i.next_in=0,i.input=t,nn(r);r.lookahead>=st;){let l=r.strstart,c=r.lookahead-(st-1);do r.ins_h=Ki(r,r.ins_h,r.window[l+st-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=st-1,nn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=st-1,r.match_available=0,i.next_in=o,i.input=a,i.avail_in=s,r.wrap=n,Nt};var Gy=Wy,$y=Sg,Ky=bg,Zy=wg,qy=Uy,Jy=Yy,Qy=Xy,tw=Vy,ew="pako deflate (from Nodeca project)",Gn={deflateInit:Gy,deflateInit2:$y,deflateReset:Ky,deflateResetKeep:Zy,deflateSetHeader:qy,deflate:Jy,deflateEnd:Qy,deflateSetDictionary:tw,deflateInfo:ew};const iw=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var rw=function(i){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)iw(e,r)&&(i[r]=e[r])}}return i},nw=i=>{let t=0;for(let r=0,n=i.length;r<n;r++)t+=i[r].length;const e=new Uint8Array(t);for(let r=0,n=0,s=i.length;r<s;r++){let o=i[r];e.set(o,n),n+=o.length}return e},fa={assign:rw,flattenChunks:nw};let Cg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Cg=!1}const gs=new Uint8Array(256);for(let i=0;i<256;i++)gs[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;gs[254]=gs[254]=1;var sw=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let t,e,r,n,s,o=i.length,a=0;for(n=0;n<o;n++)e=i.charCodeAt(n),(e&64512)===55296&&n+1<o&&(r=i.charCodeAt(n+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),n++)),a+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(a),s=0,n=0;s<a;n++)e=i.charCodeAt(n),(e&64512)===55296&&n+1<o&&(r=i.charCodeAt(n+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),n++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t};const ow=(i,t)=>{if(t<65534&&i.subarray&&Cg)return String.fromCharCode.apply(null,i.length===t?i:i.subarray(0,t));let e="";for(let r=0;r<t;r++)e+=String.fromCharCode(i[r]);return e};var aw=(i,t)=>{const e=t||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,t));let r,n;const s=new Array(e*2);for(n=0,r=0;r<e;){let o=i[r++];if(o<128){s[n++]=o;continue}let a=gs[o];if(a>4){s[n++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<e;)o=o<<6|i[r++]&63,a--;if(a>1){s[n++]=65533;continue}o<65536?s[n++]=o:(o-=65536,s[n++]=55296|o>>10&1023,s[n++]=56320|o&1023)}return ow(s,n)},lw=(i,t)=>{t=t||i.length,t>i.length&&(t=i.length);let e=t-1;for(;e>=0&&(i[e]&192)===128;)e--;return e<0||e===0?t:e+gs[i[e]]>t?e:t},ps={string2buf:sw,buf2string:aw,utf8border:lw};function cw(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Tg=cw;const kg=Object.prototype.toString,{Z_NO_FLUSH:hw,Z_SYNC_FLUSH:uw,Z_FULL_FLUSH:fw,Z_FINISH:dw,Z_OK:Bo,Z_STREAM_END:gw,Z_DEFAULT_COMPRESSION:pw,Z_DEFAULT_STRATEGY:mw,Z_DEFLATED:_w}=Cs;function ks(i){this.options=fa.assign({level:pw,method:_w,chunkSize:16384,windowBits:15,memLevel:8,strategy:mw},i||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Tg,this.strm.avail_out=0;let e=Gn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==Bo)throw new Error(yr[e]);if(t.header&&Gn.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=ps.string2buf(t.dictionary):kg.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,e=Gn.deflateSetDictionary(this.strm,r),e!==Bo)throw new Error(yr[e]);this._dict_set=!0}}ks.prototype.push=function(i,t){const e=this.strm,r=this.options.chunkSize;let n,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?dw:hw,typeof i=="string"?e.input=ps.string2buf(i):kg.call(i)==="[object ArrayBuffer]"?e.input=new Uint8Array(i):e.input=i,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),(s===uw||s===fw)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(n=Gn.deflate(e,s),n===gw)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),n=Gn.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Bo;if(e.avail_out===0){this.onData(e.output);continue}if(s>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};ks.prototype.onData=function(i){this.chunks.push(i)};ks.prototype.onEnd=function(i){i===Bo&&(this.result=fa.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Vc(i,t){const e=new ks(t);if(e.push(i,!0),e.err)throw e.msg||yr[e.err];return e.result}function vw(i,t){return t=t||{},t.raw=!0,Vc(i,t)}function xw(i,t){return t=t||{},t.gzip=!0,Vc(i,t)}var yw=ks,ww=Vc,bw=vw,Sw=xw,Cw={Deflate:yw,deflate:ww,deflateRaw:bw,gzip:Sw};const no=16209,Tw=16191;var kw=function(t,e){let r,n,s,o,a,l,c,h,u,f,d,g,p,x,_,S,T,w,M,I,A,j,H,N;const V=t.state;r=t.next_in,H=t.input,n=r+(t.avail_in-5),s=t.next_out,N=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),l=V.dmax,c=V.wsize,h=V.whave,u=V.wnext,f=V.window,d=V.hold,g=V.bits,p=V.lencode,x=V.distcode,_=(1<<V.lenbits)-1,S=(1<<V.distbits)-1;t:do{g<15&&(d+=H[r++]<<g,g+=8,d+=H[r++]<<g,g+=8),T=p[d&_];e:for(;;){if(w=T>>>24,d>>>=w,g-=w,w=T>>>16&255,w===0)N[s++]=T&65535;else if(w&16){M=T&65535,w&=15,w&&(g<w&&(d+=H[r++]<<g,g+=8),M+=d&(1<<w)-1,d>>>=w,g-=w),g<15&&(d+=H[r++]<<g,g+=8,d+=H[r++]<<g,g+=8),T=x[d&S];i:for(;;){if(w=T>>>24,d>>>=w,g-=w,w=T>>>16&255,w&16){if(I=T&65535,w&=15,g<w&&(d+=H[r++]<<g,g+=8,g<w&&(d+=H[r++]<<g,g+=8)),I+=d&(1<<w)-1,I>l){t.msg="invalid distance too far back",V.mode=no;break t}if(d>>>=w,g-=w,w=s-o,I>w){if(w=I-w,w>h&&V.sane){t.msg="invalid distance too far back",V.mode=no;break t}if(A=0,j=f,u===0){if(A+=c-w,w<M){M-=w;do N[s++]=f[A++];while(--w);A=s-I,j=N}}else if(u<w){if(A+=c+u-w,w-=u,w<M){M-=w;do N[s++]=f[A++];while(--w);if(A=0,u<M){w=u,M-=w;do N[s++]=f[A++];while(--w);A=s-I,j=N}}}else if(A+=u-w,w<M){M-=w;do N[s++]=f[A++];while(--w);A=s-I,j=N}for(;M>2;)N[s++]=j[A++],N[s++]=j[A++],N[s++]=j[A++],M-=3;M&&(N[s++]=j[A++],M>1&&(N[s++]=j[A++]))}else{A=s-I;do N[s++]=N[A++],N[s++]=N[A++],N[s++]=N[A++],M-=3;while(M>2);M&&(N[s++]=N[A++],M>1&&(N[s++]=N[A++]))}}else if((w&64)===0){T=x[(T&65535)+(d&(1<<w)-1)];continue i}else{t.msg="invalid distance code",V.mode=no;break t}break}}else if((w&64)===0){T=p[(T&65535)+(d&(1<<w)-1)];continue e}else if(w&32){V.mode=Tw;break t}else{t.msg="invalid literal/length code",V.mode=no;break t}break}}while(r<n&&s<a);M=g>>3,r-=M,g-=M<<3,d&=(1<<g)-1,t.next_in=r,t.next_out=s,t.avail_in=r<n?5+(n-r):5-(r-n),t.avail_out=s<a?257+(a-s):257-(s-a),V.hold=d,V.bits=g};const Lr=15,Tu=852,ku=592,Ou=0,qa=1,Eu=2,Ow=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ew=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Dw=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Mw=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Aw=(i,t,e,r,n,s,o,a)=>{const l=a.bits;let c=0,h=0,u=0,f=0,d=0,g=0,p=0,x=0,_=0,S=0,T,w,M,I,A,j=null,H;const N=new Uint16Array(Lr+1),V=new Uint16Array(Lr+1);let et=null,nt,J,gt;for(c=0;c<=Lr;c++)N[c]=0;for(h=0;h<r;h++)N[t[e+h]]++;for(d=l,f=Lr;f>=1&&N[f]===0;f--);if(d>f&&(d=f),f===0)return n[s++]=1<<24|64<<16|0,n[s++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<f&&N[u]===0;u++);for(d<u&&(d=u),x=1,c=1;c<=Lr;c++)if(x<<=1,x-=N[c],x<0)return-1;if(x>0&&(i===Ou||f!==1))return-1;for(V[1]=0,c=1;c<Lr;c++)V[c+1]=V[c]+N[c];for(h=0;h<r;h++)t[e+h]!==0&&(o[V[t[e+h]]++]=h);if(i===Ou?(j=et=o,H=20):i===qa?(j=Ow,et=Ew,H=257):(j=Dw,et=Mw,H=0),S=0,h=0,c=u,A=s,g=d,p=0,M=-1,_=1<<d,I=_-1,i===qa&&_>Tu||i===Eu&&_>ku)return 1;for(;;){nt=c-p,o[h]+1<H?(J=0,gt=o[h]):o[h]>=H?(J=et[o[h]-H],gt=j[o[h]-H]):(J=96,gt=0),T=1<<c-p,w=1<<g,u=w;do w-=T,n[A+(S>>p)+w]=nt<<24|J<<16|gt|0;while(w!==0);for(T=1<<c-1;S&T;)T>>=1;if(T!==0?(S&=T-1,S+=T):S=0,h++,--N[c]===0){if(c===f)break;c=t[e+o[h]]}if(c>d&&(S&I)!==M){for(p===0&&(p=d),A+=u,g=c-p,x=1<<g;g+p<f&&(x-=N[g+p],!(x<=0));)g++,x<<=1;if(_+=1<<g,i===qa&&_>Tu||i===Eu&&_>ku)return 1;M=S&I,n[M]=d<<24|g<<16|A-s|0}}return S!==0&&(n[A+S]=c-p<<24|64<<16|0),a.bits=d,0};var $n=Aw;const Pw=0,Og=1,Eg=2,{Z_FINISH:Du,Z_BLOCK:Fw,Z_TREES:so,Z_OK:br,Z_STREAM_END:Lw,Z_NEED_DICT:jw,Z_STREAM_ERROR:Pe,Z_DATA_ERROR:Dg,Z_MEM_ERROR:Mg,Z_BUF_ERROR:Rw,Z_DEFLATED:Mu}=Cs,da=16180,Au=16181,Pu=16182,Fu=16183,Lu=16184,ju=16185,Ru=16186,Iu=16187,Bu=16188,zu=16189,zo=16190,yi=16191,Ja=16192,Hu=16193,Qa=16194,Nu=16195,Uu=16196,Wu=16197,Yu=16198,oo=16199,ao=16200,Xu=16201,Vu=16202,Gu=16203,$u=16204,Ku=16205,tl=16206,Zu=16207,qu=16208,Ct=16209,Ag=16210,Pg=16211,Iw=852,Bw=592,zw=15,Hw=zw,Ju=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function Nw(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Er=i=>{if(!i)return 1;const t=i.state;return!t||t.strm!==i||t.mode<da||t.mode>Pg?1:0},Fg=i=>{if(Er(i))return Pe;const t=i.state;return i.total_in=i.total_out=t.total=0,i.msg="",t.wrap&&(i.adler=t.wrap&1),t.mode=da,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Iw),t.distcode=t.distdyn=new Int32Array(Bw),t.sane=1,t.back=-1,br},Lg=i=>{if(Er(i))return Pe;const t=i.state;return t.wsize=0,t.whave=0,t.wnext=0,Fg(i)},jg=(i,t)=>{let e;if(Er(i))return Pe;const r=i.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Pe:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=e,r.wbits=t,Lg(i))},Rg=(i,t)=>{if(!i)return Pe;const e=new Nw;i.state=e,e.strm=i,e.window=null,e.mode=da;const r=jg(i,t);return r!==br&&(i.state=null),r},Uw=i=>Rg(i,Hw);let Qu=!0,el,il;const Ww=i=>{if(Qu){el=new Int32Array(512),il=new Int32Array(32);let t=0;for(;t<144;)i.lens[t++]=8;for(;t<256;)i.lens[t++]=9;for(;t<280;)i.lens[t++]=7;for(;t<288;)i.lens[t++]=8;for($n(Og,i.lens,0,288,el,0,i.work,{bits:9}),t=0;t<32;)i.lens[t++]=5;$n(Eg,i.lens,0,32,il,0,i.work,{bits:5}),Qu=!1}i.lencode=el,i.lenbits=9,i.distcode=il,i.distbits=5},Ig=(i,t,e,r)=>{let n;const s=i.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(e-s.wsize,e),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>r&&(n=r),s.window.set(t.subarray(e-r,e-r+n),s.wnext),r-=n,r?(s.window.set(t.subarray(e-r,e),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0},Yw=(i,t)=>{let e,r,n,s,o,a,l,c,h,u,f,d,g,p,x=0,_,S,T,w,M,I,A,j;const H=new Uint8Array(4);let N,V;const et=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Er(i)||!i.output||!i.input&&i.avail_in!==0)return Pe;e=i.state,e.mode===yi&&(e.mode=Ja),o=i.next_out,n=i.output,l=i.avail_out,s=i.next_in,r=i.input,a=i.avail_in,c=e.hold,h=e.bits,u=a,f=l,j=br;t:for(;;)switch(e.mode){case da:if(e.wrap===0){e.mode=Ja;break}for(;h<16;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,H[0]=c&255,H[1]=c>>>8&255,e.check=Ht(e.check,H,2,0),c=0,h=0,e.mode=Au;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){i.msg="incorrect header check",e.mode=Ct;break}if((c&15)!==Mu){i.msg="unknown compression method",e.mode=Ct;break}if(c>>>=4,h-=4,A=(c&15)+8,e.wbits===0&&(e.wbits=A),A>15||A>e.wbits){i.msg="invalid window size",e.mode=Ct;break}e.dmax=1<<e.wbits,e.flags=0,i.adler=e.check=1,e.mode=c&512?zu:yi,c=0,h=0;break;case Au:for(;h<16;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if(e.flags=c,(e.flags&255)!==Mu){i.msg="unknown compression method",e.mode=Ct;break}if(e.flags&57344){i.msg="unknown header flags set",e.mode=Ct;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(H[0]=c&255,H[1]=c>>>8&255,e.check=Ht(e.check,H,2,0)),c=0,h=0,e.mode=Pu;case Pu:for(;h<32;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(H[0]=c&255,H[1]=c>>>8&255,H[2]=c>>>16&255,H[3]=c>>>24&255,e.check=Ht(e.check,H,4,0)),c=0,h=0,e.mode=Fu;case Fu:for(;h<16;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(H[0]=c&255,H[1]=c>>>8&255,e.check=Ht(e.check,H,2,0)),c=0,h=0,e.mode=Lu;case Lu:if(e.flags&1024){for(;h<16;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(H[0]=c&255,H[1]=c>>>8&255,e.check=Ht(e.check,H,2,0)),c=0,h=0}else e.head&&(e.head.extra=null);e.mode=ju;case ju:if(e.flags&1024&&(d=e.length,d>a&&(d=a),d&&(e.head&&(A=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(s,s+d),A)),e.flags&512&&e.wrap&4&&(e.check=Ht(e.check,r,d,s)),a-=d,s+=d,e.length-=d),e.length))break t;e.length=0,e.mode=Ru;case Ru:if(e.flags&2048){if(a===0)break t;d=0;do A=r[s+d++],e.head&&A&&e.length<65536&&(e.head.name+=String.fromCharCode(A));while(A&&d<a);if(e.flags&512&&e.wrap&4&&(e.check=Ht(e.check,r,d,s)),a-=d,s+=d,A)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=Iu;case Iu:if(e.flags&4096){if(a===0)break t;d=0;do A=r[s+d++],e.head&&A&&e.length<65536&&(e.head.comment+=String.fromCharCode(A));while(A&&d<a);if(e.flags&512&&e.wrap&4&&(e.check=Ht(e.check,r,d,s)),a-=d,s+=d,A)break t}else e.head&&(e.head.comment=null);e.mode=Bu;case Bu:if(e.flags&512){for(;h<16;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if(e.wrap&4&&c!==(e.check&65535)){i.msg="header crc mismatch",e.mode=Ct;break}c=0,h=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),i.adler=e.check=0,e.mode=yi;break;case zu:for(;h<32;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}i.adler=e.check=Ju(c),c=0,h=0,e.mode=zo;case zo:if(e.havedict===0)return i.next_out=o,i.avail_out=l,i.next_in=s,i.avail_in=a,e.hold=c,e.bits=h,jw;i.adler=e.check=1,e.mode=yi;case yi:if(t===Fw||t===so)break t;case Ja:if(e.last){c>>>=h&7,h-=h&7,e.mode=tl;break}for(;h<3;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}switch(e.last=c&1,c>>>=1,h-=1,c&3){case 0:e.mode=Hu;break;case 1:if(Ww(e),e.mode=oo,t===so){c>>>=2,h-=2;break t}break;case 2:e.mode=Uu;break;case 3:i.msg="invalid block type",e.mode=Ct}c>>>=2,h-=2;break;case Hu:for(c>>>=h&7,h-=h&7;h<32;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){i.msg="invalid stored block lengths",e.mode=Ct;break}if(e.length=c&65535,c=0,h=0,e.mode=Qa,t===so)break t;case Qa:e.mode=Nu;case Nu:if(d=e.length,d){if(d>a&&(d=a),d>l&&(d=l),d===0)break t;n.set(r.subarray(s,s+d),o),a-=d,s+=d,l-=d,o+=d,e.length-=d;break}e.mode=yi;break;case Uu:for(;h<14;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if(e.nlen=(c&31)+257,c>>>=5,h-=5,e.ndist=(c&31)+1,c>>>=5,h-=5,e.ncode=(c&15)+4,c>>>=4,h-=4,e.nlen>286||e.ndist>30){i.msg="too many length or distance symbols",e.mode=Ct;break}e.have=0,e.mode=Wu;case Wu:for(;e.have<e.ncode;){for(;h<3;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}e.lens[et[e.have++]]=c&7,c>>>=3,h-=3}for(;e.have<19;)e.lens[et[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,N={bits:e.lenbits},j=$n(Pw,e.lens,0,19,e.lencode,0,e.work,N),e.lenbits=N.bits,j){i.msg="invalid code lengths set",e.mode=Ct;break}e.have=0,e.mode=Yu;case Yu:for(;e.have<e.nlen+e.ndist;){for(;x=e.lencode[c&(1<<e.lenbits)-1],_=x>>>24,S=x>>>16&255,T=x&65535,!(_<=h);){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if(T<16)c>>>=_,h-=_,e.lens[e.have++]=T;else{if(T===16){for(V=_+2;h<V;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if(c>>>=_,h-=_,e.have===0){i.msg="invalid bit length repeat",e.mode=Ct;break}A=e.lens[e.have-1],d=3+(c&3),c>>>=2,h-=2}else if(T===17){for(V=_+3;h<V;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}c>>>=_,h-=_,A=0,d=3+(c&7),c>>>=3,h-=3}else{for(V=_+7;h<V;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}c>>>=_,h-=_,A=0,d=11+(c&127),c>>>=7,h-=7}if(e.have+d>e.nlen+e.ndist){i.msg="invalid bit length repeat",e.mode=Ct;break}for(;d--;)e.lens[e.have++]=A}}if(e.mode===Ct)break;if(e.lens[256]===0){i.msg="invalid code -- missing end-of-block",e.mode=Ct;break}if(e.lenbits=9,N={bits:e.lenbits},j=$n(Og,e.lens,0,e.nlen,e.lencode,0,e.work,N),e.lenbits=N.bits,j){i.msg="invalid literal/lengths set",e.mode=Ct;break}if(e.distbits=6,e.distcode=e.distdyn,N={bits:e.distbits},j=$n(Eg,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,N),e.distbits=N.bits,j){i.msg="invalid distances set",e.mode=Ct;break}if(e.mode=oo,t===so)break t;case oo:e.mode=ao;case ao:if(a>=6&&l>=258){i.next_out=o,i.avail_out=l,i.next_in=s,i.avail_in=a,e.hold=c,e.bits=h,kw(i,f),o=i.next_out,n=i.output,l=i.avail_out,s=i.next_in,r=i.input,a=i.avail_in,c=e.hold,h=e.bits,e.mode===yi&&(e.back=-1);break}for(e.back=0;x=e.lencode[c&(1<<e.lenbits)-1],_=x>>>24,S=x>>>16&255,T=x&65535,!(_<=h);){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if(S&&(S&240)===0){for(w=_,M=S,I=T;x=e.lencode[I+((c&(1<<w+M)-1)>>w)],_=x>>>24,S=x>>>16&255,T=x&65535,!(w+_<=h);){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}c>>>=w,h-=w,e.back+=w}if(c>>>=_,h-=_,e.back+=_,e.length=T,S===0){e.mode=Ku;break}if(S&32){e.back=-1,e.mode=yi;break}if(S&64){i.msg="invalid literal/length code",e.mode=Ct;break}e.extra=S&15,e.mode=Xu;case Xu:if(e.extra){for(V=e.extra;h<V;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,h-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Vu;case Vu:for(;x=e.distcode[c&(1<<e.distbits)-1],_=x>>>24,S=x>>>16&255,T=x&65535,!(_<=h);){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if((S&240)===0){for(w=_,M=S,I=T;x=e.distcode[I+((c&(1<<w+M)-1)>>w)],_=x>>>24,S=x>>>16&255,T=x&65535,!(w+_<=h);){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}c>>>=w,h-=w,e.back+=w}if(c>>>=_,h-=_,e.back+=_,S&64){i.msg="invalid distance code",e.mode=Ct;break}e.offset=T,e.extra=S&15,e.mode=Gu;case Gu:if(e.extra){for(V=e.extra;h<V;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,h-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){i.msg="invalid distance too far back",e.mode=Ct;break}e.mode=$u;case $u:if(l===0)break t;if(d=f-l,e.offset>d){if(d=e.offset-d,d>e.whave&&e.sane){i.msg="invalid distance too far back",e.mode=Ct;break}d>e.wnext?(d-=e.wnext,g=e.wsize-d):g=e.wnext-d,d>e.length&&(d=e.length),p=e.window}else p=n,g=o-e.offset,d=e.length;d>l&&(d=l),l-=d,e.length-=d;do n[o++]=p[g++];while(--d);e.length===0&&(e.mode=ao);break;case Ku:if(l===0)break t;n[o++]=e.length,l--,e.mode=ao;break;case tl:if(e.wrap){for(;h<32;){if(a===0)break t;a--,c|=r[s++]<<h,h+=8}if(f-=l,i.total_out+=f,e.total+=f,e.wrap&4&&f&&(i.adler=e.check=e.flags?Ht(e.check,n,f,o-f):ds(e.check,n,f,o-f)),f=l,e.wrap&4&&(e.flags?c:Ju(c))!==e.check){i.msg="incorrect data check",e.mode=Ct;break}c=0,h=0}e.mode=Zu;case Zu:if(e.wrap&&e.flags){for(;h<32;){if(a===0)break t;a--,c+=r[s++]<<h,h+=8}if(e.wrap&4&&c!==(e.total&4294967295)){i.msg="incorrect length check",e.mode=Ct;break}c=0,h=0}e.mode=qu;case qu:j=Lw;break t;case Ct:j=Dg;break t;case Ag:return Mg;case Pg:default:return Pe}return i.next_out=o,i.avail_out=l,i.next_in=s,i.avail_in=a,e.hold=c,e.bits=h,(e.wsize||f!==i.avail_out&&e.mode<Ct&&(e.mode<tl||t!==Du))&&Ig(i,i.output,i.next_out,f-i.avail_out),u-=i.avail_in,f-=i.avail_out,i.total_in+=u,i.total_out+=f,e.total+=f,e.wrap&4&&f&&(i.adler=e.check=e.flags?Ht(e.check,n,f,i.next_out-f):ds(e.check,n,f,i.next_out-f)),i.data_type=e.bits+(e.last?64:0)+(e.mode===yi?128:0)+(e.mode===oo||e.mode===Qa?256:0),(u===0&&f===0||t===Du)&&j===br&&(j=Rw),j},Xw=i=>{if(Er(i))return Pe;let t=i.state;return t.window&&(t.window=null),i.state=null,br},Vw=(i,t)=>{if(Er(i))return Pe;const e=i.state;return(e.wrap&2)===0?Pe:(e.head=t,t.done=!1,br)},Gw=(i,t)=>{const e=t.length;let r,n,s;return Er(i)||(r=i.state,r.wrap!==0&&r.mode!==zo)?Pe:r.mode===zo&&(n=1,n=ds(n,t,e,0),n!==r.check)?Dg:(s=Ig(i,t,e,e),s?(r.mode=Ag,Mg):(r.havedict=1,br))};var $w=Lg,Kw=jg,Zw=Fg,qw=Uw,Jw=Rg,Qw=Yw,t3=Xw,e3=Vw,i3=Gw,r3="pako inflate (from Nodeca project)",Ti={inflateReset:$w,inflateReset2:Kw,inflateResetKeep:Zw,inflateInit:qw,inflateInit2:Jw,inflate:Qw,inflateEnd:t3,inflateGetHeader:e3,inflateSetDictionary:i3,inflateInfo:r3};function n3(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var s3=n3;const Bg=Object.prototype.toString,{Z_NO_FLUSH:o3,Z_FINISH:a3,Z_OK:ms,Z_STREAM_END:rl,Z_NEED_DICT:nl,Z_STREAM_ERROR:l3,Z_DATA_ERROR:t0,Z_MEM_ERROR:c3}=Cs;function Os(i){this.options=fa.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(i&&i.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Tg,this.strm.avail_out=0;let e=Ti.inflateInit2(this.strm,t.windowBits);if(e!==ms)throw new Error(yr[e]);if(this.header=new s3,Ti.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ps.string2buf(t.dictionary):Bg.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Ti.inflateSetDictionary(this.strm,t.dictionary),e!==ms)))throw new Error(yr[e])}Os.prototype.push=function(i,t){const e=this.strm,r=this.options.chunkSize,n=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?a3:o3,Bg.call(i)==="[object ArrayBuffer]"?e.input=new Uint8Array(i):e.input=i,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),s=Ti.inflate(e,o),s===nl&&n&&(s=Ti.inflateSetDictionary(e,n),s===ms?s=Ti.inflate(e,o):s===t0&&(s=nl));e.avail_in>0&&s===rl&&e.state.wrap>0&&i[e.next_in]!==0;)Ti.inflateReset(e),s=Ti.inflate(e,o);switch(s){case l3:case t0:case nl:case c3:return this.onEnd(s),this.ended=!0,!1}if(a=e.avail_out,e.next_out&&(e.avail_out===0||s===rl))if(this.options.to==="string"){let l=ps.utf8border(e.output,e.next_out),c=e.next_out-l,h=ps.buf2string(e.output,l);e.next_out=c,e.avail_out=r-c,c&&e.output.set(e.output.subarray(l,l+c),0),this.onData(h)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(s===ms&&a===0)){if(s===rl)return s=Ti.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Os.prototype.onData=function(i){this.chunks.push(i)};Os.prototype.onEnd=function(i){i===ms&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fa.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Gc(i,t){const e=new Os(t);if(e.push(i),e.err)throw e.msg||yr[e.err];return e.result}function h3(i,t){return t=t||{},t.raw=!0,Gc(i,t)}var u3=Os,f3=Gc,d3=h3,g3=Gc,p3={Inflate:u3,inflate:f3,inflateRaw:d3,ungzip:g3};const{Deflate:m3,deflate:_3,deflateRaw:v3,gzip:x3}=Cw,{Inflate:y3,inflate:w3,inflateRaw:b3,ungzip:S3}=p3;var C3=m3,T3=_3,k3=v3,O3=x3,E3=y3,D3=w3,M3=b3,A3=S3,P3=Cs,zg={Deflate:C3,deflate:T3,deflateRaw:k3,gzip:O3,Inflate:E3,inflate:D3,inflateRaw:M3,ungzip:A3,constants:P3};const F3=i=>{const t=zg.ungzip(i,{to:"string"});return JSON.parse(t)},L3=i=>zg.gzip(JSON.stringify(i)),j3=i=>{let t="";for(let e=0;e<i.byteLength;e++)t+=String.fromCharCode(i[e]);return window.btoa(t)},R3=i=>{const t=window.atob(i),e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e},I3={class:"canvas-wrap"},B3={class:"tool-box-out"},z3={class:"redo-undo-box"},H3={class:"zoom-controller-box"},N3={class:"room-controller-box"},U3={class:"page-controller-mid-box"},W3=["src"],Y3={class:"page-controller-box"},X3={className:"page-controller-mid-box"},V3=["src"],G3={class:"preview-controller-box"},$3=sn({__name:"App",setup(i){const t=Me();H0("canvas",t);const e=Me(!1),r=Me(!1);function n(){const a=new dv("canvas");t.value=a;const l=new hn("canvas2");a.on("after:render",()=>{console.log(a.toJSON());const c=L3(a.toJSON()),h=j3(c),u=R3(h),f=F3(u);l.loadFromJSON(f).then(()=>{l.renderAll(),console.log("")})})}function s(a){e.value=a}function o(){const l=Object.values(Object.assign({"/src/assets/ppt/image1.jpeg":am,"/src/assets/ppt/image2.jpeg":lm,"/src/assets/ppt/image3.jpeg":cm,"/src/assets/ppt/image4.jpeg":hm,"/src/assets/ppt/image5.jpeg":um,"/src/assets/ppt/image6.jpeg":fm}));t.value?.insertPPT(l),r.value=!0}return L0(()=>{n()}),(a,l)=>(ai(),li("div",null,[G("div",I3,[G("div",B3,[Te(zv)]),G("div",z3,[Te($v)]),G("div",H3,[Te(rx)]),ya(G("div",N3,[G("div",U3,[G("div",{className:"page-preview-cell",onClick:o},[G("img",{style:{width:"28px"},src:Pt(Ix),alt:""},null,8,W3)])])],512),[[Ta,!e.value]]),ya(G("div",Y3,[G("div",X3,[Te(vx),G("div",{className:"page-preview-cell",onClick:l[0]||(l[0]=c=>s(!0))},[G("img",{src:Pt(Rx),alt:"PPT"},null,8,V3)])])],512),[[Ta,r.value]]),ya(G("div",G3,[Te(jx,{onHandlePreviewState:s})],512),[[Ta,r.value&&e.value]]),l[1]||(l[1]=G("canvas",{id:"canvas",width:"800",height:"450"},null,-1))]),l[2]||(l[2]=G("div",{class:"canvas-wrap"},[G("canvas",{id:"canvas2",width:"800",height:"450"})],-1))]))}}),K3=Hc($3,[["__scopeId","data-v-802f95bd"]]);nm(K3).mount("#app");
